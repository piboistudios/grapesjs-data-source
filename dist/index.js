/*! @silexlabs/grapesjs-data-source - 0.0.72 */
!function(t,e){'object'==typeof exports&&'object'==typeof module?module.exports=e():'function'==typeof define&&define.amd?define([],e):'object'==typeof exports?exports["@silexlabs/grapesjs-data-source"]=e():t["@silexlabs/grapesjs-data-source"]=e()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{var t={298:(t,e,n)=>{var r,i;!function(o){var s='object'==typeof self&&self.self===self&&self||'object'==typeof n.g&&n.g.global===n.g&&n.g;if(1)r=[n(405),n(291),e],i=function(t,e,n){s.Backbone=function(t,e,n,r){var i=t.Backbone,o=Array.prototype.slice;e.VERSION='1.5.0',e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s,a=e.Events={},l=/\s+/,u=function(t,e,r,i,o){var s,a=0;if(r&&'object'==typeof r){void 0!==i&&'context'in o&&void 0===o.context&&(o.context=i);for(s=n.keys(r);a<s.length;a++)e=u(t,e,s[a],r[s[a]],o)}else if(r&&l.test(r))for(s=r.split(l);a<s.length;a++)e=t(e,s[a],i,o);else e=t(e,r,i,o);return e};a.on=function(t,e,n){(this._events=u(c,this._events||{},t,e,{context:n,ctx:this,listening:s}),s)&&((this._listeners||(this._listeners={}))[s.id]=s,s.interop=!1);return this},a.listenTo=function(t,e,r){if(!t)return this;var i=t._listenId||(t._listenId=n.uniqueId('l')),o=this._listeningTo||(this._listeningTo={}),a=s=o[i];a||(this._listenId||(this._listenId=n.uniqueId('l')),a=s=o[i]=new v(this,t));var l=d(t,e,r,this);if(s=void 0,l)throw l;return a.interop&&a.on(e,r),this};var c=function(t,e,n,r){if(n){var i=t[e]||(t[e]=[]),o=r.context,s=r.ctx,a=r.listening;a&&a.count++,i.push({callback:n,context:o,ctx:o||s,listening:a})}return t},d=function(t,e,n,r){try{t.on(e,n,r)}catch(t){return t}};a.off=function(t,e,n){return this._events?(this._events=u(p,this._events,t,e,{context:n,listeners:this._listeners}),this):this},a.stopListening=function(t,e,r){var i=this._listeningTo;if(!i)return this;for(var o=t?[t._listenId]:n.keys(i),s=0;s<o.length;s++){var a=i[o[s]];if(!a)break;a.obj.off(e,r,this),a.interop&&a.off(e,r)}return n.isEmpty(i)&&(this._listeningTo=void 0),this};var p=function(t,e,r,i){if(t){var o,s=i.context,a=i.listeners,l=0;if(e||s||r){for(o=e?[e]:n.keys(t);l<o.length;l++){var u=t[e=o[l]];if(!u)break;for(var c=[],d=0;d<u.length;d++){var p=u[d];if(r&&r!==p.callback&&r!==p.callback._callback||s&&s!==p.context)c.push(p);else{var h=p.listening;h&&h.off(e,r)}}c.length?t[e]=c:delete t[e]}return t}for(o=n.keys(a);l<o.length;l++)a[o[l]].cleanup()}};a.once=function(t,e,n){var r=u(h,{},t,e,this.off.bind(this));return'string'==typeof t&&null==n&&(e=void 0),this.on(r,e,n)},a.listenToOnce=function(t,e,n){var r=u(h,{},e,n,this.stopListening.bind(this,t));return this.listenTo(t,r)};var h=function(t,e,r,i){if(r){var o=t[e]=n.once((function(){i(e,o),r.apply(this,arguments)}));o._callback=r}return t};a.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),r=0;r<e;r++)n[r]=arguments[r+1];return u(f,this._events,t,void 0,n),this};var f=function(t,e,n,r){if(t){var i=t[e],o=t.all;i&&o&&(o=o.slice()),i&&g(i,r),o&&g(o,[e].concat(r))}return t},g=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},v=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};v.prototype.on=a.on,v.prototype.off=function(t,e){var n;this.interop?(this._events=u(p,this._events,t,e,{context:void 0,listeners:void 0}),n=!this._events):(this.count--,n=0===this.count),n&&this.cleanup()},v.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,n.extend(e,a);var y=e.Model=function(t,e){var r=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{});var i=n.result(this,'defaults');r=n.defaults(n.extend({},i,r),i),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,a,{changed:null,validationError:null,idAttribute:'id',cidPrefix:'c',preinitialize:function(){},initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,r){if(null==t)return this;var i;if('object'==typeof t?(i=t,r=e):(i={})[t]=e,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,s=r.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,c=this.changed,d=this._previousAttributes;for(var p in i)e=i[p],n.isEqual(u[p],e)||a.push(p),n.isEqual(d[p],e)?delete c[p]:c[p]=e,o?delete u[p]:u[p]=e;if(this.idAttribute in i){var h=this.id;this.id=this.get(this.idAttribute),this.trigger('changeId',this,h,r)}if(!s){a.length&&(this._pending=r);for(var f=0;f<a.length;f++)this.trigger('change:'+a[f],this,u[a[f]],r)}if(l)return this;if(!s)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger('change',this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,r=this._changing?this._previousAttributes:this.attributes,i={};for(var o in t){var s=t[o];n.isEqual(r[o],s)||(i[o]=s,e=!0)}return!!e&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,r=t.success;return t.success=function(n){var i=t.parse?e.parse(n,t):n;if(!e.set(i,t))return!1;r&&r.call(t.context,e,n,t),e.trigger('sync',e,n,t)},J(this,t),this.sync('read',this,t)},save:function(t,e,r){var i;null==t||'object'==typeof t?(i=t,r=e):(i={})[t]=e;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var s=this,a=r.success,l=this.attributes;r.success=function(t){s.attributes=l;var e=r.parse?s.parse(t,r):t;if(o&&(e=n.extend({},i,e)),e&&!s.set(e,r))return!1;a&&a.call(r.context,s,t,r),s.trigger('sync',s,t,r)},J(this,r),i&&o&&(this.attributes=n.extend({},l,i));var u=this.isNew()?'create':r.patch?'patch':'update';'patch'!==u||r.attrs||(r.attrs=i);var c=this.sync(u,this,r);return this.attributes=l,c},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,i=t.wait,o=function(){e.stopListening(),e.trigger('destroy',e,e.collection,t)};t.success=function(n){i&&o(),r&&r.call(t.context,e,n,t),e.isNew()||e.trigger('sync',e,n,t)};var s=!1;return this.isNew()?n.defer(t.success):(J(this,t),s=this.sync('delete',this,t)),i||o(),s},url:function(){var t=n.result(this,'urlRoot')||n.result(this.collection,'url')||Q();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,'$&/')+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return!r||(this.trigger('invalid',this,r,n.extend(e,{validationError:r})),!1)}});var m=e.Collection=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},_=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var r,i=Array(t.length-n),o=e.length;for(r=0;r<i.length;r++)i[r]=t[r+n];for(r=0;r<o;r++)t[r+n]=e[r];for(r=0;r<i.length;r++)t[r+o+n]=i[r]};n.extend(m.prototype,a,{model:y,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,x))},remove:function(t,e){e=n.extend({},e);var r=!n.isArray(t);t=r?[t]:t.slice();var i=this._removeModels(t,e);return!e.silent&&i.length&&(e.changes={added:[],merged:[],removed:i},this.trigger('update',this,e)),r?i[0]:i},set:function(t,e){if(null!=t){(e=n.extend({},b,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var r=!n.isArray(t);t=r?[t]:t.slice();var i=e.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,s,a=[],l=[],u=[],c=[],d={},p=e.add,h=e.merge,f=e.remove,g=!1,v=this.comparator&&null==i&&!1!==e.sort,y=n.isString(this.comparator)?this.comparator:null;for(s=0;s<t.length;s++){o=t[s];var m=this.get(o);if(m){if(h&&o!==m){var x=this._isModel(o)?o.attributes:o;e.parse&&(x=m.parse(x,e)),m.set(x,e),u.push(m),v&&!g&&(g=m.hasChanged(y))}d[m.cid]||(d[m.cid]=!0,a.push(m)),t[s]=m}else p&&(o=t[s]=this._prepareModel(o,e))&&(l.push(o),this._addReference(o,e),d[o.cid]=!0,a.push(o))}if(f){for(s=0;s<this.length;s++)d[(o=this.models[s]).cid]||c.push(o);c.length&&this._removeModels(c,e)}var w=!1,$=!v&&p&&f;if(a.length&&$?(w=this.length!==a.length||n.some(this.models,(function(t,e){return t!==a[e]})),this.models.length=0,_(this.models,a,0),this.length=this.models.length):l.length&&(v&&(g=!0),_(this.models,l,null==i?this.length:i),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(s=0;s<l.length;s++)null!=i&&(e.index=i+s),(o=l[s]).trigger('add',o,this,e);(g||w)&&this.trigger('sort',this,e),(l.length||c.length||u.length)&&(e.changes={added:l,removed:c,merged:u},this.trigger('update',this,e))}return r?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger('reset',this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t,t.idAttribute)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?'find':'filter'](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error('Cannot sort a set without a comparator');t||(t={});var r=e.length;return n.isFunction(e)&&(e=e.bind(this)),1===r||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger('sort',this,t),this},pluck:function(t){return this.map(t+'')},fetch:function(t){var e=(t=n.extend({parse:!0},t)).success,r=this;return t.success=function(n){var i=t.reset?'reset':'set';r[i](n,t),e&&e.call(t.context,r,n,t),r.trigger('sync',r,n,t)},J(this,t),this.sync('read',this,t)},create:function(t,e){var r=(e=e?n.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;r||this.add(t,e);var i=this,o=e.success;return e.success=function(t,e,n){r&&(t.off('error',this._forwardPristineError,this),i.add(t,n)),o&&o.call(n.context,t,e,n)},r&&t.once('error',this._forwardPristineError,this),t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t,e){return t[e||this.model.prototype.idAttribute||'id']},values:function(){return new $(this,k)},keys:function(){return new $(this,E)},entries:function(){return new $(this,S)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){return this._isModel(t)?(t.collection||(t.collection=this),t):((e=e?n.clone(e):{}).collection=this,(r=this.model.prototype?new this.model(t,e):this.model(t,e)).validationError?(this.trigger('invalid',this,r.validationError,e),!1):r);var r},_removeModels:function(t,e){for(var n=[],r=0;r<t.length;r++){var i=this.get(t[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var s=this.modelId(i.attributes,i.idAttribute);null!=s&&delete this._byId[s],e.silent||(e.index=o,i.trigger('remove',i,this,e)),n.push(i),this._removeReference(i,e)}}return t.length>0&&!e.silent&&delete e.index,n},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes,t.idAttribute);null!=n&&(this._byId[n]=t),t.on('all',this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes,t.idAttribute);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off('all',this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){if(e){if(('add'===t||'remove'===t)&&n!==this)return;if('destroy'===t&&this.remove(e,r),'changeId'===t){var i=this.modelId(e.previousAttributes(),e.idAttribute),o=this.modelId(e.attributes,e.idAttribute);null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=e)}}this.trigger.apply(this,arguments)},_forwardPristineError:function(t,e,n){this.has(t)||this._onModelEvent('error',t,e,n)}});var w='function'==typeof Symbol&&Symbol.iterator;w&&(m.prototype[w]=m.prototype.values);var $=function(t,e){this._collection=t,this._kind=e,this._index=0},k=1,E=2,S=3;w&&($.prototype[w]=function(){return this});$.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,e=this._collection.at(this._index);if(this._index++,this._kind===k)t=e;else{var n=this._collection.modelId(e.attributes,e.idAttribute);t=this._kind===E?n:[n,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var T=e.View=function(t){this.cid=n.uniqueId('view'),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(t,C)),this._ensureElement(),this.initialize.apply(this,arguments)},A=/^(\S+)\s*(.*)$/,C=['model','collection','el','id','attributes','className','tagName','events'];n.extend(T.prototype,a,{tagName:'div',$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,'events')),!t)return this;for(var e in this.undelegateEvents(),t){var r=t[e];if(n.isFunction(r)||(r=this[r]),r){var i=e.match(A);this.delegate(i[1],i[2],r.bind(this))}}return this},delegate:function(t,e,n){return this.$el.on(t+'.delegateEvents'+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off('.delegateEvents'+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+'.delegateEvents'+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,'el'));else{var t=n.extend({},n.result(this,'attributes'));this.id&&(t.id=n.result(this,'id')),this.className&&(t['class']=n.result(this,'className')),this.setElement(this._createElement(n.result(this,'tagName'))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}});var j=function(t,e,n,r){switch(e){case 1:return function(){return t[n](this[r])};case 2:return function(e){return t[n](this[r],e)};case 3:return function(e,i){return t[n](this[r],I(e,this),i)};case 4:return function(e,i,o){return t[n](this[r],I(e,this),i,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[r]),t[n].apply(t,e)}}},O=function(t,e,r,i){n.each(r,(function(n,r){e[r]&&(t.prototype[r]=j(e,n,r,i))}))},I=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?N(t):n.isString(t)?function(e){return e.get(t)}:t},N=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},R={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},D={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};n.each([[m,R,'models'],[y,D,'attributes']],(function(t){var e=t[0],r=t[1],i=t[2];e.mixin=function(t){var r=n.reduce(n.functions(t),(function(t,e){return t[e]=0,t}),{});O(e,t,r,i)},O(e,n,r,i)})),e.sync=function(t,r,i){var o=M[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:'json'};if(i.url||(s.url=n.result(r,'url')||Q()),null!=i.data||!r||'create'!==t&&'update'!==t&&'patch'!==t||(s.contentType='application/json',s.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(s.contentType='application/x-www-form-urlencoded',s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&('PUT'===o||'DELETE'===o||'PATCH'===o)){s.type='POST',i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader('X-HTTP-Method-Override',o),a)return a.apply(this,arguments)}}'GET'===s.type||i.emulateJSON||(s.processData=!1);var l=i.error;i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,l&&l.call(i.context,t,e,n)};var u=i.xhr=e.ajax(n.extend(s,i));return r.trigger('request',r,u,i),u};var M={create:'POST',update:'PUT',patch:'PATCH',delete:'DELETE',read:'GET'};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var P=e.Router=function(t){t||(t={}),this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},H=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,q=/\*\w+/g,U=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(P.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=''),i||(i=this[r]);var o=this;return e.history.route(t,(function(n){var s=o._extractParameters(t,n);!1!==o.execute(i,s,r)&&(o.trigger.apply(o,['route:'+r].concat(s)),o.trigger('route',r,s),e.history.trigger('route',o,r,s))})),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,'routes');for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(U,'\\$&').replace(H,'(?:$1)?').replace(L,(function(t,e){return e?t:'([^/?]+)'})).replace(q,'([^?]*?)'),new RegExp('^'+t+'(?:\\?([\\s\\S]*))?$')},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,(function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null}))}});var F=e.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),'undefined'!=typeof window&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,z=/^\/+|\/+$/g,W=/#.*$/;F.started=!1,n.extend(F.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,'$&/')===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+'/'===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,'%2525'))},getSearch:function(){var t=this.location.href.replace(/#.*/,'').match(/\?.+/);return t?t[0]:''},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:''},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return'/'===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(B,'')},start:function(t){if(F.started)throw new Error('Backbone.history has already been started');if(F.started=!0,this.options=n.extend({root:'/'},this.options,t),this.root=this.options.root,this._trailingSlash=this.options.trailingSlash,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange='onhashchange'in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=('/'+this.root+'/').replace(z,'/'),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||'/';return this.location.replace(e+'#'+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement('iframe'),this.iframe.src='javascript:0',this.iframe.style.display='none',this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash='#'+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent('on'+t,e)};if(this._usePushState?o('popstate',this.checkUrl,!1):this._useHashChange&&!this.iframe?o('hashchange',this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent('on'+t,e)};this._usePushState?t('popstate',this.checkUrl,!1):this._useHashChange&&!this.iframe&&t('hashchange',this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),F.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0})))},navigate:function(t,e){if(!F.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||'');var n=this.root;this._trailingSlash||''!==t&&'?'!==t.charAt(0)||(n=n.slice(0,-1)||'/');var r=n+t;t=t.replace(W,'');var i=this.decodeFragment(t);if(this.fragment!==i){if(this.fragment=i,this._usePushState)this.history[e.replace?'replaceState':'pushState']({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,'');t.replace(r+'#'+e)}else t.hash='#'+e}}),e.history=new F;var V=function(t,e){var r,i=this;return r=t&&n.has(t,'constructor')?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e),r.prototype=n.create(i.prototype,t),r.prototype.constructor=r,r.__super__=i.prototype,r};y.extend=m.extend=P.extend=T.extend=F.extend=V;var Q=function(){throw new Error('A "url" property or function must be specified')},J=function(t,e){var n=e.error;e.error=function(r){n&&n.call(e.context,t,r,e),t.trigger('error',t,r,e)}};return e}(s,n,t,e)}.apply(e,r),void 0===i||(t.exports=i);else;}()},169:t=>{t.exports=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=[],i='string'==typeof t?[t]:t.slice();i[i.length-1]=i[i.length-1].replace(/\r?\n([\t ]*)$/,'');for(var o=0;o<i.length;o++){var s;(s=i[o].match(/\n[\t ]+/g))&&r.push.apply(r,s)}if(r.length){var a=Math.min.apply(Math,r.map((function(t){return t.length-1}))),l=new RegExp("\n[\t ]{"+a+"}",'g');for(o=0;o<i.length;o++)i[o]=i[o].replace(l,'\n')}i[0]=i[0].replace(/^\r?\n/,'');var u=i[0];for(o=0;o<e.length;o++)u+=e[o]+i[o+1];return u}},291:function(t,e){var n;!function(e,n){"use strict";1&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(r,i){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,l=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},u=o.push,c=o.indexOf,d={},p=d.toString,h=d.hasOwnProperty,f=h.toString,g=f.call(Object),v={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},m=function(t){return null!=t&&t===t.window},b=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function _(t,e,n){var r,i,o=(n=n||b).createElement("script");if(o.text=t,e)for(r in x)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[p.call(t)]||"object":typeof t}var $="3.7.1",k=/HTML$/i,E=function(t,e){return new E.fn.init(t,e)};function S(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!y(t)&&!m(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function T(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}E.fn=E.prototype={jquery:$,constructor:E,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},E.extend=E.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||y(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)r=t[e],"__proto__"!==e&&s!==r&&(u&&r&&(E.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[e],o=i&&!Array.isArray(n)?[]:i||E.isPlainObject(n)?n:{},i=!1,s[e]=E.extend(u,o,r)):void 0!==r&&(s[e]=r));return s},E.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==p.call(t))&&(!(e=s(t))||"function"==typeof(n=h.call(e,"constructor")&&e.constructor)&&f.call(n)===g)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){_(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(S(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},text:function(t){var e,n="",r=0,i=t.nodeType;if(!i)for(;e=t[r++];)n+=E.text(e);return 1===i||11===i?t.textContent:9===i?t.documentElement.textContent:3===i||4===i?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(S(Object(t))?E.merge(n,"string"==typeof t?[t]:t):u.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:c.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!k.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,s=!n;i<o;i++)!e(t[i],i)!==s&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,s=[];if(S(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return l(s)},guid:1,support:v}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=o[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){d["[object "+e+"]"]=e.toLowerCase()}));var A=o.pop,C=o.sort,j=o.splice,O="[\\x20\\t\\r\\n\\f]",I=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g");E.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var N=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function R(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}E.escapeSelector=function(t){return(t+"").replace(N,R)};var D=b,M=u;!function(){var t,e,n,i,s,l,u,d,p,f,g=M,y=E.expando,m=0,b=0,x=tt(),_=tt(),w=tt(),$=tt(),k=function(t,e){return t===e&&(s=!0),0},S="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|"+"loop|multiple|open|readonly|required|scoped",N="(?:\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",R="\\["+O+"*("+N+")(?:"+O+"*([*^$|!~]?=)"+O+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+O+"*\\]",P=":("+N+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|"+".*"+")\\)|)",H=new RegExp(O+"+","g"),L=new RegExp("^"+O+"*,"+O+"*"),q=new RegExp("^"+O+"*([>+~]|"+O+")"+O+"*"),U=new RegExp(O+"|>"),F=new RegExp(P),B=new RegExp("^"+N+"$"),z={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),bool:new RegExp("^(?:"+S+")$","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,V=/^h\d$/i,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,G=new RegExp("\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\([^\\r\\n\\f])","g"),K=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},X=function(){lt()},Y=pt((function(t){return!0===t.disabled&&T(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{g.apply(o=a.call(D.childNodes),D.childNodes),o[D.childNodes.length].nodeType}catch(t){g={apply:function(t,e){M.apply(t,a.call(e))},call:function(t){M.apply(t,a.call(arguments,1))}}}function Z(t,e,n,r){var i,o,s,a,u,c,h,f=e&&e.ownerDocument,m=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==m&&9!==m&&11!==m)return n;if(!r&&(lt(e),e=e||l,d)){if(11!==m&&(u=Q.exec(t)))if(i=u[1]){if(9===m){if(!(s=e.getElementById(i)))return n;if(s.id===i)return g.call(n,s),n}else if(f&&(s=f.getElementById(i))&&Z.contains(e,s)&&s.id===i)return g.call(n,s),n}else{if(u[2])return g.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&e.getElementsByClassName)return g.apply(n,e.getElementsByClassName(i)),n}if(!($[t+" "]||p&&p.test(t))){if(h=t,f=e,1===m&&(U.test(t)||q.test(t))){for((f=J.test(t)&&at(e.parentNode)||e)==e&&v.scope||((a=e.getAttribute("id"))?a=E.escapeSelector(a):e.setAttribute("id",a=y)),o=(c=ct(t)).length;o--;)c[o]=(a?"#"+a:":scope")+" "+dt(c[o]);h=c.join(",")}try{return g.apply(n,f.querySelectorAll(h)),n}catch(e){$(t,!0)}finally{a===y&&e.removeAttribute("id")}}}return mt(t.replace(I,"$1"),e,n,r)}function tt(){var t=[];return function n(r,i){return t.push(r+" ")>e.cacheLength&&delete n[t.shift()],n[r+" "]=i}}function et(t){return t[y]=!0,t}function nt(t){var e=l.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function rt(t){return function(e){return T(e,"input")&&e.type===t}}function it(t){return function(e){return(T(e,"input")||T(e,"button"))&&e.type===t}}function ot(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Y(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function st(t){return et((function(e){return e=+e,et((function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))}))}))}function at(t){return t&&void 0!==t.getElementsByTagName&&t}function lt(t){var n,r=t?t.ownerDocument||t:D;return r!=l&&9===r.nodeType&&r.documentElement?(u=(l=r).documentElement,d=!E.isXMLDoc(l),f=u.matches||u.webkitMatchesSelector||u.msMatchesSelector,u.msMatchesSelector&&D!=l&&(n=l.defaultView)&&n.top!==n&&n.addEventListener("unload",X),v.getById=nt((function(t){return u.appendChild(t).id=E.expando,!l.getElementsByName||!l.getElementsByName(E.expando).length})),v.disconnectedMatch=nt((function(t){return f.call(t,"*")})),v.scope=nt((function(){return l.querySelectorAll(":scope")})),v.cssHas=nt((function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),v.getById?(e.filter.ID=function(t){var e=t.replace(G,K);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&d){var n=e.getElementById(t);return n?[n]:[]}}):(e.filter.ID=function(t){var e=t.replace(G,K);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&d){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&d)return e.getElementsByClassName(t)},p=[],nt((function(t){var e;u.appendChild(t).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a>"+"<select id='"+y+"-\r\\' disabled='disabled'>"+"<option selected=''></option></select>",t.querySelectorAll("[selected]").length||p.push("\\["+O+"*(?:value|"+S+")"),t.querySelectorAll("[id~="+y+"-]").length||p.push("~="),t.querySelectorAll("a#"+y+"+*").length||p.push(".#.+[+~]"),t.querySelectorAll(":checked").length||p.push(":checked"),(e=l.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),u.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&p.push(":enabled",":disabled"),(e=l.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||p.push("\\["+O+"*name"+O+"*="+O+"*(?:''|\"\")")})),v.cssHas||p.push(":has"),p=p.length&&new RegExp(p.join("|")),k=function(t,e){if(t===e)return s=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!v.sortDetached&&e.compareDocumentPosition(t)===n?t===l||t.ownerDocument==D&&Z.contains(D,t)?-1:e===l||e.ownerDocument==D&&Z.contains(D,e)?1:i?c.call(i,t)-c.call(i,e):0:4&n?-1:1)},l):l}for(t in Z.matches=function(t,e){return Z(t,null,null,e)},Z.matchesSelector=function(t,e){if(lt(t),d&&!$[e+" "]&&(!p||!p.test(e)))try{var n=f.call(t,e);if(n||v.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){$(e,!0)}return Z(e,l,null,[t]).length>0},Z.contains=function(t,e){return(t.ownerDocument||t)!=l&&lt(t),E.contains(t,e)},Z.attr=function(t,n){(t.ownerDocument||t)!=l&&lt(t);var r=e.attrHandle[n.toLowerCase()],i=r&&h.call(e.attrHandle,n.toLowerCase())?r(t,n,!d):void 0;return void 0!==i?i:t.getAttribute(n)},Z.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},E.uniqueSort=function(t){var e,n=[],r=0,o=0;if(s=!v.sortStable,i=!v.sortStable&&a.call(t,0),C.call(t,k),s){for(;e=t[o++];)e===t[o]&&(r=n.push(o));for(;r--;)j.call(t,n[r],1)}return i=null,t},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(a.apply(this)))},e=E.expr={cacheLength:50,createPseudo:et,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(G,K),t[3]=(t[3]||t[4]||t[5]||"").replace(G,K),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Z.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Z.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return z.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&F.test(n)&&(e=ct(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(G,K).toLowerCase();return"*"===t?function(){return!0}:function(t){return T(t,e)}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+O+")"+t+"("+O+"|$)"))&&x(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=Z.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(H," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var u,c,d,p,h,f=o!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),b=!l&&!a,x=!1;if(g){if(o){for(;f;){for(d=e;d=d[f];)if(a?T(d,v):1===d.nodeType)return!1;h=f="only"===t&&!h&&"nextSibling"}return!0}if(h=[s?g.firstChild:g.lastChild],s&&b){for(x=(p=(u=(c=g[y]||(g[y]={}))[t]||[])[0]===m&&u[1])&&u[2],d=p&&g.childNodes[p];d=++p&&d&&d[f]||(x=p=0)||h.pop();)if(1===d.nodeType&&++x&&d===e){c[t]=[m,p,x];break}}else if(b&&(x=p=(u=(c=e[y]||(e[y]={}))[t]||[])[0]===m&&u[1]),!1===x)for(;(d=++p&&d&&d[f]||(x=p=0)||h.pop())&&(!(a?T(d,v):1===d.nodeType)||!++x||(b&&((c=d[y]||(d[y]={}))[t]=[m,x]),d!==e)););return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(t,n){var r,i=e.pseudos[t]||e.setFilters[t.toLowerCase()]||Z.error("unsupported pseudo: "+t);return i[y]?i(n):i.length>1?(r=[t,t,"",n],e.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,e){for(var r,o=i(t,n),s=o.length;s--;)t[r=c.call(t,o[s])]=!(e[r]=o[s])})):function(t){return i(t,0,r)}):i}},pseudos:{not:et((function(t){var e=[],n=[],r=yt(t.replace(I,"$1"));return r[y]?et((function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:et((function(t){return function(e){return Z(t,e).length>0}})),contains:et((function(t){return t=t.replace(G,K),function(e){return(e.textContent||E.text(e)).indexOf(t)>-1}})),lang:et((function(t){return B.test(t||"")||Z.error("unsupported lang: "+t),t=t.replace(G,K).toLowerCase(),function(e){var n;do{if(n=d?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=r.location&&r.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===u},focus:function(t){return t===function(){try{return l.activeElement}catch(t){}}()&&l.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ot(!1),disabled:ot(!0),checked:function(t){return T(t,"input")&&!!t.checked||T(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return V.test(t.nodeName)},input:function(t){return W.test(t.nodeName)},button:function(t){return T(t,"input")&&"button"===t.type||T(t,"button")},text:function(t){var e;return T(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:st((function(){return[0]})),last:st((function(t,e){return[e-1]})),eq:st((function(t,e,n){return[n<0?n+e:n]})),even:st((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:st((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:st((function(t,e,n){var r;for(r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t})),gt:st((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=rt(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=it(t);function ut(){}function ct(t,n){var r,i,o,s,a,l,u,c=_[t+" "];if(c)return n?0:c.slice(0);for(a=t,l=[],u=e.preFilter;a;){for(s in r&&!(i=L.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(o=[])),r=!1,(i=q.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(I," ")}),a=a.slice(r.length)),e.filter)!(i=z[s].exec(a))||u[s]&&!(i=u[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?Z.error(t):_(t,l).slice(0)}function dt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function pt(t,e,n){var r=e.dir,i=e.next,o=i||r,s=n&&"parentNode"===o,a=b++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||s)return t(e,n,i);return!1}:function(e,n,l){var u,c,d=[m,a];if(l){for(;e=e[r];)if((1===e.nodeType||s)&&t(e,n,l))return!0}else for(;e=e[r];)if(1===e.nodeType||s)if(c=e[y]||(e[y]={}),i&&T(e,i))e=e[r]||e;else{if((u=c[o])&&u[0]===m&&u[1]===a)return d[2]=u[2];if(c[o]=d,d[2]=t(e,n,l))return!0}return!1}}function ht(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function ft(t,e,n,r,i){for(var o,s=[],a=0,l=t.length,u=null!=e;a<l;a++)(o=t[a])&&(n&&!n(o,r,i)||(s.push(o),u&&e.push(a)));return s}function gt(t,e,n,r,i,o){return r&&!r[y]&&(r=gt(r)),i&&!i[y]&&(i=gt(i,o)),et((function(o,s,a,l){var u,d,p,h,f=[],v=[],y=s.length,m=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)Z(t,e[r],n);return n}(e||"*",a.nodeType?[a]:a,[]),b=!t||!o&&e?m:ft(m,f,t,a,l);if(n?n(b,h=i||(o?t:y||r)?[]:s,a,l):h=b,r)for(u=ft(h,v),r(u,[],a,l),d=u.length;d--;)(p=u[d])&&(h[v[d]]=!(b[v[d]]=p));if(o){if(i||t){if(i){for(u=[],d=h.length;d--;)(p=h[d])&&u.push(b[d]=p);i(null,h=[],u,l)}for(d=h.length;d--;)(p=h[d])&&(u=i?c.call(o,p):f[d])>-1&&(o[u]=!(s[u]=p))}}else h=ft(h===s?h.splice(y,h.length):h),i?i(null,s,h,l):g.apply(s,h)}))}function vt(t){for(var r,i,o,s=t.length,a=e.relative[t[0].type],l=a||e.relative[" "],u=a?1:0,d=pt((function(t){return t===r}),l,!0),p=pt((function(t){return c.call(r,t)>-1}),l,!0),h=[function(t,e,i){var o=!a&&(i||e!=n)||((r=e).nodeType?d(t,e,i):p(t,e,i));return r=null,o}];u<s;u++)if(i=e.relative[t[u].type])h=[pt(ht(h),i)];else{if((i=e.filter[t[u].type].apply(null,t[u].matches))[y]){for(o=++u;o<s&&!e.relative[t[o].type];o++);return gt(u>1&&ht(h),u>1&&dt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(I,"$1"),i,u<o&&vt(t.slice(u,o)),o<s&&vt(t=t.slice(o)),o<s&&dt(t))}h.push(i)}return ht(h)}function yt(t,r){var i,o=[],s=[],a=w[t+" "];if(!a){for(r||(r=ct(t)),i=r.length;i--;)(a=vt(r[i]))[y]?o.push(a):s.push(a);a=w(t,function(t,r){var i=r.length>0,o=t.length>0,s=function(s,a,u,c,p){var h,f,v,y=0,b="0",x=s&&[],_=[],w=n,$=s||o&&e.find.TAG("*",p),k=m+=null==w?1:Math.random()||.1,S=$.length;for(p&&(n=a==l||a||p);b!==S&&null!=(h=$[b]);b++){if(o&&h){for(f=0,a||h.ownerDocument==l||(lt(h),u=!d);v=t[f++];)if(v(h,a||l,u)){g.call(c,h);break}p&&(m=k)}i&&((h=!v&&h)&&y--,s&&x.push(h))}if(y+=b,i&&b!==y){for(f=0;v=r[f++];)v(x,_,a,u);if(s){if(y>0)for(;b--;)x[b]||_[b]||(_[b]=A.call(c));_=ft(_)}g.apply(c,_),p&&!s&&_.length>0&&y+r.length>1&&E.uniqueSort(c)}return p&&(m=k,n=w),x};return i?et(s):s}(s,o)),a.selector=t}return a}function mt(t,n,r,i){var o,s,a,l,u,c="function"==typeof t&&t,p=!i&&ct(t=c.selector||t);if(r=r||[],1===p.length){if((s=p[0]=p[0].slice(0)).length>2&&"ID"===(a=s[0]).type&&9===n.nodeType&&d&&e.relative[s[1].type]){if(!(n=(e.find.ID(a.matches[0].replace(G,K),n)||[])[0]))return r;c&&(n=n.parentNode),t=t.slice(s.shift().value.length)}for(o=z.needsContext.test(t)?0:s.length;o--&&(a=s[o],!e.relative[l=a.type]);)if((u=e.find[l])&&(i=u(a.matches[0].replace(G,K),J.test(s[0].type)&&at(n.parentNode)||n))){if(s.splice(o,1),!(t=i.length&&dt(s)))return g.apply(r,i),r;break}}return(c||yt(t,p))(i,n,!d,r,!n||J.test(t)&&at(n.parentNode)||n),r}ut.prototype=e.filters=e.pseudos,e.setFilters=new ut,v.sortStable=y.split("").sort(k).join("")===y,lt(),v.sortDetached=nt((function(t){return 1&t.compareDocumentPosition(l.createElement("fieldset"))})),E.find=Z,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,Z.compile=yt,Z.select=mt,Z.setDocument=lt,Z.tokenize=ct,Z.escape=E.escapeSelector,Z.getText=E.text,Z.isXML=E.isXMLDoc,Z.selectors=E.expr,Z.support=E.support,Z.uniqueSort=E.uniqueSort}();var P=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&E(t).is(n))break;r.push(t)}return r},H=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},L=E.expr.match.needsContext,q=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function U(t,e,n){return y(e)?E.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?E.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?E.grep(t,(function(t){return c.call(e,t)>-1!==n})):E.filter(e,t,n)}E.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?E.find.matchesSelector(r,t)?[r]:[]:E.find.matches(t,E.grep(e,(function(t){return 1===t.nodeType})))},E.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(E(t).filter((function(){for(e=0;e<r;e++)if(E.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)E.find(t,i[e],n);return r>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(U(this,t||[],!1))},not:function(t){return this.pushStack(U(this,t||[],!0))},is:function(t){return!!U(this,"string"==typeof t&&L.test(t)?E(t):t||[],!1).length}});var F,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||F,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:B.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),q.test(r[1])&&E.isPlainObject(e))for(r in e)y(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this)}).prototype=E.fn,F=E(b);var z=/^(?:parents|prev(?:Until|All))/,W={children:!0,contents:!0,next:!0,prev:!0};function V(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],s="string"!=typeof t&&E(t);if(!L.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?E.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?c.call(E(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return P(t,"parentNode")},parentsUntil:function(t,e,n){return P(t,"parentNode",n)},next:function(t){return V(t,"nextSibling")},prev:function(t){return V(t,"previousSibling")},nextAll:function(t){return P(t,"nextSibling")},prevAll:function(t){return P(t,"previousSibling")},nextUntil:function(t,e,n){return P(t,"nextSibling",n)},prevUntil:function(t,e,n){return P(t,"previousSibling",n)},siblings:function(t){return H((t.parentNode||{}).firstChild,t)},children:function(t){return H(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(T(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},(function(t,e){E.fn[t]=function(n,r){var i=E.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=E.filter(r,i)),this.length>1&&(W[t]||E.uniqueSort(i),z.test(t)&&i.reverse()),this.pushStack(i)}}));var Q=/[^\x20\t\r\n\f]+/g;function J(t){return t}function G(t){throw t}function K(t,e,n,r){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(n):t&&y(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}E.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return E.each(t.match(Q)||[],(function(t,n){e[n]=!0})),e}(t):E.extend({},t);var e,n,r,i,o=[],s=[],a=-1,l=function(){for(i=i||t.once,r=e=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!e&&(a=o.length-1,s.push(n)),function e(n){E.each(n,(function(n,r){y(r)?t.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==w(r)&&e(r)}))}(arguments),n&&!e&&l()),this},remove:function(){return E.each(arguments,(function(t,e){for(var n;(n=E.inArray(e,o,n))>-1;)o.splice(n,1),n<=a&&a--})),this},has:function(t){return t?E.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return E.Deferred((function(n){E.each(e,(function(e,r){var i=y(t[r[4]])&&t[r[4]];o[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,i){var o=0;function s(t,e,n,i){return function(){var a=this,l=arguments,u=function(){var r,u;if(!(t<o)){if((r=n.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");u=r&&("object"==typeof r||"function"==typeof r)&&r.then,y(u)?i?u.call(r,s(o,e,J,i),s(o,e,G,i)):(o++,u.call(r,s(o,e,J,i),s(o,e,G,i),s(o,e,J,e.notifyWith))):(n!==J&&(a=void 0,l=[r]),(i||e.resolveWith)(a,l))}},c=i?u:function(){try{u()}catch(r){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(r,c.error),t+1>=o&&(n!==G&&(a=void 0,l=[r]),e.rejectWith(a,l))}};t?c():(E.Deferred.getErrorHook?c.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(c.error=E.Deferred.getStackHook()),r.setTimeout(c))}}return E.Deferred((function(r){e[0][3].add(s(0,r,y(i)?i:J,r.notifyWith)),e[1][3].add(s(0,r,y(t)?t:J)),e[2][3].add(s(0,r,y(n)?n:G))})).promise()},promise:function(t){return null!=t?E.extend(t,i):i}},o={};return E.each(e,(function(t,r){var s=r[2],a=r[5];i[r[1]]=s.add,a&&s.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=s.fireWith})),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=a.call(arguments),o=E.Deferred(),s=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?a.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(K(t,o.done(s(n)).resolve,o.reject,!e),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();for(;n--;)K(i[n],s(n),o.reject);return o.promise()}});var X=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&X.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){r.setTimeout((function(){throw t}))};var Y=E.Deferred();function Z(){b.removeEventListener("DOMContentLoaded",Z),r.removeEventListener("load",Z),E.ready()}E.fn.ready=function(t){return Y.then(t).catch((function(t){E.readyException(t)})),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||Y.resolveWith(b,[E]))}}),E.ready.then=Y.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(E.ready):(b.addEventListener("DOMContentLoaded",Z),r.addEventListener("load",Z));var tt=function(t,e,n,r,i,o,s){var a=0,l=t.length,u=null==n;if("object"===w(n))for(a in i=!0,n)tt(t,e,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,y(r)||(s=!0),u&&(s?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(E(t),n)})),e))for(;a<l;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:u?e.call(t):l?e(t[0],n):o},et=/^-ms-/,nt=/-([a-z])/g;function rt(t,e){return e.toUpperCase()}function it(t){return t.replace(et,"ms-").replace(nt,rt)}var ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function st(){this.expando=E.expando+st.uid++}st.uid=1,st.prototype={cache:function(t){var e=t[this.expando];return e||(e={},ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[it(e)]=n;else for(r in e)i[it(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][it(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(it):(e=it(e))in r?[e]:e.match(Q)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||E.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var at=new st,lt=new st,ut=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ct=/[A-Z]/g;function dt(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(ct,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:ut.test(t)?JSON.parse(t):t)}(n)}catch(t){}lt.set(t,e,n)}else n=void 0;return n}E.extend({hasData:function(t){return lt.hasData(t)||at.hasData(t)},data:function(t,e,n){return lt.access(t,e,n)},removeData:function(t,e){lt.remove(t,e)},_data:function(t,e,n){return at.access(t,e,n)},_removeData:function(t,e){at.remove(t,e)}}),E.fn.extend({data:function(t,e){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=lt.get(o),1===o.nodeType&&!at.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=it(r.slice(5)),dt(o,r,i[r]));at.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){lt.set(this,t)})):tt(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=lt.get(o,t))||void 0!==(n=dt(o,t))?n:void 0;this.each((function(){lt.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){lt.remove(this,t)}))}}),E.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=at.get(t,e),n&&(!r||Array.isArray(n)?r=at.access(t,e,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),r=n.length,i=n.shift(),o=E._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){E.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return at.get(t,n)||at.access(t,n,{empty:E.Callbacks("once memory").add((function(){at.remove(t,[e+"queue",n])}))})}}),E.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?E.queue(this[0],t):void 0===e?this:this.each((function(){var n=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&E.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){E.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=E.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=at.get(o[s],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(e)}});var pt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ht=new RegExp("^(?:([+-])=|)("+pt+")([a-z%]*)$","i"),ft=["Top","Right","Bottom","Left"],gt=b.documentElement,vt=function(t){return E.contains(t.ownerDocument,t)},yt={composed:!0};gt.getRootNode&&(vt=function(t){return E.contains(t.ownerDocument,t)||t.getRootNode(yt)===t.ownerDocument});var mt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&vt(t)&&"none"===E.css(t,"display")};function bt(t,e,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return E.css(t,e,"")},l=a(),u=n&&n[3]||(E.cssNumber[e]?"":"px"),c=t.nodeType&&(E.cssNumber[e]||"px"!==u&&+l)&&ht.exec(E.css(t,e));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;s--;)E.style(t,e,c+u),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),c/=o;c*=2,E.style(t,e,c+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var xt={};function _t(t){var e,n=t.ownerDocument,r=t.nodeName,i=xt[r];return i||(e=n.body.appendChild(n.createElement(r)),i=E.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),xt[r]=i,i)}function wt(t,e){for(var n,r,i=[],o=0,s=t.length;o<s;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=at.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&mt(r)&&(i[o]=_t(r))):"none"!==n&&(i[o]="none",at.set(r,"display",n)));for(o=0;o<s;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}E.fn.extend({show:function(){return wt(this,!0)},hide:function(){return wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){mt(this)?E(this).show():E(this).hide()}))}});var $t,kt,Et=/^(?:checkbox|radio)$/i,St=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Tt=/^$|^module$|\/(?:java|ecma)script/i;$t=b.createDocumentFragment().appendChild(b.createElement("div")),(kt=b.createElement("input")).setAttribute("type","radio"),kt.setAttribute("checked","checked"),kt.setAttribute("name","t"),$t.appendChild(kt),v.checkClone=$t.cloneNode(!0).cloneNode(!0).lastChild.checked,$t.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!$t.cloneNode(!0).lastChild.defaultValue,$t.innerHTML="<option></option>",v.option=!!$t.lastChild;var At={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ct(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&T(t,e)?E.merge([t],n):n}function jt(t,e){for(var n=0,r=t.length;n<r;n++)at.set(t[n],"globalEval",!e||at.get(e[n],"globalEval"))}At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,v.option||(At.optgroup=At.option=[1,"<select multiple='multiple'>","</select>"]);var Ot=/<|&#?\w+;/;function It(t,e,n,r,i){for(var o,s,a,l,u,c,d=e.createDocumentFragment(),p=[],h=0,f=t.length;h<f;h++)if((o=t[h])||0===o)if("object"===w(o))E.merge(p,o.nodeType?[o]:o);else if(Ot.test(o)){for(s=s||d.appendChild(e.createElement("div")),a=(St.exec(o)||["",""])[1].toLowerCase(),l=At[a]||At._default,s.innerHTML=l[1]+E.htmlPrefilter(o)+l[2],c=l[0];c--;)s=s.lastChild;E.merge(p,s.childNodes),(s=d.firstChild).textContent=""}else p.push(e.createTextNode(o));for(d.textContent="",h=0;o=p[h++];)if(r&&E.inArray(o,r)>-1)i&&i.push(o);else if(u=vt(o),s=Ct(d.appendChild(o),"script"),u&&jt(s),n)for(c=0;o=s[c++];)Tt.test(o.type||"")&&n.push(o);return d}var Nt=/^([^.]*)(?:\.(.+)|)/;function Rt(){return!0}function Dt(){return!1}function Mt(t,e,n,r,i,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(r=r||n,n=void 0),e)Mt(t,a,n,r,e[a],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Dt;else if(!i)return t;return 1===o&&(s=i,i=function(t){return E().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=E.guid++)),t.each((function(){E.event.add(this,e,i,r,n)}))}function Pt(t,e,n){n?(at.set(t,e,!1),E.event.add(t,e,{namespace:!1,handler:function(t){var n,r=at.get(this,e);if(1&t.isTrigger&&this[e]){if(r)(E.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=a.call(arguments),at.set(this,e,r),this[e](),n=at.get(this,e),at.set(this,e,!1),r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else r&&(at.set(this,e,E.event.trigger(r[0],r.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Rt)}})):void 0===at.get(t,e)&&E.event.add(t,e,Rt)}E.event={global:{},add:function(t,e,n,r,i){var o,s,a,l,u,c,d,p,h,f,g,v=at.get(t);if(ot(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&E.find.matchesSelector(gt,i),n.guid||(n.guid=E.guid++),(l=v.events)||(l=v.events=Object.create(null)),(s=v.handle)||(s=v.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(Q)||[""]).length;u--;)h=g=(a=Nt.exec(e[u])||[])[1],f=(a[2]||"").split(".").sort(),h&&(d=E.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,d=E.event.special[h]||{},c=E.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&E.expr.match.needsContext.test(i),namespace:f.join(".")},o),(p=l[h])||((p=l[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,r,f,s)||t.addEventListener&&t.addEventListener(h,s)),d.add&&(d.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),E.event.global[h]=!0)},remove:function(t,e,n,r,i){var o,s,a,l,u,c,d,p,h,f,g,v=at.hasData(t)&&at.get(t);if(v&&(l=v.events)){for(u=(e=(e||"").match(Q)||[""]).length;u--;)if(h=g=(a=Nt.exec(e[u])||[])[1],f=(a[2]||"").split(".").sort(),h){for(d=E.event.special[h]||{},p=l[h=(r?d.delegateType:d.bindType)||h]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,d.remove&&d.remove.call(t,c));s&&!p.length&&(d.teardown&&!1!==d.teardown.call(t,f,v.handle)||E.removeEvent(t,h,v.handle),delete l[h])}else for(h in l)E.event.remove(t,h+e[u],n,r,!0);E.isEmptyObject(l)&&at.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,s,a=new Array(arguments.length),l=E.event.fix(t),u=(at.get(this,"events")||Object.create(null))[l.type]||[],c=E.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(s=E.event.handlers.call(this,l,u),e=0;(i=s[e++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((E.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,r,i,o,s,a=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&t.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],s={},n=0;n<l;n++)void 0===s[i=(r=e[n]).selector+" "]&&(s[i]=r.needsContext?E(i,this).index(u)>-1:E.find(i,this,null,[u]).length),s[i]&&o.push(r);o.length&&a.push({elem:u,handlers:o})}return u=this,l<e.length&&a.push({elem:u,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Et.test(e.type)&&e.click&&T(e,"input")&&Pt(e,"click",!0),!1},trigger:function(t){var e=this||t;return Et.test(e.type)&&e.click&&T(e,"input")&&Pt(e,"click"),!0},_default:function(t){var e=t.target;return Et.test(e.type)&&e.click&&T(e,"input")&&at.get(e,"click")||T(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Rt:Dt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Dt,isPropagationStopped:Dt,isImmediatePropagationStopped:Dt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Rt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Rt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Rt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(t,e){function n(t){if(b.documentMode){var n=at.get(this,"handle"),r=E.event.fix(t);r.type="focusin"===t.type?"focus":"blur",r.isSimulated=!0,n(t),r.target===r.currentTarget&&n(r)}else E.event.simulate(e,t.target,E.event.fix(t))}E.event.special[t]={setup:function(){var r;if(Pt(this,t,!0),!b.documentMode)return!1;(r=at.get(this,e))||this.addEventListener(e,n),at.set(this,e,(r||0)+1)},trigger:function(){return Pt(this,t),!0},teardown:function(){var t;if(!b.documentMode)return!1;(t=at.get(this,e)-1)?at.set(this,e,t):(this.removeEventListener(e,n),at.remove(this,e))},_default:function(e){return at.get(e.target,t)},delegateType:e},E.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=b.documentMode?this:r,o=at.get(i,e);o||(b.documentMode?this.addEventListener(e,n):r.addEventListener(t,n,!0)),at.set(i,e,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=b.documentMode?this:r,o=at.get(i,e)-1;o?at.set(i,e,o):(b.documentMode?this.removeEventListener(e,n):r.removeEventListener(t,n,!0),at.remove(i,e))}}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||E.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),E.fn.extend({on:function(t,e,n,r){return Mt(this,t,e,n,r)},one:function(t,e,n,r){return Mt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,E(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Dt),this.each((function(){E.event.remove(this,t,n,e)}))}});var Ht=/<script|<style|<link/i,Lt=/checked\s*(?:[^=]|=\s*.checked.)/i,qt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ut(t,e){return T(t,"table")&&T(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function Ft(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Bt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function zt(t,e){var n,r,i,o,s,a;if(1===e.nodeType){if(at.hasData(t)&&(a=at.get(t).events))for(i in at.remove(e,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)E.event.add(e,i,a[i][n]);lt.hasData(t)&&(o=lt.access(t),s=E.extend({},o),lt.set(e,s))}}function Wt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Et.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Vt(t,e,n,r){e=l(e);var i,o,s,a,u,c,d=0,p=t.length,h=p-1,f=e[0],g=y(f);if(g||p>1&&"string"==typeof f&&!v.checkClone&&Lt.test(f))return t.each((function(i){var o=t.eq(i);g&&(e[0]=f.call(this,i,o.html())),Vt(o,e,n,r)}));if(p&&(o=(i=It(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=(s=E.map(Ct(i,"script"),Ft)).length;d<p;d++)u=i,d!==h&&(u=E.clone(u,!0,!0),a&&E.merge(s,Ct(u,"script"))),n.call(t[d],u,d);if(a)for(c=s[s.length-1].ownerDocument,E.map(s,Bt),d=0;d<a;d++)u=s[d],Tt.test(u.type||"")&&!at.access(u,"globalEval")&&E.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?E._evalUrl&&!u.noModule&&E._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):_(u.textContent.replace(qt,""),u,c))}return t}function Qt(t,e,n){for(var r,i=e?E.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||E.cleanData(Ct(r)),r.parentNode&&(n&&vt(r)&&jt(Ct(r,"script")),r.parentNode.removeChild(r));return t}E.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,s,a=t.cloneNode(!0),l=vt(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(s=Ct(a),r=0,i=(o=Ct(t)).length;r<i;r++)Wt(o[r],s[r]);if(e)if(n)for(o=o||Ct(t),s=s||Ct(a),r=0,i=o.length;r<i;r++)zt(o[r],s[r]);else zt(t,a);return(s=Ct(a,"script")).length>0&&jt(s,!l&&Ct(t,"script")),a},cleanData:function(t){for(var e,n,r,i=E.event.special,o=0;void 0!==(n=t[o]);o++)if(ot(n)){if(e=n[at.expando]){if(e.events)for(r in e.events)i[r]?E.event.remove(n,r):E.removeEvent(n,r,e.handle);n[at.expando]=void 0}n[lt.expando]&&(n[lt.expando]=void 0)}}}),E.fn.extend({detach:function(t){return Qt(this,t,!0)},remove:function(t){return Qt(this,t)},text:function(t){return tt(this,(function(t){return void 0===t?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Vt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ut(this,t).appendChild(t)}))},prepend:function(){return Vt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ut(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Vt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Vt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(Ct(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return E.clone(this,t,e)}))},html:function(t){return tt(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ht.test(t)&&!At[(St.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(E.cleanData(Ct(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Vt(this,arguments,(function(e){var n=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(Ct(this)),n&&n.replaceChild(e,this))}),t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){E.fn[t]=function(t){for(var n,r=[],i=E(t),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),E(i[s])[e](n),u.apply(r,n.get());return this.pushStack(r)}}));var Jt=new RegExp("^("+pt+")(?!px)[a-z%]+$","i"),Gt=/^--/,Kt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},Xt=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},Yt=new RegExp(ft.join("|"),"i");function Zt(t,e,n){var r,i,o,s,a=Gt.test(e),l=t.style;return(n=n||Kt(t))&&(s=n.getPropertyValue(e)||n[e],a&&s&&(s=s.replace(I,"$1")||void 0),""!==s||vt(t)||(s=E.style(t,e)),!v.pixelBoxStyles()&&Jt.test(s)&&Yt.test(e)&&(r=l.width,i=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=s,s=n.width,l.width=r,l.minWidth=i,l.maxWidth=o)),void 0!==s?s+"":s}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%",gt.appendChild(u).appendChild(c);var t=r.getComputedStyle(c);n="1%"!==t.top,l=12===e(t.marginLeft),c.style.right="60%",s=36===e(t.right),i=36===e(t.width),c.style.position="absolute",o=12===e(c.offsetWidth/3),gt.removeChild(u),c=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,s,a,l,u=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,E.extend(v,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,i;return null==a&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",gt.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,gt.removeChild(t)),a}}))}();var ee=["Webkit","Moz","ms"],ne=b.createElement("div").style,re={};function ie(t){var e=E.cssProps[t]||re[t];return e||(t in ne?t:re[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}(t)||t)}var oe=/^(none|table(?!-c[ea]).+)/,se={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function le(t,e,n){var r=ht.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function ue(t,e,n,r,i,o){var s="width"===e?1:0,a=0,l=0,u=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=E.css(t,n+ft[s],!0,i)),r?("content"===n&&(l-=E.css(t,"padding"+ft[s],!0,i)),"margin"!==n&&(l-=E.css(t,"border"+ft[s]+"Width",!0,i))):(l+=E.css(t,"padding"+ft[s],!0,i),"padding"!==n?l+=E.css(t,"border"+ft[s]+"Width",!0,i):a+=E.css(t,"border"+ft[s]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-a-.5))||0),l+u}function ce(t,e,n){var r=Kt(t),i=(!v.boxSizingReliable()||n)&&"border-box"===E.css(t,"boxSizing",!1,r),o=i,s=Zt(t,e,r),a="offset"+e[0].toUpperCase()+e.slice(1);if(Jt.test(s)){if(!n)return s;s="auto"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&T(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===E.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===E.css(t,"boxSizing",!1,r),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+ue(t,e,n||(i?"border":"content"),o,r,s)+"px"}function de(t,e,n,r,i){return new de.prototype.init(t,e,n,r,i)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Zt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=it(e),l=Gt.test(e),u=t.style;if(l||(e=ie(a)),s=E.cssHooks[e]||E.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:u[e];"string"===(o=typeof n)&&(i=ht.exec(n))&&i[1]&&(n=bt(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(E.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,r){var i,o,s,a=it(e);return Gt.test(e)||(e=ie(a)),(s=E.cssHooks[e]||E.cssHooks[a])&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=Zt(t,e,r)),"normal"===i&&e in ae&&(i=ae[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),E.each(["height","width"],(function(t,e){E.cssHooks[e]={get:function(t,n,r){if(n)return!oe.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ce(t,e,r):Xt(t,se,(function(){return ce(t,e,r)}))},set:function(t,n,r){var i,o=Kt(t),s=!v.scrollboxSize()&&"absolute"===o.position,a=(s||r)&&"border-box"===E.css(t,"boxSizing",!1,o),l=r?ue(t,e,r,a,o):0;return a&&s&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-ue(t,e,"border",!1,o)-.5)),l&&(i=ht.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=E.css(t,e)),le(0,n,l)}}})),E.cssHooks.marginLeft=te(v.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Zt(t,"marginLeft"))||t.getBoundingClientRect().left-Xt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(t,e){E.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+ft[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(E.cssHooks[t+e].set=le)})),E.fn.extend({css:function(t,e){return tt(this,(function(t,e,n){var r,i,o={},s=0;if(Array.isArray(e)){for(r=Kt(t),i=e.length;s<i;s++)o[e[s]]=E.css(t,e[s],!1,r);return o}return void 0!==n?E.style(t,e,n):E.css(t,e)}),t,e,arguments.length>1)}}),E.Tween=de,de.prototype={constructor:de,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(E.cssNumber[n]?"":"px")},cur:function(){var t=de.propHooks[this.prop];return t&&t.get?t.get(this):de.propHooks._default.get(this)},run:function(t){var e,n=de.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):de.propHooks._default.set(this),this}},de.prototype.init.prototype=de.prototype,de.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||!E.cssHooks[t.prop]&&null==t.elem.style[ie(t.prop)]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}},de.propHooks.scrollTop=de.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=de.prototype.init,E.fx.step={};var pe,he,fe=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;function ve(){he&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(ve):r.setTimeout(ve,E.fx.interval),E.fx.tick())}function ye(){return r.setTimeout((function(){pe=void 0})),pe=Date.now()}function me(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=ft[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function be(t,e,n){for(var r,i=(xe.tweeners[e]||[]).concat(xe.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,e,t))return r}function xe(t,e,n){var r,i,o=0,s=xe.prefilters.length,a=E.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var e=pe||ye(),n=Math.max(0,u.startTime+u.duration-e),r=1-(n/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(r);return a.notifyWith(t,[u,r,n]),r<1&&s?n:(s||a.notifyWith(t,[u,1,0]),a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:pe||ye(),duration:n.duration,tweens:[],createTween:function(e,n){var r=E.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(r),r},stop:function(e){var n=0,r=e?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return e?(a.notifyWith(t,[u,1,0]),a.resolveWith(t,[u,e])):a.rejectWith(t,[u,e]),this}}),c=u.props;for(!function(t,e){var n,r,i,o,s;for(n in t)if(i=e[r=it(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(s=E.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(c,u.opts.specialEasing);o<s;o++)if(r=xe.prefilters[o].call(u,t,c,u.opts))return y(r.stop)&&(E._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return E.map(c,be,u),y(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),E.fx.timer(E.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}E.Animation=E.extend(xe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return bt(n.elem,t,ht.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(Q);for(var n,r=0,i=t.length;r<i;r++)n=t[r],xe.tweeners[n]=xe.tweeners[n]||[],xe.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,s,a,l,u,c,d="width"in e||"height"in e,p=this,h={},f=t.style,g=t.nodeType&&mt(t),v=at.get(t,"fxshow");for(r in n.queue||(null==(s=E._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,p.always((function(){p.always((function(){s.unqueued--,E.queue(t,"fx").length||s.empty.fire()}))}))),e)if(i=e[r],fe.test(i)){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}h[r]=v&&v[r]||E.style(t,r)}if((l=!E.isEmptyObject(e))||!E.isEmptyObject(h))for(r in d&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=v&&v.display)&&(u=at.get(t,"display")),"none"===(c=E.css(t,"display"))&&(u?c=u:(wt([t],!0),u=t.style.display||u,c=E.css(t,"display"),wt([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===E.css(t,"float")&&(l||(p.done((function(){f.display=u})),null==u&&(c=f.display,u="none"===c?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",p.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),l=!1,h)l||(v?"hidden"in v&&(g=v.hidden):v=at.access(t,"fxshow",{display:u}),o&&(v.hidden=!g),g&&wt([t],!0),p.done((function(){for(r in g||wt([t]),at.remove(t,"fxshow"),h)E.style(t,r,h[r])}))),l=be(g?v[r]:0,r,p),r in v||(v[r]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?xe.prefilters.unshift(t):xe.prefilters.push(t)}}),E.speed=function(t,e,n){var r=t&&"object"==typeof t?E.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return E.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in E.fx.speeds?r.duration=E.fx.speeds[r.duration]:r.duration=E.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&E.dequeue(this,r.queue)},r},E.fn.extend({fadeTo:function(t,e,n,r){return this.filter(mt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=E.isEmptyObject(t),o=E.speed(e,n,r),s=function(){var e=xe(this,E.extend({},t),o);(i||at.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=E.timers,s=at.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&ge.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||E.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=at.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=E.timers,s=r?r.length:0;for(n.finish=!0,E.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(t,e){var n=E.fn[e];E.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(me(e,!0),t,r,i)}})),E.each({slideDown:me("show"),slideUp:me("hide"),slideToggle:me("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){E.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(pe=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),pe=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){he||(he=!0,ve())},E.fx.stop=function(){he=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}}))},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var _e,we=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return tt(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){E.removeAttr(this,t)}))}}),E.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?E.prop(t,e,n):(1===o&&E.isXMLDoc(t)||(i=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?_e:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=E.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&T(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(Q);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),_e={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=we[e]||E.find.attr;we[e]=function(t,e,r){var i,o,s=e.toLowerCase();return r||(o=we[s],we[s]=i,i=null!=n(t,e,r)?s:null,we[s]=o),i}}));var $e=/^(?:input|select|textarea|button)$/i,ke=/^(?:a|area)$/i;function Ee(t){return(t.match(Q)||[]).join(" ")}function Se(t){return t.getAttribute&&t.getAttribute("class")||""}function Te(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(Q)||[]}E.fn.extend({prop:function(t,e){return tt(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[E.propFix[t]||t]}))}}),E.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(t)||(e=E.propFix[e]||e,i=E.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):$e.test(t.nodeName)||ke.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(t){var e,n,r,i,o,s;return y(t)?this.each((function(e){E(this).addClass(t.call(this,e,Se(this)))})):(e=Te(t)).length?this.each((function(){if(r=Se(this),n=1===this.nodeType&&" "+Ee(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");s=Ee(n),r!==s&&this.setAttribute("class",s)}})):this},removeClass:function(t){var e,n,r,i,o,s;return y(t)?this.each((function(e){E(this).removeClass(t.call(this,e,Se(this)))})):arguments.length?(e=Te(t)).length?this.each((function(){if(r=Se(this),n=1===this.nodeType&&" "+Ee(r)+" "){for(o=0;o<e.length;o++)for(i=e[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");s=Ee(n),r!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(t,e){var n,r,i,o,s=typeof t,a="string"===s||Array.isArray(t);return y(t)?this.each((function(n){E(this).toggleClass(t.call(this,n,Se(this),e),e)})):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(n=Te(t),this.each((function(){if(a)for(o=E(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==s||((r=Se(this))&&at.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":at.get(this,"__className__")||""))})))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+Ee(Se(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ae=/\r/g;E.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=y(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,E(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=E.map(i,(function(t){return null==t?"":t+""}))),(e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=E.valHooks[i.type]||E.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Ae,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:Ee(E.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?o+1:i.length;for(r=o<0?l:s?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!T(n.parentNode,"optgroup"))){if(e=E(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=E.makeArray(e),s=i.length;s--;)((r=i[s]).selected=E.inArray(E.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},v.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Ce=r.location,je={guid:Date.now()},Oe=/\?/;E.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Ie=/^(?:focusinfocus|focusoutblur)$/,Ne=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,n,i){var o,s,a,l,u,c,d,p,f=[n||b],g=h.call(t,"type")?t.type:t,v=h.call(t,"namespace")?t.namespace.split("."):[];if(s=p=a=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!Ie.test(g+E.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),u=g.indexOf(":")<0&&"on"+g,(t=t[E.expando]?t:new E.Event(g,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:E.makeArray(e,[t]),d=E.event.special[g]||{},i||!d.trigger||!1!==d.trigger.apply(n,e))){if(!i&&!d.noBubble&&!m(n)){for(l=d.delegateType||g,Ie.test(l+g)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(n.ownerDocument||b)&&f.push(a.defaultView||a.parentWindow||r)}for(o=0;(s=f[o++])&&!t.isPropagationStopped();)p=s,t.type=o>1?l:d.bindType||g,(c=(at.get(s,"events")||Object.create(null))[t.type]&&at.get(s,"handle"))&&c.apply(s,e),(c=u&&s[u])&&c.apply&&ot(s)&&(t.result=c.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,i||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),e)||!ot(n)||u&&y(n[g])&&!m(n)&&((a=n[u])&&(n[u]=null),E.event.triggered=g,t.isPropagationStopped()&&p.addEventListener(g,Ne),n[g](),t.isPropagationStopped()&&p.removeEventListener(g,Ne),E.event.triggered=void 0,a&&(n[u]=a)),t.result}},simulate:function(t,e,n){var r=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(r,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each((function(){E.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}});var Re=/\[\]$/,De=/\r?\n/g,Me=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;function He(t,e,n,r){var i;if(Array.isArray(e))E.each(e,(function(e,i){n||Re.test(t)?r(t,i):He(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==w(e))r(t,e);else for(i in e)He(t+"["+i+"]",e[i],n,r)}E.param=function(t,e){var n,r=[],i=function(t,e){var n=y(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,(function(){i(this.name,this.value)}));else for(n in t)He(n,t[n],e,i);return r.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&Pe.test(this.nodeName)&&!Me.test(t)&&(this.checked||!Et.test(t))})).map((function(t,e){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(t){return{name:e.name,value:t.replace(De,"\r\n")}})):{name:e.name,value:n.replace(De,"\r\n")}})).get()}});var Le=/%20/g,qe=/#.*$/,Ue=/([?&])_=[^&]*/,Fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Be=/^(?:GET|HEAD)$/,ze=/^\/\//,We={},Ve={},Qe="*/".concat("*"),Je=b.createElement("a");function Ge(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(Q)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ke(t,e,n,r){var i={},o=t===Ve;function s(a){var l;return i[a]=!0,E.each(t[a]||[],(function(t,a){var u=a(e,n,r);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),s(u),!1)})),l}return s(e.dataTypes[0])||!i["*"]&&s("*")}function Xe(t,e){var n,r,i=E.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&E.extend(!0,t,r),t}Je.href=Ce.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Xe(Xe(t,E.ajaxSettings),e):Xe(E.ajaxSettings,t)},ajaxPrefilter:Ge(We),ajaxTransport:Ge(Ve),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,s,a,l,u,c,d,p,h=E.ajaxSetup({},e),f=h.context||h,g=h.context&&(f.nodeType||f.jquery)?E(f):E.event,v=E.Deferred(),y=E.Callbacks("once memory"),m=h.statusCode||{},x={},_={},w="canceled",$={readyState:0,getResponseHeader:function(t){var e;if(u){if(!s)for(s={};e=Fe.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(t,e){return null==u&&(t=_[t.toLowerCase()]=_[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==u&&(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)$.always(t[$.status]);else for(e in t)m[e]=[m[e],t[e]];return this},abort:function(t){var e=t||w;return n&&n.abort(e),k(0,e),this}};if(v.promise($),h.url=((t||h.url||Ce.href)+"").replace(ze,Ce.protocol+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(Q)||[""],null==h.crossDomain){l=b.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Je.protocol+"//"+Je.host!=l.protocol+"//"+l.host}catch(t){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=E.param(h.data,h.traditional)),Ke(We,h,e,$),u)return $;for(d in(c=E.event&&h.global)&&0==E.active++&&E.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Be.test(h.type),i=h.url.replace(qe,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Le,"+")):(p=h.url.slice(i.length),h.data&&(h.processData||"string"==typeof h.data)&&(i+=(Oe.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(i=i.replace(Ue,"$1"),p=(Oe.test(i)?"&":"?")+"_="+je.guid+++p),h.url=i+p),h.ifModified&&(E.lastModified[i]&&$.setRequestHeader("If-Modified-Since",E.lastModified[i]),E.etag[i]&&$.setRequestHeader("If-None-Match",E.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||e.contentType)&&$.setRequestHeader("Content-Type",h.contentType),$.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Qe+"; q=0.01":""):h.accepts["*"]),h.headers)$.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(f,$,h)||u))return $.abort();if(w="abort",y.add(h.complete),$.done(h.success),$.fail(h.error),n=Ke(Ve,h,e,$)){if($.readyState=1,c&&g.trigger("ajaxSend",[$,h]),u)return $;h.async&&h.timeout>0&&(a=r.setTimeout((function(){$.abort("timeout")}),h.timeout));try{u=!1,n.send(x,k)}catch(t){if(u)throw t;k(-1,t)}}else k(-1,"No Transport");function k(t,e,s,l){var d,p,b,x,_,w=e;u||(u=!0,a&&r.clearTimeout(a),n=void 0,o=l||"",$.readyState=t>0?4:0,d=t>=200&&t<300||304===t,s&&(x=function(t,e,n){for(var r,i,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),n[o]}(h,$,s)),!d&&E.inArray("script",h.dataTypes)>-1&&E.inArray("json",h.dataTypes)<0&&(h.converters["text script"]=function(){}),x=function(t,e,n,r){var i,o,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(i in u)if((a=i.split(" "))[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[i]:!0!==u[i]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(h,x,$,d),d?(h.ifModified&&((_=$.getResponseHeader("Last-Modified"))&&(E.lastModified[i]=_),(_=$.getResponseHeader("etag"))&&(E.etag[i]=_)),204===t||"HEAD"===h.type?w="nocontent":304===t?w="notmodified":(w=x.state,p=x.data,d=!(b=x.error))):(b=w,!t&&w||(w="error",t<0&&(t=0))),$.status=t,$.statusText=(e||w)+"",d?v.resolveWith(f,[p,w,$]):v.rejectWith(f,[$,w,b]),$.statusCode(m),m=void 0,c&&g.trigger(d?"ajaxSuccess":"ajaxError",[$,h,d?p:b]),y.fireWith(f,[$,w]),c&&(g.trigger("ajaxComplete",[$,h]),--E.active||E.event.trigger("ajaxStop")))}return $},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],(function(t,e){E[e]=function(t,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),E.ajax(E.extend({url:t,type:e,dataType:i,data:n,success:r},E.isPlainObject(t)&&t))}})),E.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),E._evalUrl=function(t,e,n){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){E.globalEval(t,e,n)}})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return y(t)?this.each((function(e){E(this).wrapInner(t.call(this,e))})):this.each((function(){var e=E(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=y(t);return this.each((function(n){E(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var Ye={0:200,1223:204},Ze=E.ajaxSettings.xhr();v.cors=!!Ze&&"withCredentials"in Ze,v.ajax=Ze=!!Ze,E.ajaxTransport((function(t){var e,n;if(v.cors||Ze&&!t.crossDomain)return{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ye[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),E.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),E.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=E("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}}));var tn,en=[],nn=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||E.expando+"_"+je.guid++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",(function(t,e,n){var i,o,s,a=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(nn,"$1"+i):!1!==t.jsonp&&(t.url+=(Oe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||E.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){s=arguments},n.always((function(){void 0===o?E(r).removeProp(i):r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,en.push(i)),s&&y(o)&&o(s[0]),s=o=void 0})),"script"})),v.createHTMLDocument=((tn=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),E.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((r=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(r)):e=b),o=!n&&[],(i=q.exec(t))?[e.createElement(i[1])]:(i=It([t],e,o),o&&o.length&&E(o).remove(),E.merge([],i.childNodes)));var r,i,o},E.fn.load=function(t,e,n){var r,i,o,s=this,a=t.indexOf(" ");return a>-1&&(r=Ee(t.slice(a)),t=t.slice(0,a)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&E.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,s.html(r?E("<div>").append(E.parseHTML(t)).find(r):t)})).always(n&&function(t,e){s.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},E.expr.pseudos.animated=function(t){return E.grep(E.timers,(function(e){return t===e.elem})).length},E.offset={setOffset:function(t,e,n){var r,i,o,s,a,l,u=E.css(t,"position"),c=E(t),d={};"static"===u&&(t.style.position="relative"),a=c.offset(),o=E.css(t,"top"),l=E.css(t,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(s=(r=c.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(l)||0),y(e)&&(e=e.call(t,n,E.extend({},a))),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+i),"using"in e?e.using.call(t,d):c.css(d)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){E.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===E.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===E.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=E(t).offset()).top+=E.css(t,"borderTopWidth",!0),i.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-E.css(r,"marginTop",!0),left:e.left-i.left-E.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||gt}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;E.fn[t]=function(r){return tt(this,(function(t,r,i){var o;if(m(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),E.each(["top","left"],(function(t,e){E.cssHooks[e]=te(v.pixelPosition,(function(t,n){if(n)return n=Zt(t,e),Jt.test(n)?E(t).position()[e]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){E.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return tt(this,(function(e,n,i){var o;return m(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?E.css(e,n,a):E.style(e,n,i,a)}),e,s?i:void 0,s)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){E.fn[e]=function(t){return this.on(e,t)}})),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),E.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),(function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return r=a.call(arguments,2),i=function(){return t.apply(e||this,r.concat(a.call(arguments)))},i.guid=t.guid=t.guid||E.guid++,i},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=T,E.isFunction=y,E.isWindow=m,E.camelCase=it,E.type=w,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},E.trim=function(t){return null==t?"":(t+"").replace(rn,"$1")},1&&(void 0===(n=function(){return E}.apply(e,[]))||(t.exports=n));var on=r.jQuery,sn=r.$;return E.noConflict=function(t){return r.$===E&&(r.$=sn),t&&r.jQuery===E&&(r.jQuery=on),E},void 0===i&&(r.jQuery=r.$=E),E}))},405:(t,e,n)=>{"use strict";n.r(e),n.d(e,{VERSION:()=>i,after:()=>De,all:()=>en,allKeys:()=>vt,any:()=>nn,assign:()=>Dt,before:()=>Me,bind:()=>$e,bindAll:()=>Se,chain:()=>be,chunk:()=>Ln,clone:()=>Lt,collect:()=>Ge,compact:()=>An,compose:()=>Re,constant:()=>Y,contains:()=>rn,countBy:()=>mn,create:()=>Ht,debounce:()=>Oe,default:()=>zn,defaults:()=>Mt,defer:()=>Ce,delay:()=>Ae,detect:()=>Ve,difference:()=>jn,drop:()=>Sn,each:()=>Je,escape:()=>ae,every:()=>en,extend:()=>Rt,extendOwn:()=>Dt,filter:()=>Ze,find:()=>Ve,findIndex:()=>qe,findKey:()=>He,findLastIndex:()=>Ue,findWhere:()=>Qe,first:()=>En,flatten:()=>Cn,foldl:()=>Xe,foldr:()=>Ye,forEach:()=>Je,functions:()=>It,get:()=>zt,groupBy:()=>vn,has:()=>Wt,head:()=>En,identity:()=>Vt,include:()=>rn,includes:()=>rn,indexBy:()=>yn,indexOf:()=>ze,initial:()=>kn,inject:()=>Xe,intersection:()=>Rn,invert:()=>Ot,invoke:()=>on,isArguments:()=>G,isArray:()=>V,isArrayBuffer:()=>P,isBoolean:()=>A,isDataView:()=>W,isDate:()=>N,isElement:()=>C,isEmpty:()=>lt,isEqual:()=>gt,isError:()=>D,isFinite:()=>K,isFunction:()=>q,isMap:()=>Et,isMatch:()=>ut,isNaN:()=>X,isNull:()=>S,isNumber:()=>I,isObject:()=>E,isRegExp:()=>R,isSet:()=>Tt,isString:()=>O,isSymbol:()=>M,isTypedArray:()=>it,isUndefined:()=>T,isWeakMap:()=>St,isWeakSet:()=>At,iteratee:()=>Xt,keys:()=>at,last:()=>Tn,lastIndexOf:()=>We,map:()=>Ge,mapObject:()=>Zt,matcher:()=>Qt,matches:()=>Qt,max:()=>ln,memoize:()=>Te,methods:()=>It,min:()=>un,mixin:()=>Un,negate:()=>Ne,noop:()=>te,now:()=>ie,object:()=>Pn,omit:()=>$n,once:()=>Pe,pairs:()=>jt,partial:()=>we,partition:()=>bn,pick:()=>wn,pluck:()=>sn,property:()=>Jt,propertyOf:()=>ee,random:()=>re,range:()=>Hn,reduce:()=>Xe,reduceRight:()=>Ye,reject:()=>tn,rest:()=>Sn,restArguments:()=>k,result:()=>ve,sample:()=>pn,select:()=>Ze,shuffle:()=>hn,size:()=>xn,some:()=>nn,sortBy:()=>fn,sortedIndex:()=>Fe,tail:()=>Sn,take:()=>En,tap:()=>qt,template:()=>ge,templateSettings:()=>ue,throttle:()=>je,times:()=>ne,toArray:()=>dn,toPath:()=>Ut,transpose:()=>Dn,unescape:()=>le,union:()=>Nn,uniq:()=>In,unique:()=>In,uniqueId:()=>me,unzip:()=>Dn,values:()=>Ct,where:()=>an,without:()=>On,wrap:()=>Ie,zip:()=>Mn});var r={};n.r(r),n.d(r,{VERSION:()=>i,after:()=>De,all:()=>en,allKeys:()=>vt,any:()=>nn,assign:()=>Dt,before:()=>Me,bind:()=>$e,bindAll:()=>Se,chain:()=>be,chunk:()=>Ln,clone:()=>Lt,collect:()=>Ge,compact:()=>An,compose:()=>Re,constant:()=>Y,contains:()=>rn,countBy:()=>mn,create:()=>Ht,debounce:()=>Oe,default:()=>Fn,defaults:()=>Mt,defer:()=>Ce,delay:()=>Ae,detect:()=>Ve,difference:()=>jn,drop:()=>Sn,each:()=>Je,escape:()=>ae,every:()=>en,extend:()=>Rt,extendOwn:()=>Dt,filter:()=>Ze,find:()=>Ve,findIndex:()=>qe,findKey:()=>He,findLastIndex:()=>Ue,findWhere:()=>Qe,first:()=>En,flatten:()=>Cn,foldl:()=>Xe,foldr:()=>Ye,forEach:()=>Je,functions:()=>It,get:()=>zt,groupBy:()=>vn,has:()=>Wt,head:()=>En,identity:()=>Vt,include:()=>rn,includes:()=>rn,indexBy:()=>yn,indexOf:()=>ze,initial:()=>kn,inject:()=>Xe,intersection:()=>Rn,invert:()=>Ot,invoke:()=>on,isArguments:()=>G,isArray:()=>V,isArrayBuffer:()=>P,isBoolean:()=>A,isDataView:()=>W,isDate:()=>N,isElement:()=>C,isEmpty:()=>lt,isEqual:()=>gt,isError:()=>D,isFinite:()=>K,isFunction:()=>q,isMap:()=>Et,isMatch:()=>ut,isNaN:()=>X,isNull:()=>S,isNumber:()=>I,isObject:()=>E,isRegExp:()=>R,isSet:()=>Tt,isString:()=>O,isSymbol:()=>M,isTypedArray:()=>it,isUndefined:()=>T,isWeakMap:()=>St,isWeakSet:()=>At,iteratee:()=>Xt,keys:()=>at,last:()=>Tn,lastIndexOf:()=>We,map:()=>Ge,mapObject:()=>Zt,matcher:()=>Qt,matches:()=>Qt,max:()=>ln,memoize:()=>Te,methods:()=>It,min:()=>un,mixin:()=>Un,negate:()=>Ne,noop:()=>te,now:()=>ie,object:()=>Pn,omit:()=>$n,once:()=>Pe,pairs:()=>jt,partial:()=>we,partition:()=>bn,pick:()=>wn,pluck:()=>sn,property:()=>Jt,propertyOf:()=>ee,random:()=>re,range:()=>Hn,reduce:()=>Xe,reduceRight:()=>Ye,reject:()=>tn,rest:()=>Sn,restArguments:()=>k,result:()=>ve,sample:()=>pn,select:()=>Ze,shuffle:()=>hn,size:()=>xn,some:()=>nn,sortBy:()=>fn,sortedIndex:()=>Fe,tail:()=>Sn,take:()=>En,tap:()=>qt,template:()=>ge,templateSettings:()=>ue,throttle:()=>je,times:()=>ne,toArray:()=>dn,toPath:()=>Ut,transpose:()=>Dn,unescape:()=>le,union:()=>Nn,uniq:()=>In,unique:()=>In,uniqueId:()=>me,unzip:()=>Dn,values:()=>Ct,where:()=>an,without:()=>On,wrap:()=>Ie,zip:()=>Mn});var i='1.13.6',o='object'==typeof self&&self.self===self&&self||'object'==typeof global&&global.global===global&&global||Function('return this')()||{},s=Array.prototype,a=Object.prototype,l='undefined'!=typeof Symbol?Symbol.prototype:null,u=s.push,c=s.slice,d=a.toString,p=a.hasOwnProperty,h='undefined'!=typeof ArrayBuffer,f='undefined'!=typeof DataView,g=Array.isArray,v=Object.keys,y=Object.create,m=h&&ArrayBuffer.isView,b=isNaN,x=isFinite,_=!{toString:null}.propertyIsEnumerable('toString'),w=['valueOf','isPrototypeOf','toString','propertyIsEnumerable','hasOwnProperty','toLocaleString'],$=Math.pow(2,53)-1;function k(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}}function E(t){var e=typeof t;return'function'===e||'object'===e&&!!t}function S(t){return null===t}function T(t){return void 0===t}function A(t){return!0===t||!1===t||'[object Boolean]'===d.call(t)}function C(t){return!(!t||1!==t.nodeType)}function j(t){var e='[object '+t+']';return function(t){return d.call(t)===e}}const O=j('String'),I=j('Number'),N=j('Date'),R=j('RegExp'),D=j('Error'),M=j('Symbol'),P=j('ArrayBuffer');var H=j('Function'),L=o.document&&o.document.childNodes;1&&'object'!=typeof Int8Array&&'function'!=typeof L&&(H=function(t){return'function'==typeof t||!1});const q=H,U=j('Object');var F=f&&U(new DataView(new ArrayBuffer(8))),B='undefined'!=typeof Map&&U(new Map),z=j('DataView');const W=F?function(t){return null!=t&&q(t.getInt8)&&P(t.buffer)}:z,V=g||j('Array');function Q(t,e){return null!=t&&p.call(t,e)}var J=j('Arguments');!function(){J(arguments)||(J=function(t){return Q(t,'callee')})}();const G=J;function K(t){return!M(t)&&x(t)&&!isNaN(parseFloat(t))}function X(t){return I(t)&&b(t)}function Y(t){return function(){return t}}function Z(t){return function(e){var n=t(e);return'number'==typeof n&&n>=0&&n<=$}}function tt(t){return function(e){return null==e?void 0:e[t]}}const et=tt('byteLength'),nt=Z(et);var rt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const it=h?function(t){return m?m(t)&&!W(t):nt(t)&&rt.test(d.call(t))}:Y(!1),ot=tt('length');function st(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=w.length,r=t.constructor,i=q(r)&&r.prototype||a,o='constructor';for(Q(t,o)&&!e.contains(o)&&e.push(o);n--;)(o=w[n])in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}function at(t){if(!E(t))return[];if(v)return v(t);var e=[];for(var n in t)Q(t,n)&&e.push(n);return _&&st(t,e),e}function lt(t){if(null==t)return!0;var e=ot(t);return'number'==typeof e&&(V(t)||O(t)||G(t))?0===e:0===ot(at(t))}function ut(t,e){var n=at(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0}function ct(t){return t instanceof ct?t:this instanceof ct?void(this._wrapped=t):new ct(t)}function dt(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,et(t))}ct.VERSION=i,ct.prototype.value=function(){return this._wrapped},ct.prototype.valueOf=ct.prototype.toJSON=ct.prototype.value,ct.prototype.toString=function(){return String(this._wrapped)};var pt='[object DataView]';function ht(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return('function'===i||'object'===i||'object'==typeof e)&&ft(t,e,n,r)}function ft(t,e,n,r){t instanceof ct&&(t=t._wrapped),e instanceof ct&&(e=e._wrapped);var i=d.call(t);if(i!==d.call(e))return!1;if(F&&'[object Object]'==i&&W(t)){if(!W(e))return!1;i=pt}switch(i){case'[object RegExp]':case'[object String]':return''+t==''+e;case'[object Number]':return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case'[object Date]':case'[object Boolean]':return+t==+e;case'[object Symbol]':return l.valueOf.call(t)===l.valueOf.call(e);case'[object ArrayBuffer]':case pt:return ft(dt(t),dt(e),n,r)}var o='[object Array]'===i;if(!o&&it(t)){if(et(t)!==et(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;o=!0}if(!o){if('object'!=typeof t||'object'!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(q(s)&&s instanceof s&&q(a)&&a instanceof a)&&'constructor'in t&&'constructor'in e)return!1}r=r||[];for(var u=(n=n||[]).length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if((u=t.length)!==e.length)return!1;for(;u--;)if(!ht(t[u],e[u],n,r))return!1}else{var c,p=at(t);if(u=p.length,at(e).length!==u)return!1;for(;u--;)if(!Q(e,c=p[u])||!ht(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0}function gt(t,e){return ht(t,e)}function vt(t){if(!E(t))return[];var e=[];for(var n in t)e.push(n);return _&&st(t,e),e}function yt(t){var e=ot(t);return function(n){if(null==n)return!1;var r=vt(n);if(ot(r))return!1;for(var i=0;i<e;i++)if(!q(n[t[i]]))return!1;return t!==$t||!q(n[mt])}}var mt='forEach',bt='has',xt=['clear','delete'],_t=['get',bt,'set'],wt=xt.concat(mt,_t),$t=xt.concat(_t),kt=['add'].concat(xt,mt,bt);const Et=B?yt(wt):j('Map'),St=B?yt($t):j('WeakMap'),Tt=B?yt(kt):j('Set'),At=j('WeakSet');function Ct(t){for(var e=at(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function jt(t){for(var e=at(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function Ot(t){for(var e={},n=at(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function It(t){var e=[];for(var n in t)q(t[n])&&e.push(n);return e.sort()}function Nt(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),a=s.length,l=0;l<a;l++){var u=s[l];e&&void 0!==n[u]||(n[u]=o[u])}return n}}const Rt=Nt(vt),Dt=Nt(at),Mt=Nt(vt,!0);function Pt(t){if(!E(t))return{};if(y)return y(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Ht(t,e){var n=Pt(t);return e&&Dt(n,e),n}function Lt(t){return E(t)?V(t)?t.slice():Rt({},t):t}function qt(t,e){return e(t),t}function Ut(t){return V(t)?t:[t]}function Ft(t){return ct.toPath(t)}function Bt(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function zt(t,e,n){var r=Bt(t,Ft(e));return T(r)?n:r}function Wt(t,e){for(var n=(e=Ft(e)).length,r=0;r<n;r++){var i=e[r];if(!Q(t,i))return!1;t=t[i]}return!!n}function Vt(t){return t}function Qt(t){return t=Dt({},t),function(e){return ut(e,t)}}function Jt(t){return t=Ft(t),function(e){return Bt(e,t)}}function Gt(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}}function Kt(t,e,n){return null==t?Vt:q(t)?Gt(t,e,n):E(t)&&!V(t)?Qt(t):Jt(t)}function Xt(t,e){return Kt(t,e,1/0)}function Yt(t,e,n){return ct.iteratee!==Xt?ct.iteratee(t,e):Kt(t,e,n)}function Zt(t,e,n){e=Yt(e,n);for(var r=at(t),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=e(t[a],a,t)}return o}function te(){}function ee(t){return null==t?te:function(e){return zt(t,e)}}function ne(t,e,n){var r=Array(Math.max(0,t));e=Gt(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function re(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}ct.toPath=Ut,ct.iteratee=Xt;const ie=Date.now||function(){return(new Date).getTime()};function oe(t){var e=function(e){return t[e]},n='(?:'+at(t).join('|')+')',r=RegExp(n),i=RegExp(n,'g');return function(t){return t=null==t?'':''+t,r.test(t)?t.replace(i,e):t}}const se={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','`':'&#x60;'},ae=oe(se),le=oe(Ot(se)),ue=ct.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ce=/(.)^/,de={"'":"'",'\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'},pe=/\\|'|\r|\n|\u2028|\u2029/g;function he(t){return'\\'+de[t]}var fe=/^\s*(\w|\$)+\s*$/;function ge(t,e,n){!e&&n&&(e=n),e=Mt({},e,ct.templateSettings);var r=RegExp([(e.escape||ce).source,(e.interpolate||ce).source,(e.evaluate||ce).source].join('|')+'|$','g'),i=0,o="__p+='";t.replace(r,(function(e,n,r,s,a){return o+=t.slice(i,a).replace(pe,he),i=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e})),o+="';\n";var s,a=e.variable;if(a){if(!fe.test(a))throw new Error('variable is not a bare identifier: '+a)}else o='with(obj||{}){\n'+o+'}\n',a='obj';o="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+o+'return __p;\n';try{s=new Function(a,'_',o)}catch(t){throw t.source=o,t}var l=function(t){return s.call(this,t,ct)};return l.source='function('+a+'){\n'+o+'}',l}function ve(t,e,n){var r=(e=Ft(e)).length;if(!r)return q(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=q(o)?o.call(t):o}return t}var ye=0;function me(t){var e=++ye+'';return t?t+e:e}function be(t){var e=ct(t);return e._chain=!0,e}function xe(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=Pt(t.prototype),s=t.apply(o,i);return E(s)?s:o}var _e=k((function(t,e){var n=_e.placeholder,r=function(){for(var i=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return xe(t,r,this,this,s)};return r}));_e.placeholder=ct;const we=_e,$e=k((function(t,e,n){if(!q(t))throw new TypeError('Bind must be called on a function');var r=k((function(i){return xe(t,r,e,this,n.concat(i))}));return r})),ke=Z(ot);function Ee(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var i=r.length,o=0,s=ot(t);o<s;o++){var a=t[o];if(ke(a)&&(V(a)||G(a)))if(e>1)Ee(a,e-1,n,r),i=r.length;else for(var l=0,u=a.length;l<u;)r[i++]=a[l++];else n||(r[i++]=a)}return r}const Se=k((function(t,e){var n=(e=Ee(e,!1,!1)).length;if(n<1)throw new Error('bindAll must be passed function names');for(;n--;){var r=e[n];t[r]=$e(t[r],t)}return t}));function Te(t,e){var n=function(r){var i=n.cache,o=''+(e?e.apply(this,arguments):r);return Q(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n}const Ae=k((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),Ce=we(Ae,ct,1);function je(t,e,n){var r,i,o,s,a=0;n||(n={});var l=function(){a=!1===n.leading?0:ie(),r=null,s=t.apply(i,o),r||(i=o=null)},u=function(){var u=ie();a||!1!==n.leading||(a=u);var c=e-(u-a);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),a=u,s=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,c)),s};return u.cancel=function(){clearTimeout(r),a=0,r=i=o=null},u}function Oe(t,e,n){var r,i,o,s,a,l=function(){var u=ie()-i;e>u?r=setTimeout(l,e-u):(r=null,n||(s=t.apply(a,o)),r||(o=a=null))},u=k((function(u){return a=this,o=u,i=ie(),r||(r=setTimeout(l,e),n&&(s=t.apply(a,o))),s}));return u.cancel=function(){clearTimeout(r),r=o=a=null},u}function Ie(t,e){return we(e,t)}function Ne(t){return function(){return!t.apply(this,arguments)}}function Re(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function De(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Me(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Pe=we(Me,2);function He(t,e,n){e=Yt(e,n);for(var r,i=at(t),o=0,s=i.length;o<s;o++)if(e(t[r=i[o]],r,t))return r}function Le(t){return function(e,n,r){n=Yt(n,r);for(var i=ot(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}const qe=Le(1),Ue=Le(-1);function Fe(t,e,n,r){for(var i=(n=Yt(n,r,1))(e),o=0,s=ot(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o}function Be(t,e,n){return function(r,i,o){var s=0,a=ot(r);if('number'==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(c.call(r,s,a),X))>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(r[o]===i)return o;return-1}}const ze=Be(1,qe,Fe),We=Be(-1,Ue);function Ve(t,e,n){var r=(ke(t)?qe:He)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function Qe(t,e){return Ve(t,Qt(e))}function Je(t,e,n){var r,i;if(e=Gt(e,n),ke(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=at(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t}function Ge(t,e,n){e=Yt(e,n);for(var r=!ke(t)&&at(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o}function Ke(t){return function(e,n,r,i){var o=arguments.length>=3;return function(e,n,r,i){var o=!ke(e)&&at(e),s=(o||e).length,a=t>0?0:s-1;for(i||(r=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var l=o?o[a]:a;r=n(r,e[l],l,e)}return r}(e,Gt(n,i,4),r,o)}}const Xe=Ke(1),Ye=Ke(-1);function Ze(t,e,n){var r=[];return e=Yt(e,n),Je(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function tn(t,e,n){return Ze(t,Ne(Yt(e)),n)}function en(t,e,n){e=Yt(e,n);for(var r=!ke(t)&&at(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0}function nn(t,e,n){e=Yt(e,n);for(var r=!ke(t)&&at(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1}function rn(t,e,n,r){return ke(t)||(t=Ct(t)),('number'!=typeof n||r)&&(n=0),ze(t,e,n)>=0}const on=k((function(t,e,n){var r,i;return q(e)?i=e:(e=Ft(e),r=e.slice(0,-1),e=e[e.length-1]),Ge(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=Bt(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))}));function sn(t,e){return Ge(t,Jt(e))}function an(t,e){return Ze(t,Qt(e))}function ln(t,e,n){var r,i,o=-1/0,s=-1/0;if(null==e||'number'==typeof e&&'object'!=typeof t[0]&&null!=t)for(var a=0,l=(t=ke(t)?t:Ct(t)).length;a<l;a++)null!=(r=t[a])&&r>o&&(o=r);else e=Yt(e,n),Je(t,(function(t,n,r){((i=e(t,n,r))>s||i===-1/0&&o===-1/0)&&(o=t,s=i)}));return o}function un(t,e,n){var r,i,o=1/0,s=1/0;if(null==e||'number'==typeof e&&'object'!=typeof t[0]&&null!=t)for(var a=0,l=(t=ke(t)?t:Ct(t)).length;a<l;a++)null!=(r=t[a])&&r<o&&(o=r);else e=Yt(e,n),Je(t,(function(t,n,r){((i=e(t,n,r))<s||i===1/0&&o===1/0)&&(o=t,s=i)}));return o}var cn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function dn(t){return t?V(t)?c.call(t):O(t)?t.match(cn):ke(t)?Ge(t,Vt):Ct(t):[]}function pn(t,e,n){if(null==e||n)return ke(t)||(t=Ct(t)),t[re(t.length-1)];var r=dn(t),i=ot(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,s=0;s<e;s++){var a=re(s,o),l=r[s];r[s]=r[a],r[a]=l}return r.slice(0,e)}function hn(t){return pn(t,1/0)}function fn(t,e,n){var r=0;return e=Yt(e,n),sn(Ge(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),'value')}function gn(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=Yt(r,i),Je(n,(function(e,i){var s=r(e,i,n);t(o,e,s)})),o}}const vn=gn((function(t,e,n){Q(t,n)?t[n].push(e):t[n]=[e]})),yn=gn((function(t,e,n){t[n]=e})),mn=gn((function(t,e,n){Q(t,n)?t[n]++:t[n]=1})),bn=gn((function(t,e,n){t[n?0:1].push(e)}),!0);function xn(t){return null==t?0:ke(t)?t.length:at(t).length}function _n(t,e,n){return e in n}const wn=k((function(t,e){var n={},r=e[0];if(null==t)return n;q(r)?(e.length>1&&(r=Gt(r,e[1])),e=vt(t)):(r=_n,e=Ee(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),$n=k((function(t,e){var n,r=e[0];return q(r)?(r=Ne(r),e.length>1&&(n=e[1])):(e=Ge(Ee(e,!1,!1),String),r=function(t,n){return!rn(e,n)}),wn(t,r,n)}));function kn(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function En(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:kn(t,t.length-e)}function Sn(t,e,n){return c.call(t,null==e||n?1:e)}function Tn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:Sn(t,Math.max(0,t.length-e))}function An(t){return Ze(t,Boolean)}function Cn(t,e){return Ee(t,e,!1)}const jn=k((function(t,e){return e=Ee(e,!0,!0),Ze(t,(function(t){return!rn(e,t)}))})),On=k((function(t,e){return jn(t,e)}));function In(t,e,n,r){A(e)||(r=n,n=e,e=!1),null!=n&&(n=Yt(n,r));for(var i=[],o=[],s=0,a=ot(t);s<a;s++){var l=t[s],u=n?n(l,s,t):l;e&&!n?(s&&o===u||i.push(l),o=u):n?rn(o,u)||(o.push(u),i.push(l)):rn(i,l)||i.push(l)}return i}const Nn=k((function(t){return In(Ee(t,!0,!0))}));function Rn(t){for(var e=[],n=arguments.length,r=0,i=ot(t);r<i;r++){var o=t[r];if(!rn(e,o)){var s;for(s=1;s<n&&rn(arguments[s],o);s++);s===n&&e.push(o)}}return e}function Dn(t){for(var e=t&&ln(t,ot).length||0,n=Array(e),r=0;r<e;r++)n[r]=sn(t,r);return n}const Mn=k(Dn);function Pn(t,e){for(var n={},r=0,i=ot(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function Hn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i}function Ln(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(c.call(t,r,r+=e));return n}function qn(t,e){return t._chain?ct(e).chain():e}function Un(t){return Je(It(t),(function(e){var n=ct[e]=t[e];ct.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),qn(this,n.apply(ct,t))}})),ct}Je(['pop','push','reverse','shift','sort','splice','unshift'],(function(t){var e=s[t];ct.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),'shift'!==t&&'splice'!==t||0!==n.length||delete n[0]),qn(this,n)}})),Je(['concat','join','slice'],(function(t){var e=s[t];ct.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),qn(this,t)}}));const Fn=ct;var Bn=Un(r);Bn._=Bn;const zn=Bn}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t['default']:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if('object'==typeof globalThis)return globalThis;try{return this||new Function('return this')()}catch(t){if('object'==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(t,'__esModule',{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{BinariOperator:()=>d,BuildQueryError:()=>Ze,COMPONENT_NAME_PREFIX:()=>b,COMPONENT_STATE_CHANGED:()=>a,DATA_SOURCE_CHANGED:()=>s,DATA_SOURCE_ERROR:()=>o,DATA_SOURCE_READY:()=>i,DataSourceManager:()=>_n,DataTree:()=>tn,FIXED_TOKEN_ID:()=>Ue,Properties:()=>p,UnariOperator:()=>c,buildArgs:()=>Pe,builtinTypeIds:()=>l,builtinTypes:()=>u,concatWithLength:()=>He,convertKind:()=>Je,default:()=>nr,expressionToFields:()=>je,fieldToToken:()=>Fn,fromStored:()=>Te,fromString:()=>We,getChildByPersistantId:()=>$,getCompletion:()=>Bn,getComponentByPersistentId:()=>w,getContext:()=>Un,getDataSourceClass:()=>xn,getExpressionResultType:()=>Oe,getFieldType:()=>Ge,getFilterFromToken:()=>Se,getFixedToken:()=>Fe,getOptionObject:()=>Re,getOrCreatePersistantId:()=>_,getParentByPersistentId:()=>k,getPersistantId:()=>x,getState:()=>O,getStateDisplayName:()=>E,getStateIds:()=>C,getStateVariableName:()=>j,getTokenDisplayName:()=>Le,getTokenOptions:()=>Ie,groupByType:()=>qe,isExpression:()=>Ve,onStateChange:()=>T,optionsFormKeySelector:()=>Ke,optionsToOptionsForm:()=>Ne,propertyToField:()=>Ce,removeState:()=>N,setState:()=>I,toExpression:()=>Qe,toId:()=>ze,toValue:()=>Be,tokenToField:()=>Ae,version:()=>rr});var t=n(298),e=n.n(t);const i='data-source:ready',o='data-source:error',s='data-source:changed',a='component:state:changed',l=['String','Int','Float','Boolean','ID','Unknown'],u=l.map((t=>({id:t,label:t,fields:[]})));var c,d,p;!function(t){t["TRUTHY"]="truthy",t["FALSY"]="falsy",t["EMPTY_ARR"]="empty array",t["NOT_EMPTY_ARR"]="not empty array"}(c||(c={})),function(t){t["EQUAL"]="==",t["NOT_EQUAL"]="!=",t["GREATER_THAN"]=">",t["LESS_THAN"]="<",t["GREATER_THAN_OR_EQUAL"]=">=",t["LESS_THAN_OR_EQUAL"]="<="}(d||(d={})),function(t){t["innerHTML"]="innerHTML",t["condition"]="condition",t["condition2"]="condition2",t["__data"]="__data"}(p||(p={}));const h=`\n  query IntrospectionQuery {\n    __schema {\n      queryType {\n        name\n      }\n      types {\n        ...FullType\n      }\n    }\n  }\n  fragment FullType on __Type {\n    kind\n    name\n    description\n    fields(includeDeprecated: true) {\n      name\n      description\n      args {\n        ...InputValue\n      }\n      type {\n        ...TypeRef\n      }\n      isDeprecated\n      deprecationReason\n    }\n    inputFields {\n      ...InputValue\n    }\n    interfaces {\n      ...TypeRef\n    }\n    enumValues(includeDeprecated: true) {\n      name\n      description\n      isDeprecated\n      deprecationReason\n    }\n    possibleTypes {\n      ...TypeRef\n    }\n  }\n  fragment InputValue on __InputValue {\n    name\n    description\n    type {\n      ...TypeRef\n    }\n    defaultValue\n  }\n  fragment TypeRef on __Type {\n    kind\n    name\n    possibleTypes {\n      kind\n      name\n    }\n    ofType {\n      kind\n      name\n      possibleTypes {\n        kind\n        name\n      }\n      ofType {\n        kind\n        name\n        possibleTypes {\n          kind\n          name\n        }\n        ofType {\n          kind\n          name\n          possibleTypes {\n            kind\n            name\n          }\n          ofType {\n            kind\n            name\n            possibleTypes {\n              kind\n              name\n            }\n            ofType {\n              kind\n              name\n              possibleTypes {\n                kind\n                name\n              }\n              ofType {\n                kind\n                name\n                possibleTypes {\n                  kind\n                  name\n                }\n                ofType {\n                  kind\n                  name\n                  possibleTypes {\n                    kind\n                    name\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`;var f=n(169),g=n.n(f);const v='publicStates',y='privateStates',m='id-plugin-data-source',b='nameForDataSource';function x(t){var e;return null!==(e=t.get(m))&&void 0!==e?e:null}function _(t){const e=t.get(m);if(e)return e;const n=`${t.ccid}-${Math.round(1e4*Math.random())}`;return t.set(m,n),n}function w(t,e){const n=e.Pages.getAll();for(const e of n){const n=$(t,e.getMainComponent());if(n)return n}return null}function $(t,e){if(x(e)===t)return e;for(const n of e.components()){const e=$(t,n);if(e)return e}return null}function k(t,e){return e?x(e)===t?e:k(t,e.parent()):null}function E(t,e){var n;const r=k(e.componentId,t),i=null!==(n=null==r?void 0:r.get(b))&&void 0!==n?n:'';return`${i?i+' ':''}${e.label||e.storedStateId}`}const S=[];function T(t){return S.push(t),()=>{const e=S.indexOf(t);e>=0&&S.splice(e,1)}}function A(t,e){S.forEach((n=>n(t,e)))}function C(t,e=!0){var n;return Object.keys(null!==(n=t.get(e?v:y))&&void 0!==n?n:{})}function j(t,e){return`state_${t}_${e}`}function O(t,e,n=!0){var r;return(null!==(r=t.get(n?v:y))&&void 0!==r?r:{})[e]}function I(t,e,n,r=!0){var i;const o=r?v:y;t.set(o,Object.assign(Object.assign({},null!==(i=t.get(o))&&void 0!==i?i:{}),{[e]:n})),A(n,t)}function N(t,e,n=!0){var r;const i=n?v:y,o=null!==(r=t.get(i))&&void 0!==r?r:{},s=Object.assign(Object.assign({},o),{[e]:void 0});delete s[e],t.set(i,s),A(null,t)}const R=globalThis,D=R.ShadowRoot&&(void 0===R.ShadyCSS||R.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,M=Symbol(),P=new WeakMap;class H{constructor(t,e,n){if(this._$cssResult$=!0,n!==M)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(D&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=P.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&P.set(e,t))}return t}toString(){return this.cssText}}const L=(t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,n,r)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[r+1]),t[0]);return new H(n,t,M)},q=D?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return(t=>new H("string"==typeof t?t:t+"",void 0,M))(e)})(t):t,{is:U,defineProperty:F,getOwnPropertyDescriptor:B,getOwnPropertyNames:z,getOwnPropertySymbols:W,getPrototypeOf:V}=Object,Q=globalThis,J=Q.trustedTypes,G=J?J.emptyScript:"",K=Q.reactiveElementPolyfillSupport,X=(t,e)=>t,Y={toAttribute(t,e){switch(e){case Boolean:t=t?G:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch(t){n=null}}return n}},Z=(t,e)=>!U(t,e),tt={attribute:!0,type:String,converter:Y,reflect:!1,hasChanged:Z};Symbol.metadata??=Symbol("metadata"),Q.litPropertyMetadata??=new WeakMap;class et extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=tt){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(t,n,e);void 0!==r&&F(this.prototype,t,r)}}static getPropertyDescriptor(t,e,n){const{get:r,set:i}=B(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return r?.call(this)},set(e){const o=r?.call(this);i.call(this,e),this.requestUpdate(t,o,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??tt}static _$Ei(){if(this.hasOwnProperty(X("elementProperties")))return;const t=V(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(X("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(X("properties"))){const t=this.properties,e=[...z(t),...W(t)];for(const n of e)this.createProperty(n,t[n])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,n]of e)this.elementProperties.set(t,n)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const n=this._$Eu(t,e);void 0!==n&&this._$Eh.set(n,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(q(t))}else void 0!==t&&e.push(q(t));return e}static _$Eu(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$Eg=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$ES(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$E_??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$E_?.delete(t)}_$ES(){const t=new Map,e=this.constructor.elementProperties;for(const n of e.keys())this.hasOwnProperty(n)&&(t.set(n,this[n]),delete this[n]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{if(D)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const n of e){const e=document.createElement("style"),r=R.litNonce;void 0!==r&&e.setAttribute("nonce",r),e.textContent=n.cssText,t.appendChild(e)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$E_?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$E_?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,n){this._$AK(t,n)}_$EO(t,e){const n=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,n);if(void 0!==r&&!0===n.reflect){const i=(void 0!==n.converter?.toAttribute?n.converter:Y).toAttribute(e,n.type);this._$Em=t,null==i?this.removeAttribute(r):this.setAttribute(r,i),this._$Em=null}}_$AK(t,e){const n=this.constructor,r=n._$Eh.get(t);if(void 0!==r&&this._$Em!==r){const t=n.getPropertyOptions(r),i="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:Y;this._$Em=r,this[r]=i.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,n,r=!1,i){if(void 0!==t){if(n??=this.constructor.getPropertyOptions(t),!(n.hasChanged??Z)(r?i:this[t],e))return;this.C(t,e,n)}!1===this.isUpdatePending&&(this._$Eg=this._$EP())}C(t,e,n){this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$EP(){this.isUpdatePending=!0;try{await this._$Eg}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,n]of t)!0!==n.wrapped||this._$AL.has(e)||void 0===this[e]||this.C(e,this[e],n)}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$E_?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$ET()}catch(e){throw t=!1,this._$ET(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$E_?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$ET(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Eg}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EO(t,this[t]))),this._$ET()}updated(t){}firstUpdated(t){}}et.elementStyles=[],et.shadowRootOptions={mode:"open"},et[X("elementProperties")]=new Map,et[X("finalized")]=new Map,K?.({ReactiveElement:et}),(Q.reactiveElementVersions??=[]).push("2.0.2");const nt=globalThis,rt=nt.trustedTypes,it=rt?rt.createPolicy("lit-html",{createHTML:t=>t}):void 0,ot="$lit$",st=`lit$${(Math.random()+"").slice(9)}$`,at="?"+st,lt=`<${at}>`,ut=document,ct=()=>ut.createComment(""),dt=t=>null===t||"object"!=typeof t&&"function"!=typeof t,pt=Array.isArray,ht=t=>pt(t)||"function"==typeof t?.[Symbol.iterator],ft="[ \t\n\f\r]",gt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,vt=/-->/g,yt=/>/g,mt=RegExp(`>|${ft}(?:([^\\s"'>=/]+)(${ft}*=${ft}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),bt=/'/g,xt=/"/g,_t=/^(?:script|style|textarea|title)$/i,wt=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),$t=(wt(1),wt(2),Symbol.for("lit-noChange")),kt=Symbol.for("lit-nothing"),Et=new WeakMap,St=ut.createTreeWalker(ut,129);function Tt(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==it?it.createHTML(e):e}const At=(t,e)=>{const n=t.length-1,r=[];let i,o=2===e?"<svg>":"",s=gt;for(let e=0;e<n;e++){const n=t[e];let a,l,u=-1,c=0;for(;c<n.length&&(s.lastIndex=c,l=s.exec(n),null!==l);)c=s.lastIndex,s===gt?"!--"===l[1]?s=vt:void 0!==l[1]?s=yt:void 0!==l[2]?(_t.test(l[2])&&(i=RegExp("</"+l[2],"g")),s=mt):void 0!==l[3]&&(s=mt):s===mt?">"===l[0]?(s=i??gt,u=-1):void 0===l[1]?u=-2:(u=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?mt:'"'===l[3]?xt:bt):s===xt||s===bt?s=mt:s===vt||s===yt?s=gt:(s=mt,i=void 0);const d=s===mt&&t[e+1].startsWith("/>")?" ":"";o+=s===gt?n+lt:u>=0?(r.push(a),n.slice(0,u)+ot+n.slice(u)+st+d):n+st+(-2===u?e:d)}return[Tt(t,o+(t[n]||"<?>")+(2===e?"</svg>":"")),r]};class Ct{constructor({strings:t,_$litType$:e},n){let r;this.parts=[];let i=0,o=0;const s=t.length-1,a=this.parts,[l,u]=At(t,e);if(this.el=Ct.createElement(l,n),St.currentNode=this.el.content,2===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=St.nextNode())&&a.length<s;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(ot)){const e=u[o++],n=r.getAttribute(t).split(st),s=/([.?@])?(.*)/.exec(e);a.push({type:1,index:i,name:s[2],strings:n,ctor:"."===s[1]?Rt:"?"===s[1]?Dt:"@"===s[1]?Mt:Nt}),r.removeAttribute(t)}else t.startsWith(st)&&(a.push({type:6,index:i}),r.removeAttribute(t));if(_t.test(r.tagName)){const t=r.textContent.split(st),e=t.length-1;if(e>0){r.textContent=rt?rt.emptyScript:"";for(let n=0;n<e;n++)r.append(t[n],ct()),St.nextNode(),a.push({type:2,index:++i});r.append(t[e],ct())}}}else if(8===r.nodeType)if(r.data===at)a.push({type:2,index:i});else{let t=-1;for(;-1!==(t=r.data.indexOf(st,t+1));)a.push({type:7,index:i}),t+=st.length-1}i++}}static createElement(t,e){const n=ut.createElement("template");return n.innerHTML=t,n}}function jt(t,e,n=t,r){if(e===$t)return e;let i=void 0!==r?n._$Co?.[r]:n._$Cl;const o=dt(e)?void 0:e._$litDirective$;return i?.constructor!==o&&(i?._$AO?.(!1),void 0===o?i=void 0:(i=new o(t),i._$AT(t,n,r)),void 0!==r?(n._$Co??=[])[r]=i:n._$Cl=i),void 0!==i&&(e=jt(t,i._$AS(t,e.values),i,r)),e}class Ot{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,r=(t?.creationScope??ut).importNode(e,!0);St.currentNode=r;let i=St.nextNode(),o=0,s=0,a=n[0];for(;void 0!==a;){if(o===a.index){let e;2===a.type?e=new It(i,i.nextSibling,this,t):1===a.type?e=new a.ctor(i,a.name,a.strings,this,t):6===a.type&&(e=new Pt(i,this,t)),this._$AV.push(e),a=n[++s]}o!==a?.index&&(i=St.nextNode(),o++)}return St.currentNode=ut,r}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class It{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,r){this.type=2,this._$AH=kt,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=jt(this,t,e),dt(t)?t===kt||null==t||""===t?(this._$AH!==kt&&this._$AR(),this._$AH=kt):t!==this._$AH&&t!==$t&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):ht(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==kt&&dt(this._$AH)?this._$AA.nextSibling.data=t:this.$(ut.createTextNode(t)),this._$AH=t}g(t){const{values:e,_$litType$:n}=t,r="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=Ct.createElement(Tt(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(e);else{const t=new Ot(r,this),n=t.u(this.options);t.p(e),this.$(n),this._$AH=t}}_$AC(t){let e=Et.get(t.strings);return void 0===e&&Et.set(t.strings,e=new Ct(t)),e}T(t){pt(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,r=0;for(const i of t)r===e.length?e.push(n=new It(this.k(ct()),this.k(ct()),this,this.options)):n=e[r],n._$AI(i),r++;r<e.length&&(this._$AR(n&&n._$AB.nextSibling,r),e.length=r)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class Nt{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,r,i){this.type=1,this._$AH=kt,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=kt}_$AI(t,e=this,n,r){const i=this.strings;let o=!1;if(void 0===i)t=jt(this,t,e,0),o=!dt(t)||t!==this._$AH&&t!==$t,o&&(this._$AH=t);else{const r=t;let s,a;for(t=i[0],s=0;s<i.length-1;s++)a=jt(this,r[n+s],e,s),a===$t&&(a=this._$AH[s]),o||=!dt(a)||a!==this._$AH[s],a===kt?t=kt:t!==kt&&(t+=(a??"")+i[s+1]),this._$AH[s]=a}o&&!r&&this.O(t)}O(t){t===kt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Rt extends Nt{constructor(){super(...arguments),this.type=3}O(t){this.element[this.name]=t===kt?void 0:t}}class Dt extends Nt{constructor(){super(...arguments),this.type=4}O(t){this.element.toggleAttribute(this.name,!!t&&t!==kt)}}class Mt extends Nt{constructor(t,e,n,r,i){super(t,e,n,r,i),this.type=5}_$AI(t,e=this){if((t=jt(this,t,e,0)??kt)===$t)return;const n=this._$AH,r=t===kt&&n!==kt||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,i=t!==kt&&(n===kt||r);r&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class Pt{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){jt(this,t)}}const Ht={j:ot,P:st,A:at,C:1,M:At,L:Ot,R:ht,V:jt,D:It,I:Nt,H:Dt,N:Mt,U:Rt,B:Pt},Lt=nt.litHtmlPolyfillSupport;Lt?.(Ct,It),(nt.litHtmlVersions??=[]).push("3.1.0");const qt=globalThis,Ut=qt.trustedTypes,Ft=Ut?Ut.createPolicy("lit-html",{createHTML:t=>t}):void 0,Bt="$lit$",zt=`lit$${(Math.random()+"").slice(9)}$`,Wt="?"+zt,Vt=`<${Wt}>`,Qt=document,Jt=()=>Qt.createComment(""),Gt=t=>null===t||"object"!=typeof t&&"function"!=typeof t,Kt=Array.isArray,Xt=t=>Kt(t)||"function"==typeof t?.[Symbol.iterator],Yt="[ \t\n\f\r]",Zt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,te=/-->/g,ee=/>/g,ne=RegExp(`>|${Yt}(?:([^\\s"'>=/]+)(${Yt}*=${Yt}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),re=/'/g,ie=/"/g,oe=/^(?:script|style|textarea|title)$/i,se=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),ae=se(1),le=(se(2),Symbol.for("lit-noChange")),ue=Symbol.for("lit-nothing"),ce=new WeakMap,de=Qt.createTreeWalker(Qt,129);function pe(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==Ft?Ft.createHTML(e):e}const he=(t,e)=>{const n=t.length-1,r=[];let i,o=2===e?"<svg>":"",s=Zt;for(let e=0;e<n;e++){const n=t[e];let a,l,u=-1,c=0;for(;c<n.length&&(s.lastIndex=c,l=s.exec(n),null!==l);)c=s.lastIndex,s===Zt?"!--"===l[1]?s=te:void 0!==l[1]?s=ee:void 0!==l[2]?(oe.test(l[2])&&(i=RegExp("</"+l[2],"g")),s=ne):void 0!==l[3]&&(s=ne):s===ne?">"===l[0]?(s=i??Zt,u=-1):void 0===l[1]?u=-2:(u=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?ne:'"'===l[3]?ie:re):s===ie||s===re?s=ne:s===te||s===ee?s=Zt:(s=ne,i=void 0);const d=s===ne&&t[e+1].startsWith("/>")?" ":"";o+=s===Zt?n+Vt:u>=0?(r.push(a),n.slice(0,u)+Bt+n.slice(u)+zt+d):n+zt+(-2===u?e:d)}return[pe(t,o+(t[n]||"<?>")+(2===e?"</svg>":"")),r]};class fe{constructor({strings:t,_$litType$:e},n){let r;this.parts=[];let i=0,o=0;const s=t.length-1,a=this.parts,[l,u]=he(t,e);if(this.el=fe.createElement(l,n),de.currentNode=this.el.content,2===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=de.nextNode())&&a.length<s;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(Bt)){const e=u[o++],n=r.getAttribute(t).split(zt),s=/([.?@])?(.*)/.exec(e);a.push({type:1,index:i,name:s[2],strings:n,ctor:"."===s[1]?be:"?"===s[1]?xe:"@"===s[1]?_e:me}),r.removeAttribute(t)}else t.startsWith(zt)&&(a.push({type:6,index:i}),r.removeAttribute(t));if(oe.test(r.tagName)){const t=r.textContent.split(zt),e=t.length-1;if(e>0){r.textContent=Ut?Ut.emptyScript:"";for(let n=0;n<e;n++)r.append(t[n],Jt()),de.nextNode(),a.push({type:2,index:++i});r.append(t[e],Jt())}}}else if(8===r.nodeType)if(r.data===Wt)a.push({type:2,index:i});else{let t=-1;for(;-1!==(t=r.data.indexOf(zt,t+1));)a.push({type:7,index:i}),t+=zt.length-1}i++}}static createElement(t,e){const n=Qt.createElement("template");return n.innerHTML=t,n}}function ge(t,e,n=t,r){if(e===le)return e;let i=void 0!==r?n._$Co?.[r]:n._$Cl;const o=Gt(e)?void 0:e._$litDirective$;return i?.constructor!==o&&(i?._$AO?.(!1),void 0===o?i=void 0:(i=new o(t),i._$AT(t,n,r)),void 0!==r?(n._$Co??=[])[r]=i:n._$Cl=i),void 0!==i&&(e=ge(t,i._$AS(t,e.values),i,r)),e}class ve{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,r=(t?.creationScope??Qt).importNode(e,!0);de.currentNode=r;let i=de.nextNode(),o=0,s=0,a=n[0];for(;void 0!==a;){if(o===a.index){let e;2===a.type?e=new ye(i,i.nextSibling,this,t):1===a.type?e=new a.ctor(i,a.name,a.strings,this,t):6===a.type&&(e=new we(i,this,t)),this._$AV.push(e),a=n[++s]}o!==a?.index&&(i=de.nextNode(),o++)}return de.currentNode=Qt,r}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class ye{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,r){this.type=2,this._$AH=ue,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=ge(this,t,e),Gt(t)?t===ue||null==t||""===t?(this._$AH!==ue&&this._$AR(),this._$AH=ue):t!==this._$AH&&t!==le&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):Xt(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==ue&&Gt(this._$AH)?this._$AA.nextSibling.data=t:this.$(Qt.createTextNode(t)),this._$AH=t}g(t){const{values:e,_$litType$:n}=t,r="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=fe.createElement(pe(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(e);else{const t=new ve(r,this),n=t.u(this.options);t.p(e),this.$(n),this._$AH=t}}_$AC(t){let e=ce.get(t.strings);return void 0===e&&ce.set(t.strings,e=new fe(t)),e}T(t){Kt(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,r=0;for(const i of t)r===e.length?e.push(n=new ye(this.k(Jt()),this.k(Jt()),this,this.options)):n=e[r],n._$AI(i),r++;r<e.length&&(this._$AR(n&&n._$AB.nextSibling,r),e.length=r)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class me{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,r,i){this.type=1,this._$AH=ue,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=ue}_$AI(t,e=this,n,r){const i=this.strings;let o=!1;if(void 0===i)t=ge(this,t,e,0),o=!Gt(t)||t!==this._$AH&&t!==le,o&&(this._$AH=t);else{const r=t;let s,a;for(t=i[0],s=0;s<i.length-1;s++)a=ge(this,r[n+s],e,s),a===le&&(a=this._$AH[s]),o||=!Gt(a)||a!==this._$AH[s],a===ue?t=ue:t!==ue&&(t+=(a??"")+i[s+1]),this._$AH[s]=a}o&&!r&&this.O(t)}O(t){t===ue?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class be extends me{constructor(){super(...arguments),this.type=3}O(t){this.element[this.name]=t===ue?void 0:t}}class xe extends me{constructor(){super(...arguments),this.type=4}O(t){this.element.toggleAttribute(this.name,!!t&&t!==ue)}}class _e extends me{constructor(t,e,n,r,i){super(t,e,n,r,i),this.type=5}_$AI(t,e=this){if((t=ge(this,t,e,0)??ue)===le)return;const n=this._$AH,r=t===ue&&n!==ue||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,i=t!==ue&&(n===ue||r);r&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class we{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){ge(this,t)}}const $e=qt.litHtmlPolyfillSupport;$e?.(fe,ye),(qt.litHtmlVersions??=[]).push("3.1.0");class ke extends et{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{const r=n?.renderBefore??e;let i=r._$litPart$;if(void 0===i){const t=n?.renderBefore??null;r._$litPart$=i=new ye(e.insertBefore(Jt(),t),t,void 0,n??{})}return i._$AI(t),i})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return le}}ke._$litElement$=!0,ke["finalized"]=!0,globalThis.litElementHydrateSupport?.({LitElement:ke});const Ee=globalThis.litElementPolyfillSupport;Ee?.({LitElement:ke});function Se(t,e){if('filter'!==t.type)throw new Error('Token is not a filter');const n=e.find((e=>e.id===t.id));if(!n)throw console.error('Filter not found',t),new Error(`Filter ${t.id} not found`);return Object.assign(Object.assign(Object.assign({},t),n),{options:t.options})}function Te(t,e){var n;switch(t.type){case'filter':{if(t.optionsForm)return t;const n=e.filters.find((e=>e.id===t.id));if(!n)throw console.error('Filter not found',t),new Error(`Filter ${t.id} not found`);return Object.assign(Object.assign({},n),t)}case'property':{if(t.optionsForm)return t;const r=Ce(t,e);if(!r)throw console.error('Field not found for token',t),new Error(`Field ${t.fieldId} not found`);return Object.assign(Object.assign({},null!==(n=Ie(r))&&void 0!==n?n:{}),t)}case'state':return t;default:throw console.error('Unknown token type (reading type)',t),new Error('Unknown token type')}}function Ae(t,e,n,r){var i,o,s;switch(t.type){case'filter':{const n=Se(t,r.filters);return n.validate(e)?n.output(e,null!==(i=n.options)&&void 0!==i?i:{}):null}case'property':return Ce(t,r);case'state':{const e=k(t.componentId,n);if(!e)return console.warn('Component not found for state',t),null;const i=null===(o=O(e,t.storedStateId,t.exposed))||void 0===o?void 0:o.expression;if(!i)return console.warn('State is not defined on component',{component:e,token:t}),null;const a=Oe(i,e,r);return a?Object.assign(Object.assign({},a),{kind:null!==(s=t.forceKind)&&void 0!==s?s:a.kind}):null}default:throw console.error('Unknown token type (reading type)',t),new Error('Unknown token type')}}function Ce(t,e){const n=t.typeIds.map((n=>{var r;return e.getType(n,null!==(r=t.dataSourceId)&&void 0!==r?r:null)})).map((t=>null==t?void 0:t.label)),r=t.options?Object.entries(t.options).map((([t,e])=>({typeId:'JSON',name:t,defaultValue:e}))):void 0;return{id:t.fieldId,label:n.join(', '),typeIds:t.typeIds,kind:t.kind,dataSourceId:t.dataSourceId,arguments:r}}function je(t,e,n){let r=null;return t.map((i=>{const o=Ae(Te(i,n),r,e,n);return o?(r=o,o):(console.warn('Type not found for token in expressionToFields',{token:i,expression:t}),{id:'unknown',label:'unknown',typeIds:[],kind:'scalar'})}))}function Oe(t,e,n){return t.reduce(((t,r)=>Ae(Te(r,n),t,e,n)),null)}function Ie(t){return t.arguments&&t.arguments.length>0?{optionsForm:Ne(t.arguments.map((t=>({name:t.name,value:t.defaultValue})))),options:t.arguments.reduce(((t,e)=>(t[e.name]=e.defaultValue,t)),{})}:null}function Ne(t){return(e,n)=>ae`
              ${t.map((t=>{var e,r;const i=null!==(r=null!==(e=n[t.name])&&void 0!==e?e:t.value)&&void 0!==r?r:'';return ae`<label>${t.name}</label><input type="text" name=${t.name} value=${i}>`}))}
          `}function Re(t,e){if(!t&&!e)return{error:!1,result:void 0};if(Me(t)&&Me(e))return{error:!1,result:void 0};if(!t||!e)return{error:!0,result:void 0};if(Me(t)||Me(e))return{error:!0,result:void 0};const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return{error:!0,result:void 0};for(const r of n)if(t[r]!==e[r])return{error:!0,result:void 0};return{error:!1,result:t}}function De(t){try{JSON.parse(t)}catch(t){return!1}return!0}function Me(t){if(null==t)return!0;const e='string'==typeof t,n=e&&De(t);if(e&&!n)return''===t;const r=n?JSON.parse(t):t;return Array.isArray(r)?0===r.length:'object'==typeof r&&0===Object.values(r).filter((t=>!!t)).length}function Pe(t){const e=t?`(${Object.keys(t).map((e=>({key:e,value:t[e]}))).filter((({value:t})=>!Me(t))).map((({key:t,value:e})=>'string'!=typeof e||De(e)?`${t}: ${e}`:`${t}: "${e}"`)).join(', ')})`:'';return'()'===e?'':e}function He(t,...e){const n=e.reduce(((t,e)=>t+e.length),0),r=Math.max(t-n,0),[i,...o]=e;return[i+' '.repeat(r),...o].join('')}function Le(t,e){switch(e.type){case'property':{const t=function(t,e){const n=t.join(', ').toLowerCase();return'list'===e?` (${n}[])`:'object'===e?` (${n}{})`:` (${n})`}(e.typeIds,e.kind);return`${e.label} ${t}`}case'filter':return e.label;case'state':return E(t,e);default:throw console.error('Unknown token type (reading type)',e),new Error(`Unknown token type`)}}function qe(t,e,n,r){return n.reduce(((n,i)=>{var o,s;let a;switch(i.type){case'filter':a='Filters';break;case'property':if(i.dataSourceId)if(r.length>0){const n=Oe(r,e,t.DataSourceManager.getDataTree());a=null!==(s=null!==(o=null==n?void 0:n.label)&&void 0!==o?o:null==n?void 0:n.id)&&void 0!==s?s:'Unknown'}else{const e=t.DataSourceManager.get(i.dataSourceId);if(!e)throw console.error('Data source not found',i.dataSourceId),new Error(`Data source not found: ${i.dataSourceId}`);a=e.get('label')||i.dataSourceId}else a='Fields';break;case'state':{const t=k(i.componentId,e),n='body'===(null==t?void 0:t.get('tagName'))?'Website':null==t?void 0:t.getName();a=n?`${n}'s states`:'States';break}default:throw console.error('Unknown token type (reading type)',i),new Error(`Unknown token type`)}return n[a]||(n[a]=[]),n[a].push(i),n}),{})}(globalThis.litElementVersions??=[]).push("4.0.2");const Ue='fixed';function Fe(t){return{type:'property',propType:'field',fieldId:Ue,label:'Fixed value',kind:'scalar',typeIds:['String'],options:{value:t},optionsForm:()=>ae`
        <label>Value
          <input type="text" name="value" value=${t}>
        </label>
    `}}function Be(t){return JSON.stringify(Object.assign({},t))}function ze(t){switch(t.type){case'property':return`property__${t.dataSourceId||''}__${t.fieldId}__${t.kind}__${t.typeIds.join(',')}`;case'filter':return`filter____${t.id}`;case'state':return`state__${t.componentId}__${t.storedStateId}`;default:throw console.error('Unknown token type (reading type)',t),new Error(`Unknown token type`)}}function We(t,e){return Te(JSON.parse(e),t.DataSourceManager.getDataTree())}function Ve(t){if('string'==typeof t)throw new Error('json must be parsed');return!!Array.isArray(t)&&t.every((t=>{var e;if('object'!=typeof t)return!1;if(!t.type)return!1;switch(t.type){case'property':if(!t.fieldId)return!1;if(t.fieldId===Ue&&!(null===(e=t.options)||void 0===e?void 0:e.value))return!1;break;case'state':if(!t.componentId)return!1;if(!t.storedStateId)return!1;break;case'filter':if(!t.id)return!1}return!0}))}function Qe(t){try{return'string'==typeof t&&(t=JSON.parse(t)),Ve(t)?t:null}catch(t){return null}}function Je(t,e,n){if(!t)return null;if(t.kind!==e)throw console.error(`Field is not a ${e}`,t),new Error(`Field ${t.label} is not a ${e}`);return Object.assign(Object.assign({},t),{kind:n})}function Ge(t,e,n){const r=t.DataSourceManager.getDataTree();if(!e||!n)return null;const i=e.typeIds.map((t=>{var n;return r.getType(t,null!==(n=e.dataSourceId)&&void 0!==n?n:null)})).map((t=>null==t?void 0:t.fields.find((t=>t.label===n))));switch(i.length){case 0:return null;case 1:return i[0];default:return{id:`${e.id}.${n}`,label:`${e.label}.${n}`,typeIds:i.reduce(((t,e)=>t.concat(e.typeIds.filter((e=>!t.includes(e))))),[]),kind:'object',dataSourceId:e.dataSourceId}}}function Ke(t,e,n,r){const i=t.DataSourceManager.getDataTree();return e?ae`
      <select name=${r}>
        <option value="">Select a ${r}</option>
        ${e?e.typeIds.flatMap((t=>{var n;return i.getType(t,null!==(n=e.dataSourceId)&&void 0!==n?n:null).fields})).map((t=>ae`<option value=${t.label} .selected=${t.label===n.key}>${t.label}</option>`)):ae``}
      </select>
    `:ae`
      <label>${r}
        <input type="text" name=${r} />
      </label>
    `}var Xe=void 0&&(void 0).__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r["throw"](t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))};class Ye extends e().Model{constructor(t){super(t),this.types=[],this.queryables=[],this.queryType='',this.ready=!1,this.set('id',t.id),this.set('label',t.label),this.set('url',t.url),this.set('headers',t.headers),this.set('queryable',t.queryable)}triggerError(t){throw this.trigger(o,{message:t}),new Error(t)}loadData(){var t,e,n;return Xe(this,void 0,void 0,(function*(){try{const r=yield this.call(h);if(!(null===(e=null===(t=r.data)||void 0===t?void 0:t.__schema)||void 0===e?void 0:e.types))return this.triggerError(`Invalid response: ${JSON.stringify(r)}`);const i=r.data.__schema.types.map((t=>t.name)).concat(l),o=null===(n=r.data.__schema.queryType)||void 0===n?void 0:n.name;if(!o)return this.triggerError(`Invalid response, queryType not found: ${JSON.stringify(r)}`);const s=r.data.__schema.types.find((t=>t.name===o));if(!s)return this.triggerError(`Invalid response, query not found: ${JSON.stringify(r)}`);const a=r.data.__schema.types.filter((t=>!t.name.startsWith('__'))).filter((t=>!(null==s?void 0:s.fields.find((e=>e.name===t.name))))).map((t=>this.graphQLToType(i,t,'SCALAR',!1))).concat(u),c=s.fields.map((t=>({type:Object.assign(Object.assign({},r.data.__schema.types.find((e=>e.name===this.getOfTypeProp('name',t.type,t.name)))),{name:t.name}),kind:this.ofKindToKind(t.type)}))).map((({type:t,kind:e})=>this.graphQLToType(i,t,e,!0))),d=s.fields.map((t=>this.graphQLToField(t)));return[c.concat(a),d,o]}catch(t){return this.triggerError(`GraphQL introspection failed: ${t.message}`)}}))}graphQLToField(t){var e;const n=this.ofKindToKind(t.type);return{id:t.name,dataSourceId:this.get('id'),label:t.name,typeIds:this.graphQLToTypes(t),kind:n?this.graphQLToKind(n):'unknown',arguments:null===(e=t.args)||void 0===e?void 0:e.map((t=>({name:t.name,typeId:this.getOfTypeProp('name',t.type,t.name),defaultValue:t.defaultValue})))}}getOfTypeProp(t,e,n){const r=this.getOfTypePropRecursive(t,e);if(r)return r;if(n)return n;throw new Error(`Type ${JSON.stringify(e)} has no property ${t} and no default was provided`)}getOfTypePropRecursive(t,e){if(!e)throw console.error('Invalid type',e),new Error('Invalid type');if(e.ofType){const n=this.getOfTypePropRecursive(t,e.ofType);if(n)return n}return e[t]}graphQLToTypes(t){const e=this.getOfTypeProp('possibleTypes',t.type,[]);return e.length>0?e.map((t=>t.name)):[this.getOfTypeProp('name',t.type,t.name)]}graphQLToKind(t){switch(t){case'LIST':return'list';case'OBJECT':return'object';case'SCALAR':return'scalar';default:throw new Error(`Unable to find a valid kind for ${t}`)}}validKind(t){return['LIST','OBJECT','SCALAR'].includes(t)}ofKindToKind(t){if(t.possibleTypes){const e=t.possibleTypes.reduce(((e,n)=>{if(!e)return n.kind;if(e!==n.kind)throw console.error('Unable to find a valid kind, union types with different kind is not supported',t),new Error(`Unable to find a valid kind for ${t.kind}. Union types with different kind is not supported`);return e}),null);return e||(console.error('Unable to find a valid kind (1)',t),null)}return this.validKind(t.kind)?t.kind:t.ofType?this.ofKindToKind(t.ofType):null}graphQLToType(t,e,n,r){var i,o,s;const a=this.get('queryable');return{id:e.name,dataSourceId:this.get('id'),label:e.name,fields:null!==(s=null===(o=null===(i=e.fields)||void 0===i?void 0:i.filter((e=>t.includes(this.getOfTypeProp('name',e.type,e.name)))))||void 0===o?void 0:o.map((t=>this.graphQLToField(t))))&&void 0!==s?s:[],queryable:r&&(!a||a.includes(e.name))}}connect(){return Xe(this,void 0,void 0,(function*(){try{const[t,e,n]=yield this.loadData();if(0===t.length)return this.triggerError(`No types found in GraphQL schema`);if(0===e.length)return this.triggerError(`No fields found in GraphQL schema`);if(!n)return this.triggerError(`No query type found in GraphQL schema`);this.types=t,this.queryables=e,this.queryType=n,this.ready=!0,this.trigger(i)}catch(t){return this.triggerError(`GraphQL connection failed: ${t.message}`)}}))}getTypes(){return this.types}getQueryables(){return this.queryables}call(t){var e;return Xe(this,void 0,void 0,(function*(){const n=this.get('url');if(!n)return this.triggerError('Missing GraphQL URL');const r=this.get('headers');if(!r)return this.triggerError('Missing GraphQL headers');const i=null!==(e=this.get('method'))&&void 0!==e?e:'POST',o=yield fetch(n,Object.assign({method:i,headers:Object.assign({'Content-Type':'application/json'},r)},'POST'===i?{body:JSON.stringify({query:t})}:{}));return(null==o?void 0:o.ok)?o.json():(console.error('GraphQL call failed',null==o?void 0:o.status,null==o?void 0:o.statusText,t),this.triggerError(`GraphQL call failed with \`${null==o?void 0:o.statusText}\` and status ${null==o?void 0:o.status}`))}))}getQuery(t){return this.getQueryRecursive({token:{dataSourceId:this.get('id'),fieldId:'query',kind:'object',typeIds:[this.queryType]},children:t})}getQueryRecursive(t,e='',n=''){const r=n?`...on ${n}`:`${t.token.fieldId}${Pe(t.token.options)}`;switch(t.token.kind){case'scalar':return t.token.fieldId===Ue?'':e+r;case'object':case'list':{const n=this.getTypes().filter((e=>{var n;return null===(n=t.token.typeIds)||void 0===n?void 0:n.includes(e.id)}));if(0===n.length)throw new Error(`Type not found for ${t.token.fieldId} (${t.token.typeIds})`);if(n.length>1)throw new Error(`Multiple types found for ${t.token.fieldId}`);const i=n[0],o=t.children.map((t=>{const e=i.fields.find((e=>e.id===t.token.fieldId));return e?{fieldType:e,child:t}:null})).filter((t=>null!==t)),s=o.filter((({fieldType:t})=>t.typeIds.length>1)).map((({child:t})=>({query:this.getQueryRecursive(t,e+'  ',t.token.typeIds[0]),child:t}))).map((({query:t,child:n})=>g()`
            ${e}${n.token.fieldId} {
              ${t}
            }
          `)).join('\n'),a=o.filter((({fieldType:t})=>1===t.typeIds.length)).map((({child:t})=>this.getQueryRecursive(t,e+'  '))).join('\n');return g()`${e}${r} {
        ${e}  __typename
        ${a}
        ${s}
        ${e}}`}default:throw console.error('Unable to build GraphQL query',t),new Error(`Unable to build GraphQL query: unable to build tree ${JSON.stringify(t)}`)}}}class Ze extends Error{constructor(t,e){super(t),this.expression=e.expression,this.component=e.component,this.token=e.token}}class tn{get allTypes(){return this._allTypes}get queryables(){return this._queryables}constructor(t,e){this.editor=t,this.options=e,this.dataSources=[],this.filters=[],this._allTypes=[],this._queryables=[],this.dataSources=e.dataSources,this.filters=e.filters,this.filters.forEach((t=>{if(!t.id)throw new Error('Filter id is required');if(!t.label)throw new Error('Filter name is required');if(!t.validate)throw new Error('Filter validate is required');if(!t.output)throw new Error('Filter outputType is required');if(!t.apply)throw new Error('Filter apply is required')})),t.on(`${s} ${i}`,(()=>{this._allTypes=this.getAllTypes(),this._queryables=this.getAllQueryables()})),this._allTypes=this.getAllTypes(),this._queryables=this.getAllQueryables()}getTypes(t){var e;const n=null===(e=this.dataSources.find((e=>e.id===t)))||void 0===e?void 0:e.getTypes();if(!n)throw new Error(`Data source not found ${t}`);return n}getType(t,e){if(e){const n=this.dataSources.find((t=>!e||t.id===e));if(!n)throw new Error(`Data source not found ${e}`);const r=(null==n?void 0:n.getTypes()).find((e=>e.id===t));if(!r)throw new Error(`Type not found ${null!=e?e:''}.${t}`);return r}{const e=this.allTypes.find((e=>e.id===t));if(!e)throw new Error(`Unknown type ${t}`);return e}}getAllTypes(){return this.dataSources.flatMap((t=>t.getTypes()))}getAllQueryables(){return this.dataSources.flatMap((t=>t.getQueryables()))}getValue(t,e){throw new Error('Not implemented')}getAllPagesExpressions(){return this.editor.Pages.getAll().map((t=>({page:t,expressions:this.getPageExpressions(t)})))}getPageExpressions(t){return this.getComponentExpressionsRecursive(t.getMainComponent())}getComponentExpressionsRecursive(t){const e=[];return e.push(...this.getComponentExpressions(t)),t.components().forEach((t=>{e.push(...this.getComponentExpressionsRecursive(t))})),e}getComponentExpressions(t){return[].concat(C(t,!0).map((e=>{var n;return null===(n=O(t,e,!0))||void 0===n?void 0:n.expression}))).concat(C(t,!1).map((e=>{var n;return null===(n=O(t,e,!1))||void 0===n?void 0:n.expression})))}getTrees(t,e){if(0===t.length)return[];const n=t[0];switch(n.type){case'property':{if(n.dataSourceId!==e)return[];const r=this.getTrees(t.slice(1),e);return 0===r.length?[{token:n,children:[]}]:r.flatMap((t=>this.isRelative(n,t.token,e)?{token:n,children:[t]}:[{token:n,children:[]},t]))}case'filter':{const r=Object.values(n.options).map((t=>Qe(t))).filter((t=>!!t&&t.length>0)).flatMap((t=>this.getTrees(t,e))),i=this.getTrees(t.slice(1),e);return 0===i.length?r:i.flatMap((t=>[t,...r]))}case'state':{const t=w(n.componentId,this.editor);if(!t)throw new Error(`Component not found ${n.componentId}`);const r=this.resolveState(n,t);if(!r)throw new Error(`Unable to resolve state ${JSON.stringify(n)}`);return this.getTrees(r,e)}default:throw console.error('Invalid expression',t),new Error(`Invalid expression ${JSON.stringify(t)}`)}}isRelative(t,e,n){const r=this.getTypes(n).filter((e=>t.typeIds.includes(e.id))).flatMap((t=>t.fields.map((t=>t.typeIds)).flat()));return r.length>0&&e.typeIds.some((t=>r.includes(t)))}toTrees(t,e){return 0===t.length?[]:t.flatMap((t=>this.getTrees(t,e))).reduce(((t,e)=>{const n=t.find((t=>t[0].token.fieldId===e.token.fieldId&&(!e.token.dataSourceId||t[0].token.dataSourceId===e.token.dataSourceId)));return n?n.push(e):t.push([e]),t}),[]).map((t=>t.reduce(((t,e)=>this.mergeTrees(t,e)))))}mergeTrees(t,e){if(t.token.dataSourceId!==e.token.dataSourceId)throw console.error('Unable to merge trees',t,e),new Error(`Unable to build GraphQL query: unable to merge trees ${JSON.stringify(t)} and ${JSON.stringify(e)}`);const n=t.children.filter((t=>e.children.find((e=>t.token.fieldId===e.token.fieldId&&Re(t.token.options,e.token.options).error)))).map((t=>{const n=e.children.find((e=>t.token.fieldId===e.token.fieldId));return`${t.token.fieldId} appears twice with different options: ${JSON.stringify(t.token.options)} vs ${JSON.stringify(null==n?void 0:n.token.options)}`}));if(n.length>0)throw console.error('Unable to merge trees',n),new Error(`Unable to build GraphQL query: unable to merge trees: \n* ${n.join('\n* ')}`);const r=t.children.filter((t=>!e.children.find((e=>t.token.fieldId===e.token.fieldId&&t.token.typeIds.join(',')===e.token.typeIds.join(',')&&!Re(t.token.options,e.token.options).error)))).concat(e.children.filter((e=>!t.children.find((t=>t.token.fieldId===e.token.fieldId&&t.token.typeIds.join(',')===e.token.typeIds.join(',')&&!Re(t.token.options,e.token.options).error))))),i=t.children.filter((t=>e.children.find((e=>t.token.fieldId===e.token.fieldId&&t.token.typeIds.join(',')===e.token.typeIds.join(',')&&!Re(t.token.options,e.token.options).error))));return{token:t.token,children:r.concat(i.map((t=>{const n=e.children.find((e=>t.token.fieldId===e.token.fieldId));return this.mergeTrees(t,n)})))}}resolveState(t,e){const n=k(t.componentId,e);if(!n)return console.warn('Component not found for state',t),null;const r=O(n,t.storedStateId,t.exposed);return(null==r?void 0:r.expression)?r.expression.flatMap((t=>{var e;return'state'===t.type?null!==(e=this.resolveState(Te(t,this),n))&&void 0!==e?e:[]:t})):(console.warn('State is not defined on component',n,t),null)}}const{D:en}=Ht,nn=1,rn=2,on=t=>(...e)=>({_$litDirective$:t,values:e});class sn{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}const an=(t,e)=>{const n=t._$AN;if(void 0===n)return!1;for(const t of n)t._$AO?.(e,!1),an(t,e);return!0},ln=t=>{let e,n;do{if(void 0===(e=t._$AM))break;n=e._$AN,n.delete(t),t=e}while(0===n?.size)},un=t=>{for(let e;e=t._$AM;t=e){let n=e._$AN;if(void 0===n)e._$AN=n=new Set;else if(n.has(t))break;n.add(t),pn(e)}};function cn(t){void 0!==this._$AN?(ln(this),this._$AM=t,un(this)):this._$AM=t}function dn(t,e=!1,n=0){const r=this._$AH,i=this._$AN;if(void 0!==i&&0!==i.size)if(e)if(Array.isArray(r))for(let t=n;t<r.length;t++)an(r[t],!1),ln(r[t]);else null!=r&&(an(r,!1),ln(r));else an(this,t)}const pn=t=>{t.type==rn&&(t._$AP??=dn,t._$AQ??=cn)};class hn extends sn{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,n){super._$AT(t,e,n),un(this),this.isConnected=t._$AU}_$AO(t,e=!0){t!==this.isConnected&&(this.isConnected=t,t?this.reconnected?.():this.disconnected?.()),e&&(an(this,t),ln(this))}setValue(t){if((t=>void 0===t.strings)(this._$Ct))this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}const fn=()=>new gn;class gn{}const vn=new WeakMap,yn=on(class extends hn{render(t){return kt}update(t,[e]){const n=e!==this.G;return n&&void 0!==this.G&&this.ot(void 0),(n||this.rt!==this.lt)&&(this.G=e,this.ct=t.options?.host,this.ot(this.lt=t.element)),kt}ot(t){if("function"==typeof this.G){const e=this.ct??globalThis;let n=vn.get(e);void 0===n&&(n=new WeakMap,vn.set(e,n)),void 0!==n.get(this.G)&&this.G.call(this.ct,void 0),n.set(this.G,t),void 0!==t&&this.G.call(this.ct,t)}else this.G.value=t}get rt(){return"function"==typeof this.G?vn.get(this.ct??globalThis)?.get(this.G):this.G?.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}});function mn(t){if(!t||'scalar'!==t.kind)return!1;const e=t.typeIds.map((t=>t.toLowerCase()));return e.includes('number')||e.includes('int')}function bn(t){return[{type:'filter',id:'strip_html',label:'strip_html',validate:t=>!!t&&t.typeIds.includes('String')&&'scalar'===t.kind,output:t=>t,apply:t=>t.replace(/<[^>]*>/g,''),options:{}},{type:'filter',id:'append',label:'append',validate:t=>!!t&&t.typeIds.includes('String')&&'scalar'===t.kind,output:t=>t,apply:(t,e)=>`${t}${e.state}`,options:{state:''},optionsForm:(e,n)=>ae`
        <state-editor
          name="value"
          data-is-input
          no-filters
          class="ds-state-editor__options"
          value=${n.value||'[]'}
          ${yn((e=>e&&e.setEditor(t)))}
        >
          <label slot="label">Suffix</label>
        </state-editor>
      `},{type:'filter',id:'prepend',label:'prepend',validate:t=>!!t&&t.typeIds.includes('String')&&'scalar'===t.kind,output:t=>t,apply:(t,e)=>`${e.state}${t}`,options:{state:''},optionsForm:(e,n)=>ae`
        <state-editor
          name="value"
          data-is-input
          no-filters
          class="ds-state-editor__options"
          value=${n.value||'[]'}
          ${yn((e=>e&&e.setEditor(t)))}
        >
          <label slot="label">Prefix</label>
        </state-editor>
      `},{type:'filter',id:'where',label:'where',validate:t=>!!t&&'list'===t.kind,output:t=>t,apply:(t,e)=>{const{key:n,value:r}=e;return t.filter((t=>t[n]===r))},options:{key:'',value:''},quotedOptions:['key'],optionsKeys:['key','value'],optionsForm:(e,n)=>{var r;return ae`
        <state-editor
          no-filters
          data-is-input
          class="ds-state-editor__options"
          value=${n.key||[]}
          name="key"
          root-type=${null!==(r=null==e?void 0:e.typeIds[0])&&void 0!==r?r:''}
          ${yn((e=>e&&e.setEditor(t)))}
        >
          <label slot="label">Key to filter on</label>
        </state-editor>
        <p>==</p>
        <state-editor
          no-filters
          data-is-input
          class="ds-state-editor__options"
          value=${n.value||[]}
          name="value"
          ${yn((e=>e&&e.setEditor(t)))}
        >
          <label slot="label">Value to match</label>
        </state-editor>
    `}},{type:'filter',id:'first',label:'first',validate:t=>!!t&&'list'===t.kind,output:t=>Je(t,'list','object'),apply:t=>t[0],options:{}},{type:'filter',id:'last',label:'last',validate:t=>!!t&&'list'===t.kind,output:t=>Je(t,'list','object'),apply:t=>t[t.length-1],options:{}},{type:'filter',id:'join',label:'join',validate:t=>!!t&&t.typeIds.includes('String')&&'list'===t.kind,output:t=>Je(t,'list','scalar'),apply:(t,e)=>{var n;return t.join(null!==(n=e.separator)&&void 0!==n?n:',')},options:{separator:','},quotedOptions:['key'],optionsKeys:['key','separator','value'],optionsForm:(e,n)=>{var r;return ae`
          <state-editor
            no-filters
            data-is-input
            class="ds-state-editor__options"
            value=${n.key||[]}
            name="key"
            ${yn((e=>e&&e.setEditor(t)))}
            root-type=${null!==(r=null==e?void 0:e.typeIds[0])&&void 0!==r?r:''}
          >
            <label slot="label">Separator</label>
          </state-editor>
          <state-editor
            no-filters
            data-is-input
            class="ds-state-editor__options"
            value=${n.value||[]}
            name="value"
            ${yn((e=>e&&e.setEditor(t)))}
          >
            <label slot="label">Value to match</label>
          </state-editor>
    `}},{type:'filter',id:'split',label:'split',validate:t=>!!t&&t.typeIds.includes('String')&&'scalar'===t.kind,output:t=>Je(t,'scalar','list'),apply:(t,e)=>{var n;return t.split(null!==(n=e.separator)&&void 0!==n?n:',')},options:{separator:','},optionsForm:(t,e)=>ae`
        <label>Separator
          <input type="text" name="separator" placeholder="Separator" value=${e.separator}/>
        </label>
    `},{type:'filter',id:'map',label:'map',validate:t=>!!t&&'list'===t.kind,output:(e,n)=>Ge(t,e,n['key']),apply:(t,e)=>t.map((t=>t[e.key])),options:{key:''},quotedOptions:['key'],optionsForm:(e,n)=>{var r;return ae`
        <state-editor
          no-filters
          data-is-input
          class="ds-state-editor__options"
          value=${n.key||[]}
          name="key"
          ${yn((e=>e&&e.setEditor(t)))}
          root-type=${null!==(r=null==e?void 0:e.typeIds[0])&&void 0!==r?r:''}
        >
          <label slot="label">Key to map</label>
        </state-editor>
      `}},{type:'filter',id:'reverse',label:'reverse',validate:t=>!!t&&'list'===t.kind,output:t=>t,apply:t=>t.reverse(),options:{}},{type:'filter',id:'size',label:'size',validate:t=>!!t&&'list'===t.kind,output:()=>({id:'Int',label:'Int',typeIds:['Int'],kind:'scalar'}),apply:t=>t.length,options:{}},{type:'filter',id:'at',label:'at',validate:t=>!!t&&'list'===t.kind,output:t=>Je(t,'list','object'),apply:(t,e)=>t[e.index],options:{index:0},optionsForm:(t,e)=>ae`
        <label>Index
          <input type="number" name="index" placeholder="Index" value=${e.index}/>
        </label>
    `},{type:'filter',id:'slice',label:'slice',validate:t=>!!t&&'list'===t.kind,output:t=>t,apply:(t,e)=>t.slice(e.start,e.end),options:{start:0,end:0},optionsKeys:['start','end'],optionsForm:(e,n)=>ae`
        <state-editor
          no-filters
          data-is-input
          class="ds-state-editor__options"
          value=${n.start||[]}
          name="start"
          ${yn((e=>e&&e.setEditor(t)))}
        >
          <label slot="label">Start index</label>
        </state-editor>
        <state-editor
          no-filters
          data-is-input
          class="ds-state-editor__options"
          value=${n.end||[]}
          name="end"
          ${yn((e=>e&&e.setEditor(t)))}
        >
          <label slot="label">End index</label>
        </state-editor>
      `},{type:'filter',id:'sort',label:'sort',validate:t=>!!t&&'list'===t.kind,output:t=>t,apply:(t,e)=>t.sort(((t,n)=>t[e.key]<n[e.key]?-1:t[e.key]>n[e.key]?1:0)),quotedOptions:['key'],options:{key:''},optionsForm:(e,n)=>{var r;return ae`
        <state-editor
          no-filters
          data-is-input
          class="ds-state-editor__options"
          value=${n.key||[]}
          name="key"
          ${yn((e=>e&&e.setEditor(t)))}
          root-type=${null!==(r=null==e?void 0:e.typeIds[0])&&void 0!==r?r:''}
        >
          <label slot="label">Key to sort on</label>
        </state-editor>
      `}},{type:'filter',id:'plus',label:'plus',validate:t=>!!t&&mn(t),output:t=>t,apply:(t,e)=>t+e.value,options:{value:0},optionsForm:(t,e)=>ae`
        <label>Value
          <input type="number" name="value" placeholder="Value" value=${e.value}/>
        </label>
      `},{type:'filter',id:'minus',label:'minus',validate:t=>!!t&&mn(t),output:t=>t,apply:(t,e)=>t-e.value,options:{value:0},optionsForm:(t,e)=>ae`
        <label>Value
          <input type="number" name="value" placeholder="Value" value=${e.value}/>
        </label>
      `},{type:'filter',id:'times',label:'times',validate:t=>!!t&&mn(t),output:t=>t,apply:(t,e)=>t*e.value,options:{value:0},optionsForm:(t,e)=>ae`
        <label>Value
          <input type="number" name="value" placeholder="Value" value=${e.value}/>
        </label>
      `},{type:'filter',id:'divided_by',label:'divided_by',validate:t=>!!t&&mn(t),output:t=>t,apply:(t,e)=>t/e.value,options:{value:0},optionsForm:(t,e)=>ae`
        <label>Value
          <input type="number" name="value" placeholder="Value" value=${e.value}/>
        </label>
      `},{type:'filter',id:'modulo',label:'modulo',validate:t=>!!t&&mn(t),output:t=>t,apply:(t,e)=>t%e.value,options:{value:0},optionsForm:(t,e)=>ae`
        <label>Value
          <input type="number" name="value" placeholder="Value" value=${e.value}/>
        </label>
      `},{type:'filter',id:'abs',label:'abs',validate:t=>!!t&&mn(t),output:t=>t,apply:t=>Math.abs(t),options:{}},{type:'filter',id:'ceil',label:'ceil',validate:t=>!!t&&mn(t),output:t=>t,apply:t=>Math.ceil(t),options:{}},{type:'filter',id:'floor',label:'floor',validate:t=>!!t&&mn(t),output:t=>t,apply:t=>Math.floor(t),options:{}},{type:'filter',id:'round',label:'round',validate:t=>!!t&&mn(t),output:t=>t,apply:t=>Math.round(t),options:{}},{type:'filter',id:'at_least',label:'at_least',validate:t=>!!t&&mn(t),output:t=>t,apply:(t,e)=>Math.max(t,e.value),options:{value:0},optionsForm:(t,e)=>ae`
        <label>Value
          <input type="number" name="value" placeholder="Value" value=${e.value}/>
        </label>
      `},{type:'filter',id:'at_most',label:'at_most',validate:t=>!!t&&mn(t),output:t=>t,apply:(t,e)=>Math.min(t,e.value),options:{value:0},optionsForm:(t,e)=>ae`
        <label>Value
          <input type="number" name="value" placeholder="Value" value=${e.value}/>
        </label>
      `},{type:'filter',id:'compact',label:'compact',validate:t=>!!t&&'list'===t.kind,output:t=>t,apply:t=>t.filter((t=>!!t)),options:{}},{type:'filter',id:'default',label:'default',validate:t=>!!t&&'scalar'===t.kind,output:t=>t,apply:(t,e)=>null!=t?t:e.value,options:{value:''},optionsForm:(e,n)=>ae`
        <state-editor
          name="value"
          data-is-input
          no-filters
          class="ds-state-editor__options"
          value=${n.value||'[]'}
          ${yn((e=>e&&e.setEditor(t)))}
        >
          <label slot="label">Default value</label>
        </state-editor>
      `},{type:'filter',id:'escape',label:'escape',validate:t=>!!t&&t.typeIds.includes('String')&&'scalar'===t.kind,output:t=>t,apply:t=>t.replace(/"/g,'\\"'),options:{}},{type:'filter',id:'escape_once',label:'escape_once',validate:t=>!!t&&t.typeIds.includes('String')&&'scalar'===t.kind,output:t=>t,apply:t=>t.replace(/"/g,'\\"'),options:{}},{type:'filter',id:'newline_to_br',label:'newline_to_br',validate:t=>!!t&&t.typeIds.includes('String')&&'scalar'===t.kind,output:t=>t,apply:t=>t.replace(/\n/g,'<br />'),options:{}},{type:'filter',id:'strip_newlines',label:'strip_newlines',validate:t=>!!t&&t.typeIds.includes('String')&&'scalar'===t.kind,output:t=>t,apply:t=>t.replace(/\n/g,''),options:{}},{type:'filter',id:'truncate',label:'truncate',validate:t=>!!t&&t.typeIds.includes('String')&&'scalar'===t.kind,output:t=>t,apply:(t,e)=>t.slice(0,e.length),options:{length:50},optionsForm:(t,e)=>ae`
        <label>Length
          <input type="number" name="length" placeholder="Length" value=${e.length}/>
        </label>
      `},{type:'filter',id:'truncatewords',label:'truncatewords',validate:t=>!!t&&t.typeIds.includes('String')&&'scalar'===t.kind,output:t=>t,apply:(t,e)=>t.split(' ').slice(0,e.length).join(' '),options:{length:15},optionsForm:(t,e)=>ae`
        <label>Length
          <input type="number" name="length" placeholder="Length" value=${e.length}/>
        </label>
      `}]}function xn(t){const e=t;if('function'==typeof e.getTypes)return t;if('function'==typeof e.attributes.getTypes)return e.attributes;throw console.error('Data source has no getTypes method',t),new Error('Data source has no getTypes method')}class _n extends e().Collection{get filters(){return this.dataTree.filters}set filters(t){this.dataTree.filters=this.filters}constructor(t,e,n){super(t,n),this.editor=e,this.options=n,this.dataChangedBinded=this.dataChanged.bind(this),this.dataSourceReadyBinded=this.dataSourceReady.bind(this),this.dataSourceErrorBinded=this.dataSourceError.bind(this),this.editor.UndoManager.add(this);const r='string'==typeof n.filters?[...bn(e)]:n.filters.flatMap((t=>{if('string'!=typeof t)return[Object.assign(Object.assign({},t),{type:'filter'})];switch(t){case'liquid':return bn(e);case'generic':return[];default:throw new Error(`Unknown filters ${t}`)}})).map((t=>Object.assign(Object.assign({},t),{type:'filter'})));this.dataTree=new tn(e,{dataSources:this.models,filters:r}),this.on('all',(()=>this.modelChanged())),this.modelChanged(),T(((t,e)=>this.editor.trigger(a,{state:t,component:e})))}getAll(){return this.models}dataChanged(t){this.editor.trigger(s,null==t?void 0:t.detail)}dataSourceReady(t){this.editor.trigger(i,null==t?void 0:t.detail)}dataSourceError(t){this.editor.trigger(o,null==t?void 0:t.detail)}modelChanged(t){this.dataTree.dataSources=this.models.map((t=>xn(t))),this.models.forEach((t=>{t.off(i,this.dataSourceReadyBinded),t.off(s,this.dataChangedBinded),t.off(o,this.dataSourceErrorBinded)})),this.models.forEach((t=>{t.on(i,this.dataSourceReadyBinded),t.on(s,this.dataChangedBinded),t.on(o,this.dataSourceErrorBinded)})),this.editor.trigger(s,null==t?void 0:t.detail)}getDataTree(){return this.dataTree}getPageQuery(t){const e=this.dataTree.getPageExpressions(t);return this.models.map((t=>{const n=e.map((t=>t.flatMap((t=>{switch(t.type){case'property':case'filter':return t;case'state':{const e=w(t.componentId,this.editor);if(!e)throw new Error(`Component ${t.componentId} not found`);const n=this.dataTree.resolveState(t,e);if(!n)throw new Error(`Unable to resolve state ${JSON.stringify(t)}`);return n}}})))).filter((e=>{if(0===e.length)return!1;return e[0].dataSourceId===t.id})),r=this.dataTree.toTrees(n,t.id);if(0===r.length)return{dataSourceId:t.id.toString(),query:''};const i=xn(t).getQuery(r);return{dataSourceId:t.id.toString(),query:i}})).filter((t=>!!t.query)).reduce(((t,{dataSourceId:e,query:n})=>(t[e]=n,t)),{})}}const wn=`\n  :root {\n    --ds-primary: #d278c9;\n    --ds-secondary: #ddd;\n    --ds-tertiary: #3d3d3d;\n    --ds-highlight: #d278c9;\n    --ds-lowlight: #363636;\n    --ds-button-color: #fff;\n    --ds-button-bg: #606060;\n    --ds-button-border: var(--ds-button-bg);\n\n    --expression-input-dirty-background-color: var(--ds-lowlight);\n    --expression-input-dirty-border-color: var(--ds-lowlight);\n    --expression-input-dirty-color: var(--ds-highlight);\n    --expression-input-active-color: var(--ds-secondary);\n    --expression-input-active-background-color: var(--ds-button-bg);\n    --popin-dialog-background: var(--ds-secondary);\n    --popin-dialog-color: var(--ds-tertiary);\n    --popin-dialog-header-background: transparent;\n    --popin-dialog-body-background: transparent;\n    --popin-dialog-footer-background: transparent;\n    --expression-input-placeholder-margin: 0 10px;\n    --expression-input-item-button-margin: 0;\n    --expression-input-item-button-padding: 2px;\n    --expression-input-item-button-border-radius: 50%;\n    --expression-input-item-button-width: 20px;\n    --expression-input-item-button-height: 20px;\n    --expression-input-item-button-background-color: transparent;\n    --expression-input-item-button-color: var(--ds-button-color);\n    --expression-input-separator-color: var(--ds-button-color);\n    --expression-input-separator-font-size: 0.7em;\n    --expression-input-separator-margin: 0;\n    --expression-input-separator-padding: 0 3px 0 1px;\n    --expression-input-item-arrow-padding: 5px 5px 0 5px;\n    --expression-input-values-li-icon-margin-right: 0;\n    /*\n    --popin-dialog-header-color: #333;\n    --popin-dialog-body-color: #666;\n    --popin-dialog-footer-color: #333;\n    --popin-dialog-header-border-bottom: none;\n    --popin-dialog-footer-border-top: none;\n    --popin-dialog-header-padding: 0;\n    --popin-dialog-body-padding: 5px;\n    --popin-dialog-footer-padding: 0;\n    */\n  }\n  .ds-state-editor__options {\n    --ds-secondary: #363636;\n    --ds-tertiary: #ffffff;\n    --ds-lowlight: #ddd;\n    --ds-button-color: #606060;\n    --ds-button-bg: #fff;\n    --expression-input-dirty-background-color: var(--ds-lowlight);\n    --expression-input-dirty-border-color: var(--ds-lowlight);\n    --expression-input-dirty-color: var(--ds-highlight);\n    --expression-input-active-color: var(--ds-secondary);\n    --expression-input-active-background-color: var(--ds-button-bg);\n  }\n  .gjs-traits-label {\n    font-family: "Ubuntu", sans-serif;\n    font-size: 0.85rem;\n    padding: 9px 10px 9px 20px;\n    text-align: left;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  expression-input {\n    padding: 10px;\n    display: block;\n  }\n  expression-input::part(separator__delete) {\n    border-right: 1px solid var(--ds-button-border);\n    height: 20px;\n  }\n  expression-input::part(add-button) {\n    background-color: rgba(255,255,255,.15);\n    border-radius: 2px;\n    padding: 3px;\n    margin: 0;\n    border: 1px solid rgba(0,0,0,.15);\n    width: 24px;\n    height: 24px;\n    box-sizing: border-box;\n    cursor: pointer;\n  }\n  expression-input::part(delete-button) {\n    margin: 0;\n    padding: 0;\n    display: flex;\n    justify-content: center;\n    color: var(--ds-button);\n  }\n  expression-input::part(header) {\n    border: none;\n  }\n  expression-input::part(type) {\n    padding-bottom: 0;\n    padding-top: 4px;\n    display: none;\n  }\n  expression-input::part(name) {\n    font-weight: normal;\n    padding-bottom: 0;\n    padding-top: 0;\n    padding-left: 5px;\n  }\n  expression-input::part(property-input) {\n    padding: 4px;\n    border: medium;\n    flex: 1 1 auto;\n    background-color: transparent;\n    color: var(--ds-secondary);\n  }\n  expression-input::part(property-container) {\n    background-color: var(--ds-lowlight);\n    border-radius: 2px;\n    box-sizing: border-box;\n    padding: 5px;\n    margin: 5px 0;\n  }\n  expression-input::part(scroll-container) {\n    overflow: auto;\n    box-sizing: border-box;\n\n    /* inner shadow to make it visible when content is overflowing */\n    box-shadow: inset 0 0 5px 0 rgba(0,0,0,.2);\n\n  }\n  expression-input::part(steps-container) {\n    display: flex;\n    align-items: center;\n    background-color: rgba(0,0,0,.2);\n    border-radius: 2px;\n    padding: 5px;\n    margin: 5px 0;\n    width: max-content;\n    min-width: 100%;\n    box-sizing: border-box;\n  }\n  expression-input::part(dirty-icon) {\n    cursor: pointer;\n    margin: 0 10px;\n    color: var(--ds-highlight);\n  }\n  expression-input::part(dirty-icon) {\n    color: var(--ds-highlight);\n    vertical-align: bottom;\n    display: inline-flex;\n    margin: 0;\n  }\n  expression-input::part(expression-input-item) {\n    border: 1px solid rgba(0,0,0,.15);\n    background-color: rgba(255,255,255,.15);\n    border-radius: 2px;\n    margin-right: 5px;\n  }\n  .ds-section details {\n    margin: 2px;\n    padding: 10px;\n    padding-top: 0;\n    background-color: transparent;\n    border-radius: 2px;\n    color: var(--ds-secondary);\n    text-align: left;\n  }\n  .ds-section details[open] {\n    background-color: var(--ds-tertiary);\n  }\n  .ds-section details summary {\n    color: var(--ds-secondary);\n    cursor: pointer;\n    padding: 10px 0;\n  }\n  .ds-section details a {\n    color: var(--ds-link-color);\n  }\n  .ds-section .gjs-traits-label {\n    background-color: var(--ds-tertiary);\n  }\n  .ds-section main {\n    display: flex;\n    flex-direction: column;\n  }\n  .ds-slot-fixed {\n    width: 100%;\n  }\n  .ds-section select {\n    width: 150px;\n    flex: 0;\n    margin: 5px;\n    padding: 5px;\n    background-color: var(--ds-tertiary);\n    border-radius: 2px;\n    color: var(--ds-secondary);\n    border: 1px solid rgba(0,0,0,.15);\n    cursor: pointer;\n    font-size: medium;\n  }\n  .ds-section input.ds-expression-input__fixed {\n    color: var(--ds-secondary);\n    padding: 10px;\n    border: none;\n    background-color: transparent;\n    width: 100%;\n  }\n  .ds-section .ds-expression-input__add {\n    max-width: 40px;\n    text-align: center;\n    font-size: large;\n    padding-right: 9px;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    text-indent: 1px;\n    text-overflow: '';\n  }\n  .ds-section .ds-expression-input__add option {\n    font-size: medium;\n  }\n  .ds-section .ds-expression-input__options-button {\n    background-color: transparent;\n    border: none;\n    color: var(--ds-secondary);\n    cursor: pointer;\n    padding: 0;\n    margin: 10px;\n    margin-left: 0;\n  }\n  .ds-section label.ds-label {\n    display: flex;\n    align-items: center;\n    padding: 10px;\n    color: var(--ds-secondary);\n  }\n  .ds-section label.ds-label--disabled {\n    justify-content: space-between;\n  }\n  .ds-section label.ds-label--disabled .ds-label__message {\n    opacity: .5;\n  }\n  /* States CSS Styles */\n  .ds-states {\n    display: flex;\n    flex-direction: column;\n  }\n  .ds-states__buttons {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-end;\n    margin: 0 5px;\n  }\n  .ds-states__button {\n    cursor: pointer;\n    border: 1px solid var(--ds-button-border);\n    border-radius: 2px;\n    padding: 5px;\n    background: var(--ds-button-bg);\n    color: var(--ds-button-color);\n    flex: 1;\n    margin: 5px;\n    max-width: 40px;\n  }\n  .ds-states__button--disabled {\n    opacity: 0.5;\n    cursor: default;\n  }\n  .ds-states__remove-button {\n    margin-left: 1em;\n  }\n  .ds-states__sep {\n    width: 100%;\n    border: none;\n    height: 1px;\n    background: var(--ds-button-bg);\n  }\n  .ds-section select.ds-visibility__condition-operator {\n    margin: 10px;\n  }\n`,$n=t=>(e,n)=>{void 0!==n?n.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)},kn={attribute:!0,type:String,converter:Y,reflect:!1,hasChanged:Z},En=(t=kn,e,n)=>{const{kind:r,metadata:i}=n;let o=globalThis.litPropertyMetadata.get(i);if(void 0===o&&globalThis.litPropertyMetadata.set(i,o=new Map),o.set(n.name,t),"accessor"===r){const{name:r}=n;return{set(n){const i=e.get.call(this);e.set.call(this,n),this.requestUpdate(r,i,t)},init(e){return void 0!==e&&this.C(r,void 0,t),e}}}if("setter"===r){const{name:r}=n;return function(n){const i=this[r];e.call(this,n),this.requestUpdate(r,i,t)}}throw Error("Unsupported decorator location: "+r)};function Sn(t){return(e,n)=>"object"==typeof n?En(t,e,n):((t,e,n)=>{const r=e.hasOwnProperty(n);return e.constructor.createProperty(n,r?{...t,wrapped:!0}:t),r?Object.getOwnPropertyDescriptor(e,n):void 0})(t,e,n)}const Tn=L`
  ::part(header) {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
  }
  .fixed .hide-when-fixed,
  :not(.fixed) .show-when-fixed {
    visibility: hidden;
    position: absolute;
    top: -9999px;
    left: -9999px;
    display: none;
  }
  label {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: var(--input-chain-label-font-size, 1rem);
  }
  .dirty {
    color: var(--expression-input-dirty-color, red);
    cursor: pointer;
  }
  ::part(fixed) {
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: center;
    overflow-x: auto;
    width: 100%;
  }
  ::part(dirty-icon) {
    display: inline-block;
    width: 1rem;
  }
  ::part(property-container) {
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: center;
    overflow-x: auto;
    padding: 10px;
  }
  ::part(fixed-selector) {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    border: 1px solid var(--expression-input-dirty-border-color, #ccc);
    background-color: var(--expression-input-dirty-background-color, #ccc);
    border-radius: var(--expression-input-dirty-border-radius, 3px);
    padding: 3px;
  }
  ul[slot="tags"] {
    margin: 0;
    padding: 0;
    list-style: none;
  }
  /* an arrow between elements */
  .steps-container__separator {
    display: inline;
  }
  .steps-container__separator::after {
    content: "▶";
    color: var(--expression-input-separator-color, #333);
    font-size: var(--expression-input-separator-font-size, 1.5em);
    margin: var(--expression-input-separator-margin, 0);
    padding: var(--expression-input-separator-padding, 0);
  }
  /* selector between fixed value (text input) and steps */
  .fixed-selector span {
    padding: 4px 4px 2px 4px;
    font-size: small;
  }
  .fixed-selector span:not(.active):hover {
    color: var(--expression-input-dirty-color, #0091ff);
  }
  .fixed-selector span:not(.active) {
    cursor: pointer;
  }
  .fixed-selector span:last-child {
    margin-left: 5px;
  }
  .fixed-selector span.active {
    border-radius: var(--expression-input-active-border-radius, 3px);
    background-color: var(--expression-input-active-background-color, #eee);
    color: var(--expression-input-active-color, #333);
    cursor: default;
  }
  ul.values-ul {
    list-style: none;
    padding: var(--expression-input-values-ul-padding, 0);
    margin: var(--expression-input-values-ul-margin, 0);
    color: var(--expression-input-values-ul-color, #000);
    background-color: var(--expression-input-values-ul-background-color, transparent);
  }
  li.values-li {
    padding: var(--expression-input-values-li-padding, 5px);
    margin: var(--expression-input-values-li-margin, 0);
    background-color: var(--expression-input-values-li-background-color, transparent);
    border-bottom: var(--expression-input-values-li-border, 1px solid #ccc);
    cursor: pointer;
    display: flex;
    justify-content: space-between;
  }
  li.values-li:last-child {
    border-bottom: none;
  }
  li.values-li:hover {
    background-color: var(--expression-input-values-li-hover-background-color, #eee);
  }
  li.values-li.active {
    background-color: var(--expression-input-values-li-active-background-color, #ccc);
    font-weight: var(--expression-input-values-li-active-font-weight, bold);
  }
  li.values-li.values__title {
    /* Display this line as an array title */
    color: var(--expression-input-values-li-title-color, #333);
    background-color: var(--expression-input-values-li-background-color, #eee);
    text-transform: var(--expression-input-values-li-title-text-transform, uppercase);
    cursor: default;
  }
  li.values-li.values__title .values__name {
    margin: var(--expression-input-values-li-title-margin, auto);
  }
  li.values-li .values__icon {
    margin-right: var(--expression-input-values-li-icon-margin-right, 5px);
  }
  li.values-li .values__name {
    margin-right: var(--expression-input-values-li-name-margin-right, 25px);
  }
  li.values-li .values__type {
    color: var(--expression-input-values-li-type-color, #999);
    width: max-content;
  }
  .placeholder > * {
    color: var(--expression-input-placeholder-color, #999);
    font-style: var(--expression-input-placeholder-font-style, italic);
    margin: var(--expression-input-placeholder-margin, 10px 0);
  }
`,An=(L`
  :host {
    display: inline-flex;
    flex-direction: column;
    flex-shrink: 0;
  }
  :host header {
    position: relative;
    display: flex;
    flex-direction: row;
    align-items: center;
    border: solid 1px gray;
  }
  :host .value {
    display: flex;
    align-items: center;
  }
  :host .buttons {
    display: flex;
    align-items: center;
  }
  :host .button {
    border: none;
    background-color: transparent;
  }
  :host .svg-icon {
    border: var(--expression-input-item-button-border, none);
    cursor: pointer;
    margin: var(--expression-input-item-button-margin, 3px);
    padding: var(--expression-input-item-button-padding, 3px);
    border-radius: var(--expression-input-item-button-border-radius, 50%);
    width: var(--expression-input-item-button-width, 20px);
    height: var(--expression-input-item-button-height, 20px);
    background-color: var(--expression-input-item-button-background-color, transparent);
  }
  /* button svg path white and size 10px
  */
  :host .svg-icon svg path {
    fill: var(--expression-input-item-button-color, #333);
  }
  /*
  :host popin-form {
    position: absolute;
  }
  */
  slot[name="helpTitle"] {
    display: flex;
    align-items: center;
    width: 20px;
    height: 20px;
  }
  slot[name="name"] {
    font-weight: bold;
    cursor: pointer;
  }
  ::slotted([slot="name"]), ::slotted([slot="type"]) {
    cursor: pointer;
    flex-shrink: 0;
  }
  ::slotted([slot="name"]) {
    font-weight: var(--expression-input-item-name-font-weight, bold);
    font-size: var(--expression-input-item-name-font-size, 1rem);
    padding: var(--expression-input-item-name-padding, 5px);
  }
  ::slotted([slot="type"]), ::slotted([slot="type"]) {
    font-weight: var(--expression-input-item-type-font-weight, normal);
    font-size: var(--expression-input-item-type-font-size, 0.8rem);
    padding: var(--expression-input-item-type-padding, 5px);
  }
  .with-arrow::after {
    content: "▼";
    float: right;
    padding: var(--expression-input-item-arrow-padding, 5px);
  }
`,L`
  :host {
    display: inline-block;
    position: fixed;
    max-width: 100vw;
    max-height: 80vh;
    box-sizing: border-box;
    z-index: 1000; /* Ensure it's on top of other content */
    border-radius: var(--popin-form-border-radius, 3px);
    overflow: hidden; /* To ensure border-radius applies to children elements */
    overflow-y: auto;
    outline: none;
    border: var(--popin-form-border, 1px solid #ccc);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    display: inline-flex;
    flex-direction: column;
    background-color: var(--popin-form-background, #fff);
    color: var(--popin-form-color, #000);
  }
  :host([hidden]) {
    display: none !important;
  }

  header {
    border-bottom: var(--popin-form-header-border-bottom, #f5f5f5);
    background-color: var(--popin-form-header-background, transparent);
    padding: var(--popin-form-header-padding, 0);
    color: var(--popin-form-header-color, #000);
  }

  footer {
    border-top: var(--popin-form-footer-border-top, 1px solid #f5f5f5);
    display: flex;
    justify-content: flex-end;
    background-color: var(--popin-form-footer-background, transparent);
    padding: var(--popin-form-footer-padding);
    color: var(--popin-form-footer-color, #000);
  }

  button {
    border: var(--popin-button-border, 1px solid #ccc);
    border-radius: var(--popin-button-border-radius, 3px);
    background-color: var(--popin-button-background, #f5f5f5);
    color: var(--popin-button-color, #000);
    padding: var(--popin-button-padding, 5px);
    margin: var(--popin-button-margin, 5px);
    cursor: pointer;
  }

  button:hover {
    background-color: var(--popin-button-hover-background, #eee);
    color: var(--popin-button-hover-color, #000);
    border: var(--popin-button-border, 1px solid #ccc);
    padding: var(--popin-button-hover-padding, 5px);
    margin: var(--popin-button-hover-margin, 5px);
  }

  button.secondary {
    background-color: var(--popin-button-background--secondary, transparent);
    color: var(--popin-button-color--secondary, #000);
    border: var(--popin-button-border--secondary, none);
    padding: var(--popin-button-padding--secondary, 5px);
    margin: var(--popin-button-margin--secondary, 5px);
  }

  button.secondary:hover {
    background-color: var(--popin-button-hover-background--secondary, #eee);
    color: var(--popin-button-hover-color--secondary, #000);
    border: var(--popin-button-hover-border--secondary, none);
    padding: var(--popin-button-hover-padding--secondary, 5px);
    margin: var(--popin-button-hover-margin--secondary, 5px);
  }

  main {
    background-color: var(--popin-form-body-background, transparent);
    padding: var(--popin-form-body-padding, 5px);
    color: var(--popin-form-body-color, #000);
    display: flex;
    flex-direction: column;
  }

  ::slotted([slot="header"]) {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  ::slotted([slot="body"]) * {
    background: red !important;
  }
`);var Cn=void 0&&(void 0).__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};let jn=class extends ke{constructor(){super(...arguments),this.hidden=!1,this.noAutoClose=!1,this.resized_=this.ensureElementInView.bind(this),this.blured_=this.blured.bind(this),this.keydown_=this.keydown.bind(this)}render(){return setTimeout((()=>this.ensureElementInView())),ae`
      <slot></slot>
    `}connectedCallback(){super.connectedCallback(),this.setAttribute('tabindex','0'),this.addEventListener('blur',this.blured_),this.addEventListener('keydown',this.keydown_),window.addEventListener('resize',this.resized_),window.addEventListener('blur',this.blured_)}disconnectedCallback(){window.removeEventListener('resize',this.resized_),window.removeEventListener('blur',this.blured_),this.removeEventListener('blur',this.blured_),this.removeEventListener('keydown',this.keydown_),super.disconnectedCallback()}getActiveElementRecursive(t=document.activeElement){return(null==t?void 0:t.shadowRoot)?this.getActiveElementRecursive(t.shadowRoot.activeElement):t}blured(){this.noAutoClose||setTimeout((()=>{let t=this.getActiveElementRecursive();for(;t&&t!==this;)t=t.parentNode||t.host;t!==this&&this.close()}))}close(){this.setAttribute('hidden',''),this.blur()}keydown(t){'Escape'===t.key&&this.close()}attributeChangedCallback(t,e,n){super.attributeChangedCallback(t,e,n),'hidden'===t&&null===n&&(this.focus(),this.dispatchEvent(new CustomEvent('popin-opened'))),'hidden'===t&&null!==n&&this.dispatchEvent(new CustomEvent('popin-closed'))}ensureElementInView(){var t;const e=null===(t=this.parentElement)||void 0===t?void 0:t.getBoundingClientRect();this.style.left=`${null==e?void 0:e.left}px`,this.style.top=`${null==e?void 0:e.top}px`;const n=0,r=0,i=this.getBoundingClientRect(),o=window.innerWidth,s=window.innerHeight;i.left+i.width+n>o&&(this.style.left=`${o-i.width-n}px`),i.left+n<0&&(this.style.left=`${-n}px`),i.top+i.height+r>s&&(this.style.top=`${s-i.height-r}px`),i.top+r<0&&(this.style.top=`${-r}px`)}};jn.styles=An,Cn([Sn()],jn.prototype,"hidden",void 0),Cn([Sn({type:Boolean,attribute:'no-auto-close'})],jn.prototype,"noAutoClose",void 0),jn=Cn([$n('popin-overlay')],jn);var On=void 0&&(void 0).__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};let In=class extends jn{constructor(){super(...arguments),this.for='',this.name='',this.formData=new FormData,this.onFormdata_=this.onFormdata.bind(this),this.slotChanged_=this.slotChanged.bind(this),this._form=null,this.inputs=[]}set form(t){this._form&&this._form.removeEventListener('formdata',this.onFormdata_),t&&t.addEventListener('formdata',this.onFormdata_)}get form(){return this._form}get value(){return this.updateFormData(),Object.fromEntries(this.formData.entries())}render(){return super.render(),ae`
    <form @submit=${this.submit} @change=${this.change}>
      <header>
        <slot class="header" name="header"></slot>
      </header>
      <main>
        <slot class="body" part="body"></slot>
      </main>
      <footer>
        <slot class="footer" name="footer">
          <button type="button" class="secondary" @click=${this.close}>Cancel</button>
          <button type="submit">Apply</button>
        </slot>
      </footer>
    </form>
    `}connectedCallback(){if(super.connectedCallback(),this.for){const t=document.querySelector(`form#${this.for}`);t&&(this.form=t)}else this.form=this.closest('form');this.shadowRoot.addEventListener('slotchange',this.slotChanged_),this.slotChanged()}disconnectedCallback(){this.removeEventListener('slotchange',this.slotChanged_),this.form=null,super.disconnectedCallback()}slotChanged(){this.inputs=Array.from(this.querySelectorAll('input, select, textarea, [data-is-input]'))}onFormdata(t){t.preventDefault();const e=t.formData;for(const[t,n]of this.formData.entries())e.set(`${this.name}-${t}`,n)}updateFormData(){this.formData=new FormData;for(const t of this.inputs)this.formData.set(t.getAttribute('name'),t.value)}submit(t){t.preventDefault(),t.stopImmediatePropagation(),this.updateFormData(),this.close(),this.dispatchEvent(new Event('change'))}change(t){t.target.closest(this.tagName)===this&&(t.preventDefault(),t.stopImmediatePropagation())}};On([Sn({type:String,attribute:'for'})],In.prototype,"for",void 0),On([Sn({type:String})],In.prototype,"name",void 0),In=On([$n('popin-form')],In);const Nn="important",Rn=" !"+Nn,Dn=on(class extends sn{constructor(t){if(super(t),t.type!==nn||"style"!==t.name||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,n)=>{const r=t[n];return null==r?e:e+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(t,[e]){const{style:n}=t.element;if(void 0===this.ut)return this.ut=new Set(Object.keys(e)),this.render(e);for(const t of this.ut)null==e[t]&&(this.ut.delete(t),t.includes("-")?n.removeProperty(t):n[t]=null);for(const t in e){const r=e[t];if(null!=r){this.ut.add(t);const e="string"==typeof r&&r.endsWith(Rn);t.includes("-")||e?n.setProperty(t,e?r.slice(0,-11):r,e?Nn:""):n[t]=r}}return $t}}),Mn=on(class extends sn{constructor(t){if(super(t),t.type!==nn||"class"!==t.name||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){if(void 0===this.it){this.it=new Set,void 0!==t.strings&&(this.st=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in e)e[t]&&!this.st?.has(t)&&this.it.add(t);return this.render(e)}const n=t.element.classList;for(const t of this.it)t in e||(n.remove(t),this.it.delete(t));for(const t in e){const r=!!e[t];r===this.it.has(t)||this.st?.has(t)||(r?(n.add(t),this.it.add(t)):(n.remove(t),this.it.delete(t)))}return $t}});var Pn=void 0&&(void 0).__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};let Hn=class extends ke{get selectTagName(){return this._selectTagName}set selectTagName(t){this._selectTagName=t,this.SELECT_QUERY=`:scope > ${this._selectTagName}`,this.OPTION_QUERY=`:scope > ${this._selectTagName} > ${this._optionTagName}, :scope > ${this._selectTagName} > optgroup > ${this._optionTagName}`,this.requestUpdate()}get optionTagName(){return this._optionTagName}set optionTagName(t){this._optionTagName=t,this.OPTION_QUERY=`:scope > ${this._selectTagName} > ${t}, :scope > ${this._selectTagName} > optgroup > ${t}`,this.requestUpdate()}constructor(){super(),this.SELECT_QUERY=':scope > select, :scope > custom-select',this.OPTION_QUERY=':scope > select > option, :scope > select > optgroup > option, :scope > custom-select > custom-option',this.for='',this.name='',this.reactive=!1,this._selectTagName='select',this._optionTagName='option',this._form=null,this.onChange_=this.onChangeValue.bind(this),this.onFormdata=t=>{if(!this.name)throw new Error('Attribute name is required for input-chain');this.options.filter((t=>t.selected)).forEach((e=>{t.formData.append(this.name,e.value)}))},this.redrawing=!1}set form(t){this._form&&this._form.removeEventListener('formdata',this.onFormdata),t&&t.addEventListener('formdata',this.onFormdata)}get form(){return this._form}get options(){return Array.from(this.querySelectorAll(this.OPTION_QUERY))}render(){return ae`
      <slot></slot>
    `}connectedCallback(){if(super.connectedCallback(),this.for){const t=document.querySelector(`form#${this.for}`);t&&(this.form=t)}else this.form=this.closest('form');this.shadowRoot.addEventListener('change',this.onChange_)}disconnectedCallback(){this.shadowRoot.removeEventListener('change',this.onChange_),this.form=null,super.disconnectedCallback()}onChangeValue(t){const e=t.target,n=Array.from(this.querySelectorAll(this.SELECT_QUERY));n.includes(e)&&(this.changeAt(n.indexOf(e)),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),this.requestUpdate())}changeAt(t,e=!1){if(!this.redrawing){if(this.redrawing=!0,this.reactive){if(e){Array.from(this.querySelectorAll(':scope > select, :scope > custom-select'))[0].value=''}this.dispatchEvent(new CustomEvent('change',{detail:{idx:t}}))}else{const e=Array.from(this.querySelectorAll(':scope > select, :scope > custom-select')),n=t>=0?e[t]:e[0],r=(null==n?void 0:n.value)?e[t+1]:n||e[0],i=(null==n?void 0:n.value)?t+1:t;r&&(e.slice(i+1).forEach((t=>t.remove())),r.value=''),this.dispatchEvent(new Event('change'))}this.redrawing=!1}}};Hn.styles=Tn,Pn([Sn({type:String,attribute:'for'})],Hn.prototype,"for",void 0),Pn([Sn({type:String})],Hn.prototype,"name",void 0),Pn([Sn({type:Boolean})],Hn.prototype,"reactive",void 0),Pn([Sn({type:String,attribute:'select-tag-name'})],Hn.prototype,"selectTagName",null),Pn([Sn({type:String,attribute:'option-tag-name'})],Hn.prototype,"optionTagName",null),Pn([Sn({type:Array})],Hn.prototype,"options",null),Hn=Pn([$n('input-chain')],Hn);var Ln=void 0&&(void 0).__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};let qn=class extends Hn{constructor(){super(...arguments),this.allowFixed=!0,this._fixed=!1,this.placeholder='Enter a fixed value or switch to expression'}get dirty(){return this.value.length>0}get value(){var t;return this.fixed?[null===(t=this.getFixedInput())||void 0===t?void 0:t.value].filter((t=>!!t)):this.options.filter((t=>t.selected&&t.value)).map((t=>t.value))}get fixed(){return this._fixed}set fixed(t){this._fixed=t,this.dispatchEvent(new Event('fixedChange'))}connectedCallback(){super.connectedCallback()}render(){const t=this.dirty;return ae`
      <!-- header -->
      <header part="header" class="header">
        <label>
          <div class=${Mn({dirty:t,'property-name':!0})} part="property-name">
            <slot name="label"></slot>
            ${t?ae`
              <slot name="dirty-icon" part="dirty-icon" class="dirty-icon" @click=${this.reset}>
                <svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
              </slot>
            `:ae``}
          </div>
          ${this.allowFixed?ae`
            <div part="fixed-selector" class="fixed-selector">
              <span
                class=${Mn({active:this.fixed,'fixed-selector-fixed':!0})}
                @click=${()=>this.fixed=!0}
                part="fixed-selector-fixed"
              >Fixed</span>
              <span
                class=${Mn({active:!this.fixed,'fixed-selector-expression':!0})}
                @click=${()=>this.fixed=!1}
                part="fixed-selector-expression"
              >Expression</span>
            </div>
          `:ae``}
        </label>
      </header>
      <div part="property-container" class=${Mn({'property-container':!0,fixed:this.fixed})}>
        <slot class="hide-when-fixed">${this.options.length?'':this.placeholder}</slot>
        <slot name="fixed" part="fixed" class="show-when-fixed"></slot>
      </div>
    `}reset(){if(this.fixed){const t=this.getFixedInput();if(!t)throw new Error('Input not found for fixed value');t.value=''}else this.changeAt(0,!0);this.dispatchEvent(new Event('change')),this.requestUpdate()}getFixedInput(){return this.querySelector('input, textarea')}};function Un(t,e){if(!t)throw console.error('Component is required for context'),new Error('Component is required for context');const n=e.queryables.map((t=>{if(!t.dataSourceId)throw new Error(`Type ${t.id} has no data source`);return Fn(t)})),r=[],i=[];let o=t;for(;o;){r.push(...C(o,!0).map((t=>{var e;return{type:'state',storedStateId:t,label:(null===(e=O(o,t,!0))||void 0===e?void 0:e.label)||t,componentId:_(o),exposed:!0}})));const t=O(o,'__data',!1);if(t){const n=Oe(t.expression,o,e);n?'list'===n.kind?i.push({type:'state',storedStateId:'__data',componentId:_(o),exposed:!1,forceKind:'object',label:n.label},{type:'property',propType:'field',fieldId:'loopindex0',label:'Loop index (0 based)',kind:'scalar',typeIds:['number']},{type:'property',propType:'field',fieldId:'loopindex',label:'Loop index (starts at 1)',kind:'scalar',typeIds:['number']}):console.warn('Loop data is not a list for component',o,'and state',t):console.warn('Loop data type not found for component',o,'and state',t)}o=o.parent()}const s=e.filters.filter((t=>t.validate(null)));return[...n,...r,...i,...s]}function Fn(t){var e;if(!t)throw new Error('Field is required for token');if(!t.dataSourceId)throw new Error(`Field ${t.id} has no data source`);return Object.assign({type:'property',propType:'field',fieldId:t.id,label:t.label,typeIds:t.typeIds,dataSourceId:t.dataSourceId,kind:t.kind},null!==(e=Ie(t))&&void 0!==e?e:{})}function Bn(t,e,n,r){if(!t)throw new Error('Component is required for completion');if(!e)throw new Error('Expression is required for completion');if(0===e.length){if(r){const t=n.getType(r,null);return t?t.fields.map((t=>Fn(t))):(console.warn('Root type not found',r),[])}return Un(t,n)}const i=Oe(e,t,n);return i?[].concat('object'===i.kind?i.typeIds.map((t=>{var e;return n.getType(t,null!==(e=i.dataSourceId)&&void 0!==e?e:null)})).flatMap((t=>{var e;return null!==(e=null==t?void 0:t.fields)&&void 0!==e?e:[]})).flatMap((t=>t.typeIds.map((e=>Object.assign(Object.assign({},Fn(t)),{typeIds:[e]}))))):[]).concat(n.filters.filter((t=>t.validate(i)))):(console.warn('Result type not found for expression',e),[])}Ln([Sn({type:Boolean,attribute:'allow-fixed'})],qn.prototype,"allowFixed",void 0),Ln([Sn({type:Boolean,attribute:'fixed',reflect:!0})],qn.prototype,"fixed",null),Ln([Sn()],qn.prototype,"placeholder",void 0),qn=Ln([$n('expression-input')],qn);var zn=void 0&&(void 0).__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},Wn=void 0&&(void 0).__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let Vn=class extends ke{constructor(){super(...arguments),this.disabled=!1,this.name='',this.noFilters=!1,this.rootType='',this._data=[],this.editor=null,this.redrawing=!1,this.expressionInputRef=fn(),this.popinsRef=[]}get value(){return JSON.stringify(this.data)}set value(t){try{this.data=JSON.parse(t)}catch(e){this.data=t}}get data(){const t=this.expressionInputRef.value;if(!t)return[];if(t.fixed)return[Fe(t.value[0]||'')];return t.value.filter((t=>!!t)).map((t=>We(this.editor,t))).map(((t,e)=>{var n;const r=null===(n=this.popinsRef[e])||void 0===n?void 0:n.value;switch(t.type){case'property':case'filter':t.options=(null==r?void 0:r.value)||t.options}return t}))}set data(t){this._data='string'==typeof t?''===t?[]:[Fe(t)]:t,this.requestUpdate()}setEditor(t){this.editor||(this.editor=t)}render(){var t,e;this.redrawing=!0,super.render();const n=null===(t=this.editor)||void 0===t?void 0:t.getSelected();if(!this.editor)throw new Error('editor not set');if(!n)throw new Error('no selected component');if(!this.name)throw new Error('name is required on state-editor');const r=this.editor.DataSourceManager.getDataTree(),i=this._data,o=1===(null==i?void 0:i.length)&&'property'===i[0].type&&i[0].fieldId===Ue,s=o&&(null===(e=i[0].options)||void 0===e?void 0:e.value)||'',a=Bn(n,i||[],r,this.rootType),l=this.noFilters?a.filter((t=>'filter'!==t.type)):a,u=qe(this.editor,n,l,i),c=ae`
      <expression-input
        @change=${t=>this.onChangeValue(t)}
        data-is-input
        ${yn(this.expressionInputRef)}
        .fixed=${o}
        class="ds-section"
        name=${this.name}
        reactive
      >
        <style>
          ${wn}
        </style>
        <slot name="label" slot="label"></slot>
        <div slot="fixed" class="ds-slot-fixed">
          <input
            type="text"
            class="ds-expression-input__fixed"
            placeholder="Enter a text or switch to expression mode"
            value=${s}
            />
        </div>
        ${i&&i.length>0?ae`
          ${i.map(((t,e)=>{this.popinsRef[e]=fn();const o=this.getOptions(n,i,e),s=i.slice(0,e),a=Bn(n,s,r,this.rootType),l=this.noFilters?a.filter((t=>'filter'!==t.type)):a,u=qe(this.editor,n,l,i.slice(0,e)),c=ze(t);return ae`
              <select>
                <option value="">-</option>
                ${Object.entries(u).reverse().map((([t,e])=>ae`
                      <optgroup label="${t}">
                      ${e.map((t=>{const e=ze(t);return ae`
                            <option value=${Be(t)} .selected=${e===c}>${Le(n,t)}</option>
                          `}))}
                      </optgroup>
                    `))}
              </select>
              <button
                class="ds-expression-input__options-button"
                style=${Dn({display:''===o?'none':''})}
                @click=${()=>{var t;null===(t=this.popinsRef[e].value)||void 0===t||t.removeAttribute('hidden')}}
              >...</button>
              <popin-form
                ${yn(this.popinsRef[e])}
                hidden
                name=${`${this.name}_options_${e}`}
                @change=${t=>this.onChangeOptions(t,n,this.popinsRef[e].value,e)}
              >
                ${o}
              </popin-form>
              `}))}
        `:''}
        ${Object.entries(u).length?ae`
          <select
            class="ds-expression-input__add"
            ${yn((t=>t&&(t.value='')))}
            >
            <option value="" selected>+</option>
            ${Object.entries(u).reverse().map((([t,e])=>ae`
                    <optgroup label="${t}">
                    ${e.map((t=>ae`<option value="${Be(t)}">${Le(n,t)}</option>`))}
                    </optgroup>
                `))}
          </select>
      `:''}
      </expression-input>
    `;return this.redrawing=!1,c}onChangeValue(t){var e;if(this.redrawing)return;const n=null===(e=t.detail)||void 0===e?void 0:e.idx;n>=0&&(this.data=this.data.slice(0,n+1)),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),this.dispatchEvent(new Event('change',{bubbles:!0}))}onChangeOptions(t,e,n,r){if(this.redrawing)return;const i=this.expressionInputRef.value,o=i.value.filter((t=>!!t)).map((t=>We(this.editor,t))),s=i.options.filter((t=>t.selected));o[r].options=n.value,s[r].value=Be(o[r]),this.requestUpdate(),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),this.dispatchEvent(new Event('change',{bubbles:!0}))}getOptions(t,e,n){const r=this.editor.DataSourceManager.getDataTree(),i=e[n],o=e.slice(0,n).map((n=>Oe(e.concat(n),t,r)));switch(i.type){case'property':case'filter':if(i.optionsForm){return i.optionsForm(o[o.length-1],i.options||{})||''}return'';default:return''}}};zn([Sn({type:Boolean}),Wn("design:type",Object)],Vn.prototype,"disabled",void 0),zn([Sn({type:String}),Wn("design:type",Object)],Vn.prototype,"name",void 0),zn([Sn({type:Boolean,attribute:'no-filters'}),Wn("design:type",Object)],Vn.prototype,"noFilters",void 0),zn([Sn({type:String,attribute:'root-type'}),Wn("design:type",Object)],Vn.prototype,"rootType",void 0),zn([Sn(),Wn("design:type",String),Wn("design:paramtypes",[String])],Vn.prototype,"value",null),Vn=zn([$n('state-editor')],Vn);var Qn=void 0&&(void 0).__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},Jn=void 0&&(void 0).__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let Gn=class extends ke{constructor(){super(...arguments),this.disabled=!1,this.inputs={innerHTML:void 0,condition:void 0,condition2:void 0,__data:void 0},this.editor=null,this.redrawing=!1}setEditor(t){this.editor?console.warn('property-editor setEditor already set'):(this.editor=t,this.editor.on('page',(()=>this.requestUpdate())),this.editor.on('component:selected',(()=>this.requestUpdate())),this.editor.on('component:update',(()=>this.requestUpdate())))}render(){var t;super.render(),this.redrawing=!0;const e=null===(t=this.editor)||void 0===t?void 0:t.getSelected(),n=ae`
      <style>
        ${wn}
      </style>
      <slot></slot>
    `,r=ae`
      ${n}
      <p class="ds-empty">Select an element to edit its properties</p>
    `;if(!this.editor||this.disabled)return this.resetInputs(),this.redrawing=!1,ae``;if(!e||'body'===e.get('tagName'))return this.resetInputs(),this.redrawing=!1,r;const i=ae`
      ${n}
      <section class="ds-section">
        <div>
          <div class="gjs-traits-label">Properties</div>
        </div>
        <details class="ds-states__help">
          <summary>Help</summary>
          Elements properties are expressions that can replace the HTML attributes of the element or it's whole content (innerHTML).
          <a target="_blank" href="https://docs.silex.me/en/user/cms#element-properties">Learn more about element properties</a>
        </details>
        <main>
          ${[{label:'Content (innerHTML)',name:p.innerHTML,publicState:!1}].map((({label:t,name:n,publicState:r})=>this.renderStateEditor(e,t,n,r)))}
        </main>
      </section>
      <section class="ds-section">
        <div>
          <div class="gjs-traits-label">Visibility</div>
        </div>
        <main>
          ${this.renderStateEditor(e,'Condition',p.condition,!1)}
          <div>
          <span>... is</span>
          <select
            class="ds-visibility__condition-operator"
            @change=${t=>{const n=t.target.value;if(!n)throw new Error('Selection required for operator select element');e.set('conditionOperator',n),this.requestUpdate()}}
          >
          </div>
          ${Object.values(c).concat(Object.values(d)).map((t=>ae`
                <option value="${t}" .selected=${e.get('conditionOperator')===t} >${t}</option>
              `))}
          </select>
          ${e.has('conditionOperator')&&Object.values(d).includes(e.get('conditionOperator'))?this.renderStateEditor(e,'Condition 2',p.condition2,!1):''}
        </main>
      </section>
      <section class="ds-section">
        <div>
          <label class="gjs-traits-label ds-label">Repeat</label>
        </div>
        <main>
          ${this.renderStateEditor(e,'Data',p.__data,!1)}
        </main>
      </section>
    `;return this.redrawing=!1,i}resetInputs(){this.inputs={innerHTML:void 0,condition:void 0,condition2:void 0,__data:void 0}}renderStateEditor(t,e,n,r){return ae`
      <state-editor
        id="${n}"
        name=${n}
        ${yn((e=>{if(e){const t=e;t.setEditor(this.editor),this.inputs[n]||(this.inputs[n]={stateEditor:t,selected:void 0})}if(this.inputs[n]){const e=this.inputs[n].stateEditor;this.redrawing=!0,e.data=this.getTokens(this.editor.DataSourceManager.getDataTree(),t,n,r),this.redrawing=!1,this.inputs[n].selected=t}}))}
        @change=${()=>this.onChange(t,n,r)}
        .disabled=${this.disabled}
      >
        <label slot="label">${e}</label>
      </state-editor>
    `}onChange(t,e,n){const{stateEditor:r}=this.inputs[e];this.redrawing||I(t,e,{expression:r.data},n)}getTokens(t,e,n,r){const i=O(e,n,r);return i&&i.expression?i.expression.map((e=>Te(e,t))):[]}};Qn([Sn({type:Boolean}),Jn("design:type",Object)],Gn.prototype,"disabled",void 0),Gn=Qn([$n('properties-editor')],Gn);var Kn,Xn=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Yn=void 0&&(void 0).__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},Zn=void 0&&(void 0).__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){t["States"]="states",t["Attributes"]="attributes"}(Kn||(Kn={}));let tr=class extends ke{constructor(){super(...arguments),this.disabled=!1,this.type=Kn.States,this.title='Custom states',this.editor=null,this.redrawing=!1}setEditor(t){this.editor?console.warn('property-editor setEditor already set'):(this.editor=t,this.editor.on('page',(()=>this.requestUpdate())),this.editor.on('component:selected',(()=>this.requestUpdate())),this.editor.on('component:update',(()=>this.requestUpdate())))}getHead(t){return ae`
      <style>
        ${wn}
      </style>
      <slot></slot>
      <section class="ds-section">
        <div>
          <div class="gjs-traits-label">
            <span>${this.title}</span>
            ${t?ae`
            <button
              title="Add a new state"
              class="ds-states__add-button ds-states__button"
              @click=${()=>{const e=this.createCustomState(t);e&&this.setState(t,e.name,e.state)}}
              >+</button>
            `:''}
          </div>
        </div>
        <details class="ds-states__help">
          <summary>Help</summary>
          Custom states are used to store data in the component.
          They are useful to store data that is not displayed in the page, but that is used in the expressions of the properties section bellow.
          <a target="_blank" href="https://docs.silex.me/en/user/cms#custom-states">Learn more about custom states</a>
        </details>
      </section>
    `}render(){var t;super.render(),this.redrawing=!0;const e=null===(t=this.editor)||void 0===t?void 0:t.getSelected(),n=ae`
      ${this.getHead(null)}
      <p class="ds-empty">Select an element to edit its states</p>
    `;if(!this.editor||this.disabled)return this.redrawing=!1,ae``;if(!e)return this.redrawing=!1,n;const r=this.getStateIds(e).map((t=>({name:t,publicState:this.type===Kn.States,state:this.getState(e,t)}))).filter((t=>!t.state.hidden)),i=ae`
      ${this.getHead(e)}
      <div class="ds-states">
        <div class="ds-states__items">
          ${r.map(((t,n)=>ae(er||(er=Xn(["\n            <div class=\"ds-states__item\">\n              ","\n              <div class=\"ds-states__buttons\">\n                <button\n                  title=\"Remove this state\"\n                  class=\"ds-states__remove-button ds-states__button\"\n                  @click=","\n                  >x</button>\n                <button\n                  title=\"Rename this state\"\n                  class=\"ds-states__rename-button ds-states__button\"\n                  @click=","\n                  >✏</button>\n                  <button\n                    title=\"Move this state up\"\n                    class=\"ds-states__item-move-up ds-states__button","\"\n                    @click=","\n                    >↑</button>\n                  <button\n                    title=\"Move this state down\"\n                    class=\"ds-states__item-move-down ds-states__button","\"\n                    @click=","\n                  >↓</button>\n              </div>\n            </div>\n            <hr class=\"ds-states__sep\" />\n          "],["\n            <div class=\"ds-states__item\">\n              ","\n              <div class=\"ds-states__buttons\">\n                <button\n                  title=\"Remove this state\"\n                  class=\"ds-states__remove-button ds-states__button\"\n                  @click=","\n                  >x</button>\n                <button\n                  title=\"Rename this state\"\n                  class=\"ds-states__rename-button ds-states__button\"\n                  @click=","\n                  >\\u270F</button>\n                  <button\n                    title=\"Move this state up\"\n                    class=\"ds-states__item-move-up ds-states__button","\"\n                    @click=","\n                    >\\u2191</button>\n                  <button\n                    title=\"Move this state down\"\n                    class=\"ds-states__item-move-down ds-states__button","\"\n                    @click=","\n                  >\\u2193</button>\n              </div>\n            </div>\n            <hr class=\"ds-states__sep\" />\n          "])),this.getStateEditor(e,t.state.label||'',t.name),(()=>{this.removeState(e,t.name),this.requestUpdate()}),(()=>{const n=this.renameCustomState(t);n&&n!==t&&(this.removeState(e,t.name),this.setState(e,n.name,n.state),this.requestUpdate())}),0===n?' ds-states__button--disabled':'',(()=>{r.splice(n-1,0,r.splice(n,1)[0]),this.updateOrderCustomStates(e,r)}),n===r.length-1?' ds-states__button--disabled':'',(()=>{r.splice(n+1,0,r.splice(n,1)[0]),this.updateOrderCustomStates(e,r)}))))}
        </div>
      </div>
    `;return this.redrawing=!1,i}getStateIds(t){const e=C(t,this.type===Kn.States);switch(this.type){case Kn.States:return e;case Kn.Attributes:return e.filter((t=>!Object.keys(p).includes(t)))}}getState(t,e){return O(t,e,this.type===Kn.States)}setState(t,e,n){I(t,e,n,this.type===Kn.States)}removeState(t,e){N(t,e,this.type===Kn.States)}getStateEditor(t,e,n){return ae`
      <state-editor
        id="${n}"
        name=${n}
        ${yn((e=>{if(e){const r=e;r.setEditor(this.editor),r.data=this.getTokens(this.editor.DataSourceManager.getDataTree(),t,n)}}))}
        @change=${()=>this.onChange(t,n,e)}
        .disabled=${this.disabled}
      >
        <label slot="label">${e||n}</label>
      </state-editor>
    `}onChange(t,e,n){if(this.redrawing)return;const r=this.shadowRoot.querySelector(`#${e}`);this.setState(t,e,{expression:r.data,label:n})}getTokens(t,e,n){const r=this.getState(e,n);return r&&r.expression?r.expression.map((e=>Te(e,t))):[]}renameCustomState(t){var e,n,r;const i=null===(r=null===(n=null===(e=prompt('Rename this state',t.state.label))||void 0===e?void 0:e.toLowerCase())||void 0===n?void 0:n.replace(/[^a-z0-9]/g,'-'))||void 0===r?void 0:r.replace(/^-+|-+$/g,'');return i&&i!==t.state.label?Object.assign(Object.assign({},t),{state:Object.assign(Object.assign({},t.state),{label:i})}):t}updateOrderCustomStates(t,e){this.getStateIds(t).forEach((n=>{e.map((t=>t.name)).includes(n)&&this.removeState(t,n)})),e.forEach((e=>{this.setState(t,e.name,e.state)}))}createCustomState(t){var e,n,r;const i=null===(r=null===(n=null===(e=prompt('Name this state','New state'))||void 0===e?void 0:e.toLowerCase())||void 0===n?void 0:n.replace(/[^a-z0-9]/g,'-'))||void 0===r?void 0:r.replace(/^-+|-+$/g,'');if(!i)return null;if(this.type===Kn.Attributes&&Object.keys(p).includes(i))return alert(`The name ${i} is reserved, please choose another name`),null;const o=`${t.getId()}-${Math.random().toString(36).slice(2)}`,s={label:i,expression:[]};return this.setState(t,o,s),{name:o,state:s,publicState:this.type===Kn.States}}};var er;Yn([Sn({type:Boolean}),Zn("design:type",Object)],tr.prototype,"disabled",void 0),Yn([Sn({type:Kn}),Zn("design:type",Object)],tr.prototype,"type",void 0),Yn([Sn({type:String}),Zn("design:type",Object)],tr.prototype,"title",void 0),tr=Yn([$n('custom-states-editor')],tr);const nr=(t,e={})=>{const n=Object.assign(Object.assign({dataSources:[],filters:[]},e),{view:Object.assign({el:'.gjs-pn-panel.gjs-pn-views-container'},null==e?void 0:e.view)}),r=n.dataSources.map((t=>{if('graphql'===t.type)return new Ye(t);throw new Error(`Unknown data source: ${t.label}`)}));Promise.all(r.map((t=>t.connect()))).then((()=>console.info('Data sources connected'))).catch((t=>console.error('Error while connecting data sources',t))),t.DataSourceManager=new _n(r,t,n),((t,e={})=>{if(e.el){const n=Object.assign({styles:wn},e),r=document.createElement('section');let i;r.classList.add('gjs-one-bg','ds-wrapper'),r.innerHTML=`\n      <custom-states-editor\n        type="states"\n        title="States"\n        >\n        <style>\n          ${n.styles}\n        </style>\n      </custom-states-editor>\n      <custom-states-editor\n        type="attributes"\n        title="Attributes"\n        >\n        <style>\n          ${n.styles}\n        </style>\n      </custom-states-editor>\n      <properties-editor>\n        <style>\n          ${n.styles}\n        </style>\n      </properties-editor>\n    `,t.onReady((()=>{if(void 0===n.el)throw new Error(`el option must be set`);if('string'==typeof n.el){if(!document.querySelector(n.el))throw new Error(`Element ${n.el} not found`)}else if(!(n.el instanceof HTMLElement)&&'function'!=typeof n.el)throw new Error(`el option must be a string or an HTMLElement or a function`);if(i='string'==typeof n.el?document.querySelector(n.el):'function'==typeof n.el?n.el():n.el,!i)throw new Error(`Element ${n.el} not found`);i.appendChild(r);const e=r.querySelector('properties-editor'),o=r.querySelector('custom-states-editor[type="states"]'),s=r.querySelector('custom-states-editor[type="attributes"]');if(e.setEditor(t),o.setEditor(t),s.setEditor(t),n.button){const t='function'==typeof n.button?n.button():n.button;if(!t)throw new Error(`Element ${n.button} not found`);t.on('change',(()=>{t.active?(i.appendChild(r),r.style.display='block',e.removeAttribute('disabled'),o.removeAttribute('disabled'),s.removeAttribute('disabled')):(r.style.display='none',e.setAttribute('disabled',''),o.setAttribute('disabled',''),s.setAttribute('disabled',''))})),r.style.display=t.active?'block':'none'}}))}else console.warn('Dynamic data UI not enabled, please set the el option to enable it')})(t,n.view)},rr='__VERSION__'})(),r})()));
//# sourceMappingURL=index.js.map